{"version":3,"sources":["webpack:///./src/dapps/Ambrpay/Ambrpay.vue?d983","webpack:///./src/dapps/Ambrpay/containers/SubscriptionForm/SubscriptionForm.vue?5a98","webpack:///src/dapps/Ambrpay/containers/SubscriptionForm/SubscriptionForm.vue","webpack:///./src/dapps/Ambrpay/containers/SubscriptionForm/SubscriptionForm.vue?2ecd","webpack:///./src/dapps/Ambrpay/containers/SubscriptionForm/SubscriptionForm.vue","webpack:///./src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue?a32b","webpack:///src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue","webpack:///./src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue?e9f2","webpack:///./src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue","webpack:///./src/dapps/Ambrpay/components/ManageSubscriptionsModal/ManageSubscriptionsModal.vue?390a","webpack:///src/dapps/Ambrpay/components/ManageSubscriptionsModal/ManageSubscriptionsModal.vue","webpack:///./src/dapps/Ambrpay/components/ManageSubscriptionsModal/ManageSubscriptionsModal.vue?43da","webpack:///./src/dapps/Ambrpay/components/ManageSubscriptionsModal/ManageSubscriptionsModal.vue","webpack:///./src/dapps/Ambrpay/AmbrpayModified.js","webpack:///src/dapps/Ambrpay/Ambrpay.vue","webpack:///./src/dapps/Ambrpay/Ambrpay.vue?a99b","webpack:///./src/dapps/Ambrpay/Ambrpay.vue","webpack:///./src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue?d8d9","webpack:///./src/dapps/Ambrpay/Ambrpay.vue?20dd","webpack:///./src/dapps/Ambrpay/containers/SubscriptionForm/SubscriptionForm.vue?e7a1","webpack:///./src/dapps/Ambrpay/components/ManageFundsModal/ManageFundsModal.vue?4e32","webpack:///./src/dapps/Ambrpay/components/ManageSubscriptionsModal/ManageSubscriptionsModal.vue?e2a7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$t","_v","_s","on","$event","openManageFundsModal","directives","name","rawName","value","expression","loadingBalance","availableBalanceEth","availableBalanceUSD","subscriptions","startSubscription","openManageSubModal","ref","manageFundsText","addFunds","withdrawFunds","unsubscribeSub","staticRenderFns","clearAddress","getToAddress","sendEntireBalance","domProps","target","composing","sendAmount","amountErrMsg","intervalDays","intervalErrMsg","class","isValidInput","clear","components","DropDownAddressSelector","props","type","Array","default","data","address","isValidAddress","hexAddress","computed","watch","newVal","lt","startsWith","length","methods","valid","account","web3","utils","fromWei","$emit","subscriptionPlan","amount","receiverWallet","interval","transferOut","network","$nextTick","component","availableBalanceUsd","ethAmount","errMsg","_e","actionStep","onClick","String","oldVal","$refs","hide","_l","sub","key","subscriptionStatus","formatDate","cycleEnd","toggleMoreInfo","moreInfo","price","cycleStart","subscriptionInterval","subscriptionCurrencyCode","unsubscribe","storagePos","smartContractAddress","param","Ambrpay","apiEndpoint","_web3","ethAddress","ambrpay","apiKey","testMode","contractAddress","contractAddresses","setApiKey","indexOf","getContractAddresses","Promise","resolve","reject","url","getRequest","then","JSON","parse","netId","mainnet","ABI","abi","ropsten","getSubscriptionPlan","id","o","subscribe","senderWallet","subscriptionAmount","customPrice","subscriptionFeeAmount","metaMaskLoaded","getMetaMaskAccount","plan","wallet","isAddress","daysInterval","isInt","parseInt","acceptedCryptoCurrencies","Ethereum","isFloat","currencyCode","getExchangePrice","fee","subscriptionTotalAmount","parseFloat","subscriptionPriceLimit","priceLimitPercentage","instance","eth","Contract","createSubscriptionWithTransfer","toWei","toString","send","gas","from","res","catch","e","txHash","customer","subscriptionPlanId","customerId","customerEmail","customerDescription","transactionHash","subscriptionCurrency","subscriptionPrice","createSubscription","postRequest","to","http","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","responseText","params","stringify","getSubscriptionFunds","balance","getBalances","call","getSubscriptions","metamaskAddress","getMetaMaskBalance","getBalance","toDecimal","pos","deactivateSubscription","err","n","Number","publicApiKey","SubscriptionForm","BackButton","ManageFundsModal","ManageSubscriptionsModal","ethPrice","mounted","init","manageSubs","manageSubscriptionsModal","$on","online","getEthPrice","chainID","convertToUSD","str","manageFunds","manageFundsModal","show"],"mappings":"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","file":"js/chunk-3f08399b.a7d263ba.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ambrpay-container\"},[_c('back-button',{attrs:{\"title\":_vm.$t('common.exit-dapp')}}),_c('b-container',{staticClass:\"pl-5 pr-5\"},[_c('div',{staticClass:\"ambrpay-header mt-5\"},[_c('div',{staticClass:\"title-container\"},[_c('h3',{staticClass:\"page-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.title')))]),_c('popover',{staticClass:\"dapp-popover\",attrs:{\"popcontent\":_vm.$t('dappsAmbrpay.ambrpay-popover')}})],1),_c('div',{staticClass:\"btns-container\"},[_c('b-button',{staticClass:\"withdraw-btn\",on:{\"click\":function($event){return _vm.openManageFundsModal('dappsAmbrpay.withdraw')}}},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.withdraw-funds')))]),_c('b-button',{staticClass:\"add-btn\",on:{\"click\":function($event){return _vm.openManageFundsModal('dappsAmbrpay.add')}}},[_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.add-funds'))+\" \")])],1)]),_c('div',{staticClass:\"funds-container\"},[_c('span',{staticClass:\"fund-text\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.balance')))]),_c('div',{staticClass:\"balance-container\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingBalance),expression:\"loadingBalance\"}],staticClass:\"fa fa-spinner fa-spin\"}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loadingBalance),expression:\"!loadingBalance\"}],staticClass:\"fund-text\"},[_vm._v(_vm._s(_vm.availableBalanceEth)+\" \"+_vm._s(_vm.$t('common.currency.eth'))+\" \")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loadingBalance),expression:\"!loadingBalance\"}],staticClass:\"usd-text\"},[_vm._v(_vm._s(_vm.availableBalanceUSD)+\" \"+_vm._s(_vm.$t('common.currency.usd')))])])]),_c('subscription-form',{attrs:{\"subscriptions\":_vm.subscriptions},on:{\"startSubscription\":_vm.startSubscription,\"openManageSubModal\":_vm.openManageSubModal}})],1),_c('manage-funds-modal',{ref:\"manageFunds\",attrs:{\"manage-funds-text\":_vm.manageFundsText,\"available-balance-eth\":_vm.availableBalanceEth,\"available-balance-usd\":_vm.availableBalanceUSD},on:{\"addFunds\":_vm.addFunds,\"withdrawFunds\":_vm.withdrawFunds}}),_c('manage-subscriptions-modal',{ref:\"manageSubs\",attrs:{\"subscriptions\":_vm.subscriptions},on:{\"unsubscribeSub\":_vm.unsubscribeSub}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subscription-container\"},[_c('div',{staticClass:\"subscription-content\"},[_c('div',{staticClass:\"subscription-form-container\"},[_c('b-container',[_c('b-row',{staticClass:\"address-block\"},[_c('dropdown-address-selector',{attrs:{\"clear-address\":_vm.clearAddress,\"title\":_vm.$t('sendTx.to-addr')},on:{\"toAddress\":function($event){return _vm.getToAddress($event)}}})],1),_c('b-row',[_c('b-col',{staticClass:\"mt-3\",attrs:{\"cols\":\"12\",\"md\":\"5\"}},[_c('span',{staticClass:\"label-text\"},[_vm._v(_vm._s(_vm.$t('sendTx.type')))]),_c('div',{staticClass:\"fake-input\"},[_c('p',[_c('img',{staticClass:\"currency-icon\",attrs:{\"src\":require(\"@/assets/images/currency/eth.svg\")}}),_c('span',{staticClass:\"token-txt\"},[_vm._v(_vm._s(_vm.$t('common.currency.eth')))]),_vm._v(\"-\"+_vm._s(_vm.$t('common.currency.ethereum'))+\" \")])])]),_c('b-col',{staticClass:\"amount-container mt-3\",attrs:{\"cols\":\"12\",\"md\":\"7\"}},[_c('div',{staticClass:\"amount-text\"},[_c('span',{staticClass:\"label-text\"},[_vm._v(_vm._s(_vm.$t('sendTx.amount')))]),_c('span',{staticClass:\"action-text entire-balance\",on:{\"click\":_vm.sendEntireBalance}},[_vm._v(_vm._s(_vm.$t('sendTx.button-entire')))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendAmount),expression:\"sendAmount\"}],attrs:{\"type\":\"number\",\"placeholder\":\"0.01\",\"min\":\"0.01\"},domProps:{\"value\":(_vm.sendAmount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.sendAmount=$event.target.value}}}),_c('p',{staticClass:\"sub-text\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.automation-fee')))]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.amountErrMsg),expression:\"amountErrMsg\"}],staticClass:\"sub-text err-msg\"},[_vm._v(\" \"+_vm._s(_vm.amountErrMsg)+\" \")])])],1),_c('b-row',{staticClass:\"row-style mt-1 interval-container\"},[_c('span',{staticClass:\"label-text\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.interval-in-every')))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.intervalDays),expression:\"intervalDays\"}],staticClass:\"days-text\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.days')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.intervalDays),expression:\"intervalDays\"}],attrs:{\"placeholder\":_vm.$t('dappsAmbrpay.enter-days'),\"type\":\"number\",\"min\":\"1\",\"max\":\"365\"},domProps:{\"value\":(_vm.intervalDays)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.intervalDays=$event.target.value}}}),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.intervalErrMsg),expression:\"intervalErrMsg\"}],staticClass:\"sub-text err-msg\"},[_vm._v(\" \"+_vm._s(_vm.intervalErrMsg)+\" \")])]),_c('b-row',{staticClass:\"mt-5 button-container\"},[_c('b-button',{staticClass:\"active-sub-btn my-subscriptions-container\",on:{\"click\":_vm.openManageSubModal}},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.title'))+\" \")]),_c('b-button',{staticClass:\"mew-btn\",class:[_vm.isValidInput ? '' : 'disabled'],on:{\"click\":_vm.startSubscription}},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.start-recurring')))])],1),_c('b-row',[_c('div',{staticClass:\"clear-all-btn mx-auto mt-3\",on:{\"click\":function($event){return _vm.clear()}}},[_vm._v(\" \"+_vm._s(_vm.$t('common.clear-all'))+\" \")])])],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"subscription-container\">\r\n    <div class=\"subscription-content\">\r\n      <div class=\"subscription-form-container\">\r\n        <b-container>\r\n          <b-row class=\"address-block\">\r\n            <dropdown-address-selector\r\n              :clear-address=\"clearAddress\"\r\n              :title=\"$t('sendTx.to-addr')\"\r\n              @toAddress=\"getToAddress($event)\"\r\n            />\r\n          </b-row>\r\n          <b-row>\r\n            <b-col class=\"mt-3\" cols=\"12\" md=\"5\">\r\n              <span class=\"label-text\">{{ $t('sendTx.type') }}</span>\r\n              <div class=\"fake-input\">\r\n                <p>\r\n                  <img\r\n                    class=\"currency-icon\"\r\n                    src=\"@/assets/images/currency/eth.svg\"\r\n                  />\r\n                  <span class=\"token-txt\">{{ $t('common.currency.eth') }}</span\r\n                  >-{{ $t('common.currency.ethereum') }}\r\n                </p>\r\n              </div>\r\n            </b-col>\r\n            <b-col class=\"amount-container mt-3\" cols=\"12\" md=\"7\">\r\n              <div class=\"amount-text\">\r\n                <span class=\"label-text\">{{ $t('sendTx.amount') }}</span>\r\n                <span\r\n                  class=\"action-text entire-balance\"\r\n                  @click=\"sendEntireBalance\"\r\n                  >{{ $t('sendTx.button-entire') }}</span\r\n                >\r\n              </div>\r\n              <input\r\n                v-model=\"sendAmount\"\r\n                type=\"number\"\r\n                placeholder=\"0.01\"\r\n                min=\"0.01\"\r\n              />\r\n              <p class=\"sub-text\">{{ $t('dappsAmbrpay.automation-fee') }}</p>\r\n              <p v-show=\"amountErrMsg\" class=\"sub-text err-msg\">\r\n                {{ amountErrMsg }}\r\n              </p>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row class=\"row-style mt-1 interval-container\">\r\n            <span class=\"label-text\">{{\r\n              $t('dappsAmbrpay.interval-in-every')\r\n            }}</span>\r\n            <span v-show=\"intervalDays\" class=\"days-text\">{{\r\n              $t('dappsAmbrpay.days')\r\n            }}</span>\r\n            <input\r\n              v-model=\"intervalDays\"\r\n              :placeholder=\"$t('dappsAmbrpay.enter-days')\"\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"365\"\r\n            />\r\n            <p v-show=\"intervalErrMsg\" class=\"sub-text err-msg\">\r\n              {{ intervalErrMsg }}\r\n            </p>\r\n          </b-row>\r\n          <b-row class=\"mt-5 button-container\">\r\n            <b-button\r\n              class=\"active-sub-btn my-subscriptions-container\"\r\n              @click=\"openManageSubModal\"\r\n              >{{ $t('dappsAmbrpay.manage-subscriptions.title') }}\r\n            </b-button>\r\n            <b-button\r\n              :class=\"[isValidInput ? '' : 'disabled']\"\r\n              class=\"mew-btn\"\r\n              @click=\"startSubscription\"\r\n              >{{ $t('dappsAmbrpay.start-recurring') }}</b-button\r\n            >\r\n          </b-row>\r\n          <b-row>\r\n            <div class=\"clear-all-btn mx-auto mt-3\" @click=\"clear()\">\r\n              {{ $t('common.clear-all') }}\r\n            </div>\r\n          </b-row>\r\n        </b-container>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport BigNumber from 'bignumber.js';\r\nimport DropDownAddressSelector from '@/components/DropDownAddressSelector';\r\n\r\nexport default {\r\n  components: {\r\n    'dropdown-address-selector': DropDownAddressSelector\r\n  },\r\n  props: {\r\n    subscriptions: {\r\n      type: Array,\r\n      default: function () {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      address: '',\r\n      isValidAddress: false,\r\n      hexAddress: '',\r\n      intervalDays: '',\r\n      sendAmount: '',\r\n      amountErrMsg: '',\r\n      intervalErrMsg: '',\r\n      clearAddress: false\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('main', ['web3', 'network', 'account']),\r\n    isValidInput() {\r\n      return (\r\n        this.isValidAddress &&\r\n        !this.amountErrMsg &&\r\n        this.sendAmount &&\r\n        this.address &&\r\n        !this.intervalErrMsg\r\n      );\r\n    }\r\n  },\r\n  watch: {\r\n    sendAmount(newVal) {\r\n      const value = new BigNumber(newVal);\r\n      const accountBalance = this.web3.utils.fromWei(\r\n        new BigNumber(this.account.balance).toFixed(),\r\n        'ether'\r\n      );\r\n      const automationFee = new BigNumber(value.times(0.1));\r\n      const totalVal = value.plus(automationFee);\r\n\r\n      if (!newVal) {\r\n        return (this.amountErrMsg = '');\r\n      }\r\n\r\n      if (value.lt(0.01)) {\r\n        this.amountErrMsg = this.$t('dappsAmbrpay.sub-form.min-greater');\r\n      } else if (totalVal.gt(accountBalance)) {\r\n        this.amountErrMsg = this.$t('dappsAmbrpay.sub-form.higher-than-bal');\r\n      } else {\r\n        this.amountErrMsg = '';\r\n      }\r\n    },\r\n    intervalDays(newVal) {\r\n      if (newVal.startsWith('0') && newVal.length > 1) {\r\n        this.intervalErrMsg = this.$t(\r\n          'dappsAmbrpay.sub-form.enter-correct-num'\r\n        );\r\n      } else if (newVal > 365) {\r\n        this.intervalErrMsg = this.$t('dappsAmbrpay.sub-form.cannot-exceed');\r\n      } else {\r\n        this.intervalErrMsg = '';\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    clear() {\r\n      this.address = '';\r\n      this.isValidAddress = false;\r\n      this.hexAddress = '';\r\n      this.intervalDays = '';\r\n      this.sendAmount = '';\r\n      this.amountErrMsg = '';\r\n      this.intervalErrMsg = '';\r\n      this.clearAddress = !this.clearAddress;\r\n    },\r\n    getToAddress(data) {\r\n      this.address = data.address;\r\n      this.hexAddress = data.address;\r\n      this.isValidAddress = data.valid;\r\n    },\r\n    sendEntireBalance() {\r\n      if (this.account) {\r\n        this.sendAmount = this.web3.utils.fromWei(\r\n          new BigNumber(this.account.balance).toFixed(),\r\n          'ether'\r\n        );\r\n      }\r\n    },\r\n    openManageSubModal() {\r\n      this.$emit('openManageSubModal');\r\n    },\r\n    startSubscription() {\r\n      const data = {\r\n        subscriptionPlan: 'sp_f06PoxHvvutJZd',\r\n        amount: new BigNumber(this.sendAmount).toNumber(),\r\n        receiverWallet: this.address,\r\n        interval: new BigNumber(this.intervalDays).toNumber(),\r\n        transferOut: true,\r\n        network: 'auto'\r\n      };\r\n\r\n      this.$emit('startSubscription', data);\r\n\r\n      this.$nextTick(() => {\r\n        this.clear();\r\n        this.sendAmount = '';\r\n        this.address = '';\r\n        this.intervalDays = '';\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../AmbrpayGlobal.scss';\r\n@import 'SubscriptionForm.scss';\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SubscriptionForm.vue?vue&type=template&id=410f81ef&scoped=true&\"\nimport script from \"./SubscriptionForm.vue?vue&type=script&lang=js&\"\nexport * from \"./SubscriptionForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SubscriptionForm.vue?vue&type=style&index=0&id=410f81ef&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"410f81ef\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-container\"},[_c('b-modal',{ref:\"manageFundsModal\",attrs:{\"title\":_vm.manageFundsText === 'Add'\n        ? _vm.$t('dappsAmbrpay.manage-funds.add-funds')\n        : _vm.$t('dappsAmbrpay.manage-funds.withdraw-funds'),\"centered\":\"\",\"hide-footer\":\"\",\"static\":\"\",\"lazy\":\"\"}},[_c('div',{staticClass:\"modal-contents\"},[_c('div',{staticClass:\"balance-container\"},[_c('span',{staticClass:\"funds-txt\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-funds.avail-balance')))]),_c('div',[_c('p',{staticClass:\"funds-txt\"},[_vm._v(\" \"+_vm._s(_vm.availableBalanceEth)+\" \"+_vm._s(_vm.$t('common.currency.eth'))+\" \")]),_c('p',{staticClass:\"text-right\"},[_vm._v(\"$\"+_vm._s(_vm.availableBalanceUsd))])])]),_c('hr'),(_vm.actionStep)?_c('div',{staticClass:\"action-container\"},[_c('p',{staticClass:\"funds-txt\"},[_vm._v(\" \"+_vm._s(_vm.manageFundsText === 'Add' ? _vm.$t('dappsAmbrpay.manage-funds.how-much-eth-add') : _vm.$t('dappsAmbrpay.manage-funds.how-much-eth-withdraw'))+\" \")]),_c('span',{staticClass:\"eth-text\"},[_vm._v(_vm._s(_vm.$t('common.currency.eth')))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ethAmount),expression:\"ethAmount\"}],staticClass:\"mt-3\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.ethAmount)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.ethAmount=$event.target.value}}}),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.errMsg),expression:\"errMsg\"}],staticClass:\"err-msg pl-2\"},[_vm._v(_vm._s(_vm.errMsg))])]):_vm._e(),(!_vm.actionStep)?_c('div',{staticClass:\"confirmation-container\"},[_c('i',{staticClass:\"check-icon fa fa-check\",attrs:{\"aria-hidden\":\"true\"}}),(_vm.manageFundsText === 'Add')?_c('p',{staticClass:\"mr-5 ml-5 mt-3 mb-1\"},[_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-funds.subscription-fund'))+\" \"),_c('span',{staticClass:\"mew-txt\"},[_vm._v(_vm._s(_vm.ethAmount))]),_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-funds.should-update'))+\" \")]):_vm._e(),(_vm.manageFundsText === 'Withdraw')?_c('p',{staticClass:\"mr-5 ml-5 mt-2\"},[_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-funds.withdraw-fund'))+\" \"),_c('span',{staticClass:\"mew-txt\"},[_vm._v(_vm._s(_vm.ethAmount))]),_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-funds.should-update'))+\" \")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"btn-container\"},[_c('button',{staticClass:\"mew-btn mt-4 mb-4\",class:_vm.errMsg || !_vm.ethAmount ? 'disabled' : '',on:{\"click\":function($event){return _vm.onClick()}}},[_vm._v(\" \"+_vm._s(_vm.actionStep ? _vm.manageFundsText : _vm.$t('common.ok'))+\" \")])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal-container\">\r\n    <b-modal\r\n      ref=\"manageFundsModal\"\r\n      :title=\"\r\n        manageFundsText === 'Add'\r\n          ? $t('dappsAmbrpay.manage-funds.add-funds')\r\n          : $t('dappsAmbrpay.manage-funds.withdraw-funds')\r\n      \"\r\n      centered\r\n      hide-footer\r\n      static\r\n      lazy\r\n    >\r\n      <div class=\"modal-contents\">\r\n        <div class=\"balance-container\">\r\n          <span class=\"funds-txt\">{{\r\n            $t('dappsAmbrpay.manage-funds.avail-balance')\r\n          }}</span>\r\n          <div>\r\n            <p class=\"funds-txt\">\r\n              {{ availableBalanceEth }} {{ $t('common.currency.eth') }}\r\n            </p>\r\n            <p class=\"text-right\">${{ availableBalanceUsd }}</p>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <div v-if=\"actionStep\" class=\"action-container\">\r\n          <p class=\"funds-txt\">\r\n            {{\r\n              manageFundsText === 'Add'\r\n                ? $t('dappsAmbrpay.manage-funds.how-much-eth-add')\r\n                : $t('dappsAmbrpay.manage-funds.how-much-eth-withdraw')\r\n            }}\r\n          </p>\r\n          <span class=\"eth-text\">{{ $t('common.currency.eth') }}</span>\r\n          <input v-model=\"ethAmount\" class=\"mt-3\" type=\"number\" />\r\n          <p v-show=\"errMsg\" class=\"err-msg pl-2\">{{ errMsg }}</p>\r\n        </div>\r\n        <div v-if=\"!actionStep\" class=\"confirmation-container\">\r\n          <i class=\"check-icon fa fa-check\" aria-hidden=\"true\" />\r\n          <p v-if=\"manageFundsText === 'Add'\" class=\"mr-5 ml-5 mt-3 mb-1\">\r\n            {{ $t('dappsAmbrpay.manage-funds.subscription-fund') }}\r\n            <span class=\"mew-txt\">{{ ethAmount }}</span>\r\n            {{ $t('dappsAmbrpay.manage-funds.should-update') }}\r\n          </p>\r\n          <p v-if=\"manageFundsText === 'Withdraw'\" class=\"mr-5 ml-5 mt-2\">\r\n            {{ $t('dappsAmbrpay.manage-funds.withdraw-fund') }}\r\n            <span class=\"mew-txt\">{{ ethAmount }}</span>\r\n            {{ $t('dappsAmbrpay.manage-funds.should-update') }}\r\n          </p>\r\n        </div>\r\n        <div class=\"btn-container\">\r\n          <button\r\n            :class=\"errMsg || !ethAmount ? 'disabled' : ''\"\r\n            class=\"mew-btn mt-4 mb-4\"\r\n            @click=\"onClick()\"\r\n          >\r\n            {{ actionStep ? manageFundsText : $t('common.ok') }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport BigNumber from 'bignumber.js';\r\n\r\nexport default {\r\n  props: {\r\n    manageFundsText: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    availableBalanceEth: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    availableBalanceUsd: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      actionStep: true,\r\n      ethAmount: 0,\r\n      errMsg: ''\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('main', ['web3', 'account'])\r\n  },\r\n  watch: {\r\n    manageFundsText(newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.ethAmount = 0;\r\n        this.errMsg = '';\r\n      }\r\n    },\r\n    ethAmount(newVal) {\r\n      const value = new BigNumber(newVal);\r\n      const accountBalance = this.web3.utils.fromWei(\r\n        new BigNumber(this.account.balance).toFixed(),\r\n        'ether'\r\n      );\r\n      const subAccountBalance = new BigNumber(this.availableBalanceEth);\r\n\r\n      if (newVal <= 0) {\r\n        this.errMsg = this.$t('dappsAmbrpay.errors.amount-higher-zero');\r\n      } else if (this.manageFundsText === 'Add' && value.gt(accountBalance)) {\r\n        this.errMsg = this.$t('dappsAmbrpay.errors.amount-higher-balance');\r\n      } else if (\r\n        this.manageFundsText === 'Withdraw' &&\r\n        value.gt(subAccountBalance)\r\n      ) {\r\n        this.errMsg = this.$t('dappsAmbrpay.errors.amount-higher-sub-balance');\r\n      } else {\r\n        this.errMsg = '';\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onClick() {\r\n      if (this.manageFundsText === 'Add' && this.actionStep === true) {\r\n        this.$emit('addFunds', this.ethAmount);\r\n        this.actionStep = false;\r\n      } else if (\r\n        this.manageFundsText === 'Withdraw' &&\r\n        this.actionStep === true\r\n      ) {\r\n        this.$emit('withdrawFunds', this.ethAmount);\r\n        this.actionStep = false;\r\n      } else {\r\n        this.$refs['manageFundsModal'].hide();\r\n        this.actionStep = true;\r\n        this.ethAmount = '';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import 'ManageFundsModal.scss';\r\n@import '../../AmbrpayGlobal.scss';\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.modal-body {\r\n  padding: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageFundsModal.vue?vue&type=template&id=11b54449&scoped=true&\"\nimport script from \"./ManageFundsModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageFundsModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageFundsModal.vue?vue&type=style&index=0&id=11b54449&lang=scss&scoped=true&\"\nimport style1 from \"./ManageFundsModal.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11b54449\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-container\"},[_c('b-modal',{ref:\"manageSubscriptionsModal\",attrs:{\"title\":_vm.$t('dappsAmbrpay.my-subscriptions'),\"centered\":\"\",\"hide-footer\":\"\",\"static\":\"\",\"lazy\":\"\"}},[_c('div',{staticClass:\"modal-contents\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.subscriptions.length === 0),expression:\"subscriptions.length === 0\"}],staticClass:\"no-sub-container\"},[_c('p',{staticClass:\"mx-auto pl-3\"},[_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.no-active'))+\" \")])]),_vm._l((_vm.subscriptions),function(sub){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.subscriptions.length > 0),expression:\"subscriptions.length > 0\"}],key:sub.key,staticClass:\"subscription-container\"},[_c('div',{staticClass:\"info-container\"},[_c('div',{staticClass:\"header-txt\"},[_c('span',{staticClass:\"header-container\"},[_c('i',{class:sub.subscriptionStatus === 'Active'\n                    ? 'check-icon fa fa-check'\n                    : 'times-icon fa fa-times',attrs:{\"aria-hidden\":\"true\"}}),_c('span',{class:[\n                  'status-txt',\n                  sub.subscriptionStatus === 'Active'\n                    ? 'active-txt'\n                    : 'inactive-txt'\n                ]},[_vm._v(\" \"+_vm._s(sub.subscriptionStatus)+\" \")]),_c('span',{staticClass:\"next-pay-txt\"},[_vm._v(\"(\"+_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.next-payment'))+\" \"+_vm._s(_vm.formatDate(sub.cycleEnd))+\")\")])]),_c('span',[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.moreInfo),expression:\"sub.moreInfo\"}],staticClass:\"fa fa-angle-up\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){return _vm.toggleMoreInfo(sub)}}}),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!sub.moreInfo),expression:\"!sub.moreInfo\"}],staticClass:\"fa fa-angle-down\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":function($event){return _vm.toggleMoreInfo(sub)}}})])]),_c('div',{staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.receiver-wallet')))]),_c('a',{staticClass:\"address-txt prevent-user-select\",attrs:{\"title\":sub.receiverWallet,\"href\":'https://etherscan.io/address/' + sub.receiverWallet,\"rel\":\"noopener noreferrer\"}},[_vm._v(\" \"+_vm._s(sub.receiverWallet)+\" \")])]),_c('div',{staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('sendTx.amount')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(sub.price)+\" \"+_vm._s(_vm.$t('common.currency.eth')))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.moreInfo),expression:\"sub.moreInfo\"}],staticClass:\"more-info-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.subscriptionInterval),expression:\"sub.subscriptionInterval\"}],staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.current-cycle')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(_vm.formatDate(sub.cycleStart))+\"-\"+_vm._s(_vm.formatDate(sub.cycleEnd)))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.subscriptionInterval),expression:\"sub.subscriptionInterval\"}],staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.interval')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.in-every'))+\" \"+_vm._s(sub.subscriptionInterval)+\" \"+_vm._s(_vm.$t('dappsAmbrpay.days-lowercase')))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.subscriptionPlan),expression:\"sub.subscriptionPlan\"}],staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.sub-plan')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(sub.subscriptionPlan))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.subscriptionCurrencyCode),expression:\"sub.subscriptionCurrencyCode\"}],staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.sub-currency')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(sub.subscriptionCurrencyCode))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.subscriptionStatus),expression:\"sub.subscriptionStatus\"}],staticClass:\"info-row\"},[_c('span',{staticClass:\"info-title\"},[_vm._v(_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.sub-status')))]),_c('span',{staticClass:\"info-txt\"},[_vm._v(_vm._s(sub.subscriptionStatus))])])])]),_c('hr',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.moreInfo),expression:\"sub.moreInfo\"}]}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(sub.moreInfo),expression:\"sub.moreInfo\"}],staticClass:\"btn-container mb-2\"},[_c('button',{on:{\"click\":function($event){return _vm.unsubscribe(sub.storagePos, sub.smartContractAddress)}}},[_vm._v(\" \"+_vm._s(_vm.$t('dappsAmbrpay.manage-subscriptions.unsubscribe'))+\" \")])])])})],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal-container\">\r\n    <b-modal\r\n      ref=\"manageSubscriptionsModal\"\r\n      :title=\"$t('dappsAmbrpay.my-subscriptions')\"\r\n      centered\r\n      hide-footer\r\n      static\r\n      lazy\r\n    >\r\n      <div class=\"modal-contents\">\r\n        <div v-show=\"subscriptions.length === 0\" class=\"no-sub-container\">\r\n          <p class=\"mx-auto pl-3\">\r\n            {{ $t('dappsAmbrpay.manage-subscriptions.no-active') }}\r\n          </p>\r\n        </div>\r\n        <div\r\n          v-for=\"sub in subscriptions\"\r\n          v-show=\"subscriptions.length > 0\"\r\n          :key=\"sub.key\"\r\n          class=\"subscription-container\"\r\n        >\r\n          <div class=\"info-container\">\r\n            <div class=\"header-txt\">\r\n              <span class=\"header-container\">\r\n                <i\r\n                  :class=\"\r\n                    sub.subscriptionStatus === 'Active'\r\n                      ? 'check-icon fa fa-check'\r\n                      : 'times-icon fa fa-times'\r\n                  \"\r\n                  aria-hidden=\"true\"\r\n                />\r\n                <span\r\n                  :class=\"[\r\n                    'status-txt',\r\n                    sub.subscriptionStatus === 'Active'\r\n                      ? 'active-txt'\r\n                      : 'inactive-txt'\r\n                  ]\"\r\n                >\r\n                  {{ sub.subscriptionStatus }}\r\n                </span>\r\n                <span class=\"next-pay-txt\"\r\n                  >({{ $t('dappsAmbrpay.manage-subscriptions.next-payment') }}\r\n                  {{ formatDate(sub.cycleEnd) }})</span\r\n                >\r\n              </span>\r\n              <span>\r\n                <i\r\n                  v-show=\"sub.moreInfo\"\r\n                  class=\"fa fa-angle-up\"\r\n                  aria-hidden=\"true\"\r\n                  @click=\"toggleMoreInfo(sub)\"\r\n                />\r\n                <i\r\n                  v-show=\"!sub.moreInfo\"\r\n                  class=\"fa fa-angle-down\"\r\n                  aria-hidden=\"true\"\r\n                  @click=\"toggleMoreInfo(sub)\"\r\n                />\r\n              </span>\r\n            </div>\r\n            <div class=\"info-row\">\r\n              <span class=\"info-title\">{{\r\n                $t('dappsAmbrpay.manage-subscriptions.receiver-wallet')\r\n              }}</span>\r\n              <a\r\n                :title=\"sub.receiverWallet\"\r\n                :href=\"'https://etherscan.io/address/' + sub.receiverWallet\"\r\n                rel=\"noopener noreferrer\"\r\n                class=\"address-txt prevent-user-select\"\r\n              >\r\n                {{ sub.receiverWallet }}\r\n              </a>\r\n            </div>\r\n            <div class=\"info-row\">\r\n              <span class=\"info-title\">{{ $t('sendTx.amount') }}</span\r\n              ><span class=\"info-txt\"\r\n                >{{ sub.price }} {{ $t('common.currency.eth') }}</span\r\n              >\r\n            </div>\r\n            <div v-show=\"sub.moreInfo\" class=\"more-info-container\">\r\n              <div v-show=\"sub.subscriptionInterval\" class=\"info-row\">\r\n                <span class=\"info-title\">{{\r\n                  $t('dappsAmbrpay.manage-subscriptions.current-cycle')\r\n                }}</span\r\n                ><span class=\"info-txt\"\r\n                  >{{ formatDate(sub.cycleStart) }}-{{\r\n                    formatDate(sub.cycleEnd)\r\n                  }}</span\r\n                >\r\n              </div>\r\n              <div v-show=\"sub.subscriptionInterval\" class=\"info-row\">\r\n                <span class=\"info-title\">{{ $t('dappsAmbrpay.interval') }}</span\r\n                ><span class=\"info-txt\"\r\n                  >{{ $t('dappsAmbrpay.in-every') }}\r\n                  {{ sub.subscriptionInterval }}\r\n                  {{ $t('dappsAmbrpay.days-lowercase') }}</span\r\n                >\r\n              </div>\r\n              <div v-show=\"sub.subscriptionPlan\" class=\"info-row\">\r\n                <span class=\"info-title\">{{\r\n                  $t('dappsAmbrpay.manage-subscriptions.sub-plan')\r\n                }}</span\r\n                ><span class=\"info-txt\">{{ sub.subscriptionPlan }}</span>\r\n              </div>\r\n              <div v-show=\"sub.subscriptionCurrencyCode\" class=\"info-row\">\r\n                <span class=\"info-title\">{{\r\n                  $t('dappsAmbrpay.manage-subscriptions.sub-currency')\r\n                }}</span\r\n                ><span class=\"info-txt\">{{\r\n                  sub.subscriptionCurrencyCode\r\n                }}</span>\r\n              </div>\r\n              <div v-show=\"sub.subscriptionStatus\" class=\"info-row\">\r\n                <span class=\"info-title\">{{\r\n                  $t('dappsAmbrpay.manage-subscriptions.sub-status')\r\n                }}</span\r\n                ><span class=\"info-txt\">{{ sub.subscriptionStatus }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <hr v-show=\"sub.moreInfo\" />\r\n          <div v-show=\"sub.moreInfo\" class=\"btn-container mb-2\">\r\n            <button\r\n              @click=\"unsubscribe(sub.storagePos, sub.smartContractAddress)\"\r\n            >\r\n              {{ $t('dappsAmbrpay.manage-subscriptions.unsubscribe') }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    subscriptions: {\r\n      type: Array,\r\n      default: function () {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate(param) {\r\n      if (!param) return '';\r\n      return (\r\n        param.substr(3, 2) + '/' + param.substr(0, 2) + '/' + param.substr(6, 4)\r\n      );\r\n    },\r\n    toggleMoreInfo(sub) {\r\n      sub.moreInfo = !sub.moreInfo;\r\n    },\r\n    unsubscribe(pos, addr) {\r\n      this.$emit('unsubscribeSub', { pos: pos, addr: addr });\r\n\r\n      this.$nextTick(() => {\r\n        this.$refs['manageSubscriptionsModal'].hide();\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import 'ManageSubscriptionsModal.scss';\r\n@import '../../AmbrpayGlobal.scss';\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageSubscriptionsModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageSubscriptionsModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageSubscriptionsModal.vue?vue&type=template&id=36088eac&scoped=true&\"\nimport script from \"./ManageSubscriptionsModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageSubscriptionsModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageSubscriptionsModal.vue?vue&type=style&index=0&id=36088eac&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36088eac\",\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable */\r\n/*!\r\n * ambrpay JavaScript Library v0.2.2\r\n * https://ambrpay.io/\r\n */\r\n\r\nexport default function Ambrpay(account, web3) {\r\n  if (!apiEndpoint) {\r\n    var apiEndpoint = 'https://ambrpay.io/api';\r\n  }\r\n\r\n  var _web3 = web3;\r\n  var ethAddress = account.address;\r\n  var ambrpay = {\r\n    apiKey: false,\r\n    testMode: false,\r\n    contractAddress: false,\r\n    contractAddresses: false,\r\n    network: 'auto',\r\n    setApiKey: function (apiKey) {\r\n      ambrpay.apiKey = apiKey;\r\n\r\n      if (ambrpay.apiKey.indexOf('test_public') != -1) {\r\n        ambrpay.testMode = true;\r\n      } else if (ambrpay.apiKey.indexOf('api_public') != -1) {\r\n        ambrpay.testMode = false;\r\n      } else {\r\n        throw 'invalid public api key';\r\n      }\r\n    },\r\n    getContractAddresses: function () {\r\n      return new Promise(function (resolve, reject) {\r\n        if (ambrpay.contractAddress) {\r\n          return resolve(ambrpay.contractAddress);\r\n        }\r\n\r\n        if (!_web3) {\r\n          reject(\r\n            'MetaMask is not installed. Download it at https://metamask.io/'\r\n          );\r\n        }\r\n\r\n        if (!ambrpay.contractAddresses) {\r\n          var url = apiEndpoint + '/smartContractAddresses';\r\n\r\n          return ambrpay\r\n            .getRequest(url, ambrpay.apiKey)\r\n            .then(function (contractAddresses) {\r\n              ambrpay.contractAddresses = JSON.parse(contractAddresses);\r\n\r\n              return resolve(ambrpay.contractAddresses);\r\n            });\r\n        } else {\r\n          return resolve(ambrpay.contractAddresses);\r\n        }\r\n      }).then(() => {\r\n        var networkName;\r\n\r\n        switch (account.netId) {\r\n          case '1':\r\n            // throw \"mainnet is currently not available\";\r\n\r\n            if (ambrpay.network == 'mainnet' || ambrpay.network == 'auto') {\r\n              networkName = 'Mainnet';\r\n              ambrpay.contractAddress =\r\n                ambrpay.contractAddresses.mainnet.smartContractAddress;\r\n              ambrpay.ABI = {\r\n                abi: JSON.parse(ambrpay.contractAddresses.mainnet.abi)\r\n              };\r\n            } else {\r\n              throw (\r\n                'your wallets network (mainnet) does not match the selected network for the transaction (' +\r\n                ambrpay.network +\r\n                ')'\r\n              );\r\n            }\r\n            break;\r\n          case '2':\r\n            throw 'Morden testnet is not available. Try ropsten testnet.';\r\n            networkName = 'Morden Testnet';\r\n            break;\r\n          case '3':\r\n            if (ambrpay.network == 'ropsten' || ambrpay.network == 'auto') {\r\n              networkName = 'Ropsten Testnet';\r\n              ambrpay.contractAddress =\r\n                ambrpay.contractAddresses.ropsten.smartContractAddress;\r\n              ambrpay.ABI = {\r\n                abi: JSON.parse(ambrpay.contractAddresses.ropsten.abi)\r\n              };\r\n            } else {\r\n              throw (\r\n                'your wallets network (ropsten) does not match the selected network for the transaction (' +\r\n                ambrpay.network +\r\n                ')'\r\n              );\r\n            }\r\n            break;\r\n          case '4':\r\n            throw 'Rinkeby testnet is not available. Try ropsten testnet.';\r\n            networkName = 'Rinkeby Testnet';\r\n            break;\r\n          case '42':\r\n            throw 'Kovan testnet is not available. Try ropsten testnet.';\r\n            networkName = 'Kovan Testnet';\r\n            break;\r\n          default:\r\n            throw 'Uknown testnet. Try ropsten testnet.';\r\n            networkName = 'Unknown';\r\n        }\r\n\r\n        return ambrpay.contractAddress;\r\n      });\r\n    },\r\n    getSubscriptionPlan: function (id) {\r\n      var url = apiEndpoint + '/plan/' + id;\r\n\r\n      return ambrpay.getRequest(url).then(function (o) {\r\n        return JSON.parse(o);\r\n      });\r\n    },\r\n    subscribe: function (data) {\r\n      var senderWallet;\r\n      var receiverWallet;\r\n      var subscriptionPlan;\r\n      var subscriptionAmount;\r\n      var customPrice;\r\n      var priceLimitPercentage = 1.5;\r\n      var transferOut = false;\r\n      var subscriptionFeeAmount;\r\n\r\n      if (data.network) {\r\n        ambrpay.network = data.network;\r\n      }\r\n\r\n      return ambrpay\r\n        .getContractAddresses()\r\n        .then(() => {\r\n          return ambrpay.metaMaskLoaded();\r\n        })\r\n        .then(() => {\r\n          return ambrpay.getMetaMaskAccount();\r\n        })\r\n        .then(account => {\r\n          senderWallet = account;\r\n\r\n          return ambrpay.getSubscriptionPlan(data.subscriptionPlan);\r\n        })\r\n        .then(plan => {\r\n          subscriptionPlan = plan;\r\n\r\n          if (!subscriptionPlan.wallet && !data.receiverWallet) {\r\n            // cant continue without a wallet to subscribe to\r\n            throw \"Subscription plan has no wallet assigned to it, therefore param 'receiverWallet' is required when calling ambrpay.subscribe()\";\r\n          } else if (!subscriptionPlan.wallet) {\r\n            // subscription plan has no receiver wallet, overwrite it with the one from ambrpay.subscribe()\r\n            receiverWallet = data.receiverWallet;\r\n          } else {\r\n            receiverWallet = subscriptionPlan.wallet;\r\n          }\r\n\r\n          if (!_web3.utils.isAddress(receiverWallet)) {\r\n            throw 'receiverAddress is not a valid address';\r\n          }\r\n\r\n          if (subscriptionPlan.daysInterval == -1 && !data.interval) {\r\n            throw \"Subscription plan has interval set to custom, therefore param 'interval' is required when calling ambrpay.subscribe()\";\r\n          }\r\n\r\n          if (\r\n            subscriptionPlan.daysInterval == -1 &&\r\n            !ambrpay.isInt(data.interval)\r\n          ) {\r\n            throw 'interval must be an integer';\r\n          }\r\n\r\n          // todo: only for CRYPTO plans?\r\n          if (\r\n            subscriptionPlan.daysInterval == -1 &&\r\n            data.interval &&\r\n            parseInt(data.interval) >= 1 &&\r\n            parseInt(data.interval) <= 365\r\n          ) {\r\n            subscriptionPlan.daysInterval = parseInt(data.interval);\r\n          } else if (subscriptionPlan.daysInterval == -1 && data.interval) {\r\n            throw 'interval must be between 1 and 365';\r\n          }\r\n\r\n          if (\r\n            typeof data.transferOut !== 'undefined' &&\r\n            typeof data.transferOut !== 'boolean'\r\n          ) {\r\n            throw 'transferOut must be a boolean';\r\n          }\r\n\r\n          if (data.transferOut && subscriptionPlan.transferOut == 1) {\r\n            transferOut = true;\r\n          } else {\r\n            transferOut = false;\r\n          }\r\n\r\n          if (subscriptionPlan.acceptedCryptoCurrencies.Ethereum.price > 0) {\r\n            return subscriptionPlan.acceptedCryptoCurrencies.Ethereum.price;\r\n          } else {\r\n            if (data.amount) {\r\n              if (\r\n                !ambrpay.isInt(data.amount) &&\r\n                !ambrpay.isFloat(data.amount)\r\n              ) {\r\n                throw 'amount must be an integer or a float';\r\n              }\r\n\r\n              customPrice = data.amount;\r\n\r\n              if (subscriptionPlan.currencyCode == 'ETH') {\r\n                if (data.amount < 0.01) {\r\n                  throw 'the minimum amount is 0.01 ETH';\r\n                }\r\n              } else {\r\n                if (customPrice < 1) {\r\n                  throw (\r\n                    'the minimum amount is ' +\r\n                    subscriptionPlan.currencyCode +\r\n                    ' 1.00 '\r\n                  );\r\n                }\r\n\r\n                return ambrpay\r\n                  .getExchangePrice(\r\n                    subscriptionPlan.currencyCode,\r\n                    'ETH',\r\n                    customPrice\r\n                  )\r\n                  .then(price => {\r\n                    return price;\r\n                  });\r\n              }\r\n\r\n              return data.amount;\r\n            }\r\n          }\r\n        })\r\n        .then(amount => {\r\n          subscriptionAmount = amount;\r\n\r\n          subscriptionFeeAmount = (amount / 100) * subscriptionPlan.fee;\r\n          subscriptionFeeAmount =\r\n            (subscriptionFeeAmount * 1000000000000000000) / 1000000000000000000;\r\n\r\n          if (_web3.utils.isAddress(subscriptionPlan.wallet)) {\r\n            var subscriptionTotalAmount = parseFloat(subscriptionAmount);\r\n          } else {\r\n            var subscriptionTotalAmount =\r\n              parseFloat(subscriptionAmount) +\r\n              parseFloat(subscriptionFeeAmount);\r\n          }\r\n\r\n          var subscriptionPriceLimit =\r\n            subscriptionTotalAmount *\r\n            (1 + subscriptionPlan.priceLimitPercentage / 100);\r\n\r\n          return new Promise(function (resolve, reject) {\r\n            var instance = new _web3.eth.Contract(\r\n              ambrpay.ABI.abi,\r\n              ambrpay.contractAddress\r\n            );\r\n            return instance.methods\r\n              .createSubscriptionWithTransfer(\r\n                receiverWallet,\r\n                subscriptionPlan.daysInterval,\r\n                _web3.utils.toWei(subscriptionPriceLimit.toString(), 'ether'),\r\n                transferOut,\r\n                _web3.utils.toWei(subscriptionFeeAmount.toString(), 'ether')\r\n              )\r\n              .send({\r\n                value: _web3.utils.toWei(\r\n                  subscriptionTotalAmount.toString(),\r\n                  'ether'\r\n                ),\r\n                gas: 500000,\r\n                from: senderWallet\r\n              })\r\n              .then(res => {\r\n                return resolve(res);\r\n              })\r\n              .catch(e => {\r\n                return reject(e);\r\n              });\r\n          });\r\n        })\r\n        .then(txHash => {\r\n          var customer = {\r\n            subscriptionPlanId: subscriptionPlan.id,\r\n            senderWallet: senderWallet,\r\n            receiverWallet: receiverWallet,\r\n            customerId: data.customerId,\r\n            customerEmail: data.customerEmail,\r\n            customerDescription: data.customerDescription,\r\n            transactionHash: txHash.transactionHash,\r\n            subscriptionCurrency: 'ETH',\r\n            subscriptionPrice: subscriptionAmount,\r\n            customPrice: customPrice,\r\n            interval: data.interval,\r\n            transferOut: transferOut,\r\n            smartContractAddress: ambrpay.contractAddress\r\n          };\r\n          return ambrpay.createSubscription(customer).then(() => {\r\n            return txHash.transactionHash;\r\n          });\r\n        });\r\n    },\r\n    createSubscription: function (data) {\r\n      var url = apiEndpoint + '/subscription';\r\n\r\n      return ambrpay.postRequest(url, data).then(function (o) {\r\n        return JSON.parse(o);\r\n      });\r\n    },\r\n    getExchangePrice: function (from, to, amount) {\r\n      var url = apiEndpoint + '/price/' + from + '/' + to + '/' + amount;\r\n\r\n      return ambrpay.getRequest(url);\r\n    },\r\n    getRequest: function (url) {\r\n      if (!ambrpay.apiKey) {\r\n        throw 'ambrpay api key not set';\r\n      }\r\n\r\n      return new Promise(function (resolve, reject) {\r\n        var http = new XMLHttpRequest();\r\n\r\n        http.open('GET', url, true);\r\n        http.setRequestHeader('Authorization', 'Bearer ' + ambrpay.apiKey);\r\n\r\n        http.onreadystatechange = function () {\r\n          if (http.readyState == 4 && http.status == 200) {\r\n            return resolve(http.responseText);\r\n          } else if (http.readyState == 4 && http.status != 200) {\r\n            reject(http.responseText);\r\n          }\r\n        };\r\n\r\n        http.send();\r\n      });\r\n    },\r\n    postRequest: function (url, params) {\r\n      if (!ambrpay.apiKey) {\r\n        throw 'ambrpay api key not set';\r\n      }\r\n\r\n      return new Promise(function (resolve, reject) {\r\n        var http = new XMLHttpRequest();\r\n\r\n        http.open('POST', url, true);\r\n        http.setRequestHeader('Authorization', 'Bearer ' + ambrpay.apiKey);\r\n\r\n        http.onreadystatechange = function () {\r\n          if (http.readyState == 4 && http.status == 200) {\r\n            resolve(http.responseText);\r\n          } else if (http.readyState == 4 && http.status != 200) {\r\n            reject(http.responseText);\r\n          }\r\n        };\r\n        http.send(JSON.stringify(params));\r\n      });\r\n    },\r\n    metaMaskLoaded: function () {\r\n      return new Promise(function (resolve, reject) {\r\n        if (_web3 == 'undefined') {\r\n          reject(\r\n            'MetaMask is missing. Please download the MetaMask browser extension.'\r\n          );\r\n        }\r\n        return resolve(true);\r\n      });\r\n    },\r\n    getMetaMaskAccount: function () {\r\n      return new Promise(function (resolve, reject) {\r\n        return resolve(ethAddress);\r\n      });\r\n    },\r\n    getSubscriptionFunds: function () {\r\n      return ambrpay\r\n        .getContractAddresses()\r\n        .then(() => {\r\n          return ambrpay.getMetaMaskAccount();\r\n        })\r\n        .then(address => {\r\n          if (!address) {\r\n            throw 'Error retrieving your metamask wallet address. Make sure metamask is unlocked';\r\n          }\r\n          return new Promise(function (resolve, reject) {\r\n            var instance = new _web3.eth.Contract(\r\n              ambrpay.ABI.abi,\r\n              ambrpay.contractAddress\r\n            );\r\n            var balance = instance.methods.getBalances(address).call();\r\n\r\n            return resolve(balance);\r\n          });\r\n        });\r\n    },\r\n    getSubscriptions: function (address) {\r\n      return new Promise(function (resolve, reject) {\r\n        if (!address) {\r\n          return ambrpay.getMetaMaskAccount().then(metamaskAddress => {\r\n            var url = apiEndpoint + '/subscriptions/' + metamaskAddress;\r\n\r\n            return ambrpay\r\n              .getRequest(url, ambrpay.apiKey)\r\n              .then(function (subscriptions) {\r\n                ambrpay.subscriptions = JSON.parse(subscriptions);\r\n\r\n                return resolve(ambrpay.subscriptions);\r\n              });\r\n          });\r\n        } else {\r\n          var url = apiEndpoint + '/subscriptions/' + address;\r\n\r\n          return ambrpay\r\n            .getRequest(url, ambrpay.apiKey)\r\n            .then(function (subscriptions) {\r\n              ambrpay.subscriptions = JSON.parse(subscriptions);\r\n\r\n              return resolve(ambrpay.subscriptions);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    getMetaMaskBalance: function () {\r\n      return new Promise(function (resolve, reject) {\r\n        return ambrpay.getMetaMaskAccount().then(address => {\r\n          return _web3.eth.getBalance(address, function (e, o) {\r\n            if (e) return reject(e);\r\n            var value = _web3.utils.fromWei(o, 'ether');\r\n            value = web3.utils.toDecimal(value);\r\n            return resolve(value);\r\n          });\r\n        });\r\n      });\r\n    },\r\n    unsubscribe: function (pos, contractAddress) {\r\n      return new Promise(function (resolve, reject) {\r\n        var instance = new _web3.eth.Contract(ambrpay.ABI.abi, contractAddress);\r\n\r\n        return ambrpay.getMetaMaskAccount().then(address => {\r\n          return instance.methods\r\n            .deactivateSubscription(pos)\r\n            .send({ gas: 500000, from: address })\r\n            .then(res => {\r\n              resolve(res);\r\n            })\r\n            .catch(err => {\r\n              reject(err);\r\n            });\r\n        });\r\n      });\r\n    },\r\n    addFunds: function (amount) {\r\n      return new Promise(function (resolve, reject) {\r\n        return ambrpay.getMetaMaskAccount().then(address => {\r\n          var instance = new _web3.eth.Contract(\r\n            ambrpay.ABI.abi,\r\n            ambrpay.contractAddress\r\n          );\r\n\r\n          return instance.methods\r\n            .addFunds(address)\r\n            .send({\r\n              value: _web3.utils.toWei(amount),\r\n              gas: 500000,\r\n              from: address\r\n            })\r\n            .then(res => {\r\n              return resolve(res);\r\n            })\r\n            .catch(err => {\r\n              return reject(err);\r\n            });\r\n        });\r\n      });\r\n    },\r\n    withdrawFunds: function (amount) {\r\n      return new Promise(function (resolve, reject) {\r\n        return ambrpay.getMetaMaskAccount().then(address => {\r\n          var instance = new _web3.eth.Contract(\r\n            ambrpay.ABI.abi,\r\n            ambrpay.contractAddress\r\n          );\r\n\r\n          return instance.methods\r\n            .withdrawFunds(_web3.utils.toWei(amount))\r\n            .send({ gas: 500000, from: address })\r\n            .then(res => {\r\n              return resolve(res);\r\n            })\r\n            .catch(err => {\r\n              return reject(err);\r\n            });\r\n        });\r\n      });\r\n    },\r\n    isInt: function isInt(n) {\r\n      return Number(n) === n && n % 1 === 0;\r\n    },\r\n    isFloat: function isFloat(n) {\r\n      return Number(n) === n && n % 1 !== 0;\r\n    }\r\n  };\r\n\r\n  ambrpay.setApiKey(account.publicApiKey);\r\n\r\n  return ambrpay;\r\n}\r\n","<template>\r\n  <div class=\"ambrpay-container\">\r\n    <back-button :title=\"$t('common.exit-dapp')\" />\r\n    <b-container class=\"pl-5 pr-5\">\r\n      <div class=\"ambrpay-header mt-5\">\r\n        <div class=\"title-container\">\r\n          <h3 class=\"page-title\">{{ $t('dappsAmbrpay.title') }}</h3>\r\n          <popover\r\n            :popcontent=\"$t('dappsAmbrpay.ambrpay-popover')\"\r\n            class=\"dapp-popover\"\r\n          ></popover>\r\n        </div>\r\n        <div class=\"btns-container\">\r\n          <b-button\r\n            class=\"withdraw-btn\"\r\n            @click=\"openManageFundsModal('dappsAmbrpay.withdraw')\"\r\n            >{{ $t('dappsAmbrpay.withdraw-funds') }}</b-button\r\n          >\r\n          <b-button\r\n            class=\"add-btn\"\r\n            @click=\"openManageFundsModal('dappsAmbrpay.add')\"\r\n          >\r\n            {{ $t('dappsAmbrpay.add-funds') }}\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"funds-container\">\r\n        <span class=\"fund-text\">{{ $t('dappsAmbrpay.balance') }}</span>\r\n        <div class=\"balance-container\">\r\n          <i v-show=\"loadingBalance\" class=\"fa fa-spinner fa-spin\" />\r\n          <span v-show=\"!loadingBalance\" class=\"fund-text\"\r\n            >{{ availableBalanceEth }} {{ $t('common.currency.eth') }}\r\n          </span>\r\n          <span v-show=\"!loadingBalance\" class=\"usd-text\"\r\n            >{{ availableBalanceUSD }} {{ $t('common.currency.usd') }}</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <subscription-form\r\n        :subscriptions=\"subscriptions\"\r\n        @startSubscription=\"startSubscription\"\r\n        @openManageSubModal=\"openManageSubModal\"\r\n      ></subscription-form>\r\n    </b-container>\r\n    <manage-funds-modal\r\n      ref=\"manageFunds\"\r\n      :manage-funds-text=\"manageFundsText\"\r\n      :available-balance-eth=\"availableBalanceEth\"\r\n      :available-balance-usd=\"availableBalanceUSD\"\r\n      @addFunds=\"addFunds\"\r\n      @withdrawFunds=\"withdrawFunds\"\r\n    />\r\n    <manage-subscriptions-modal\r\n      ref=\"manageSubs\"\r\n      :subscriptions=\"subscriptions\"\r\n      @unsubscribeSub=\"unsubscribeSub\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SubscriptionForm from './containers/SubscriptionForm';\r\nimport ManageFundsModal from './components/ManageFundsModal';\r\nimport ManageSubscriptionsModal from './components/ManageSubscriptionsModal';\r\nimport Ambrpay from './AmbrpayModified';\r\nimport BackButton from '@/layouts/InterfaceLayout/components/BackButton';\r\nimport { mapState } from 'vuex';\r\nimport BigNumber from 'bignumber.js';\r\nimport { Toast } from '@/helpers';\r\n\r\nexport default {\r\n  components: {\r\n    'subscription-form': SubscriptionForm,\r\n    'back-button': BackButton,\r\n    'manage-funds-modal': ManageFundsModal,\r\n    'manage-subscriptions-modal': ManageSubscriptionsModal\r\n  },\r\n  data() {\r\n    return {\r\n      availableBalanceEth: '',\r\n      availableBalanceUSD: '',\r\n      manageFundsText: '',\r\n      ethPrice: 0,\r\n      loadingBalance: true,\r\n      ambrpay: '',\r\n      subscriptions: []\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('main', [\r\n      'web3',\r\n      'network',\r\n      'notifications',\r\n      'online',\r\n      'account'\r\n    ])\r\n  },\r\n  mounted() {\r\n    this.init();\r\n    this.getSubscriptions();\r\n    this.$refs.manageSubs.$refs.manageSubscriptionsModal.$on('show', () => {\r\n      this.getSubscriptions();\r\n    });\r\n    if (this.online) this.getEthPrice();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const account = {\r\n        publicApiKey: 'api_public_DXfGdjBB4eIVgbURCCCAIQ2S',\r\n        address: this.account.address,\r\n        netId: this.network.type.chainID.toString()\r\n      };\r\n      this.ambrpay = new Ambrpay(account, this.web3);\r\n      this.getSubscriptionFunds();\r\n    },\r\n    getSubscriptionFunds() {\r\n      this.ambrpay\r\n        .getSubscriptionFunds()\r\n        .then(res => {\r\n          this.availableBalanceEth = new BigNumber(\r\n            this.web3.utils.fromWei(res, 'ether')\r\n          ).toFixed();\r\n          this.convertToUSD();\r\n          this.loadingBalance = false;\r\n        })\r\n        .catch(err => {\r\n          this.loadingBalance = false;\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    },\r\n    convertToUSD() {\r\n      this.availableBalanceUSD = '--';\r\n\r\n      if (this.availableBalanceEth) {\r\n        this.availableBalanceUSD = new BigNumber(\r\n          new BigNumber(this.availableBalanceEth).times(\r\n            new BigNumber(this.ethPrice)\r\n          )\r\n        ).toFixed(2);\r\n      }\r\n    },\r\n    openManageFundsModal(str) {\r\n      this.manageFundsText = this.$t(str);\r\n      this.$refs.manageFunds.$refs.manageFundsModal.show();\r\n    },\r\n    openManageSubModal() {\r\n      this.$refs.manageSubs.$refs.manageSubscriptionsModal.show();\r\n    },\r\n    async getEthPrice() {\r\n      const price = await fetch(\r\n        'https://cryptorates.mewapi.io/ticker?filter=ETH'\r\n      )\r\n        .then(res => {\r\n          return res.json();\r\n        })\r\n        .catch(e => {\r\n          Toast.responseHandler(e, Toast.ERROR);\r\n        });\r\n      this.ethPrice =\r\n        typeof price === 'object' ? price.data.ETH.quotes.USD.price : 0;\r\n    },\r\n    startSubscription(params) {\r\n      this.ambrpay\r\n        .subscribe(params)\r\n        .then(this.getSubscriptions)\r\n        .catch(err => {\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    },\r\n    addFunds(amt) {\r\n      this.ambrpay\r\n        .addFunds(amt)\r\n        .then(this.getSubscriptionFunds)\r\n        .catch(err => {\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    },\r\n    withdrawFunds(amt) {\r\n      this.ambrpay\r\n        .withdrawFunds(amt)\r\n        .then(this.getSubscriptionFunds)\r\n        .catch(err => {\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    },\r\n    unsubscribeSub(data) {\r\n      this.ambrpay\r\n        .unsubscribe(data.pos, data.addr)\r\n        .then(this.getSubscriptions)\r\n        .catch(err => {\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    },\r\n    getSubscriptions() {\r\n      this.ambrpay\r\n        .getSubscriptions()\r\n        .then(res => {\r\n          this.subscriptions = res.map(subscription => ({\r\n            ...subscription,\r\n            moreInfo: false\r\n          }));\r\n        })\r\n        .catch(err => {\r\n          Toast.responseHandler(err, Toast.ERROR);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import 'Ambrpay.scss';\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ambrpay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ambrpay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ambrpay.vue?vue&type=template&id=1753384a&scoped=true&\"\nimport script from \"./Ambrpay.vue?vue&type=script&lang=js&\"\nexport * from \"./Ambrpay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ambrpay.vue?vue&type=style&index=0&id=1753384a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1753384a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=style&index=1&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ambrpay.vue?vue&type=style&index=0&id=1753384a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ambrpay.vue?vue&type=style&index=0&id=1753384a&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionForm.vue?vue&type=style&index=0&id=410f81ef&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SubscriptionForm.vue?vue&type=style&index=0&id=410f81ef&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=style&index=0&id=11b54449&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageFundsModal.vue?vue&type=style&index=0&id=11b54449&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageSubscriptionsModal.vue?vue&type=style&index=0&id=36088eac&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageSubscriptionsModal.vue?vue&type=style&index=0&id=36088eac&lang=scss&scoped=true&\""],"sourceRoot":""}