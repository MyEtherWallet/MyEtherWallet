{"version":3,"sources":["webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?6f36","webpack:///src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?06da","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue","webpack:///./src/layouts/InterfaceLayout/expiryAbi.js","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?aca8"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","names","length","loading","_l","name","key","network","type","ens","registrarTLD","expiration","directives","rawName","value","indexOf","expression","class","nameTextAndClassValue","on","$event","methodCall","text","address","account","staticRenderFns","props","renewName","Function","default","checkDomain","data","computed","mounted","res","json","nameFetch","then","setExpiry","methods","isSubdomain","obj","gracePeriod","expired","item","id","expiry","response","forEach","setDate","getDate","idx","isExpired","isInGracePeriod","expireDateValue","expiryDateFormat","a","b","nameObj","nameString","showBlockie","shouldHide","exclusion","includes","isAddress","component","expiryAbi","inputs","payable","stateMutability","constant","internalType","outputs"],"mappings":"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","file":"js/chunk-a9a35f3a.14cdba74.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"multi-manager-container\"},[_c('div',{staticClass:\"title-container\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('ens.ens-manager.title')))]),_c('p',[_vm._v(_vm._s(_vm.$t('ens.ens-manager.description')))])]),(_vm.loading)?_c('div',[_c('i',{attrs:{\"clas\":\"fa fa-spinner fa-spin\"}}),_vm._v(\" \"+_vm._s(_vm.$t('ens.fetching'))+\" \")]):(_vm.names.length === 0 && !_vm.loading)?_c('div',{staticClass:\"no-ens-container\"},[_vm._v(\" \"+_vm._s(_vm.$t('ens.no-names-found', { address: _vm.account.address }))+\" \")]):_c('div',{staticClass:\"name-container\"},_vm._l((_vm.names),function(name){return _c('div',{key:name['name'],staticClass:\"information-container\"},[_c('p',{staticClass:\"name-container\"},[_vm._v(\" \"+_vm._s(name.name)+\".\"+_vm._s(_vm.network.type.ens.registrarTLD)+\" \")]),_c('p',[_vm._v(_vm._s(name.expiration))]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(name.name.indexOf('0x') !== 0),expression:\"name.name.indexOf('0x') !== 0\"}],class:['action-button', _vm.nameTextAndClassValue(name).class],on:{\"click\":function($event){return _vm.methodCall(((name.name) + \".\" + (_vm.network.type.ens.registrarTLD)), name)}}},[_vm._v(\" \"+_vm._s(_vm.nameTextAndClassValue(name).text)+\" \")])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"multi-manager-container\">\r\n    <div class=\"title-container\">\r\n      <h3>{{ $t('ens.ens-manager.title') }}</h3>\r\n      <p>{{ $t('ens.ens-manager.description') }}</p>\r\n    </div>\r\n    <div v-if=\"loading\">\r\n      <i clas=\"fa fa-spinner fa-spin\" /> {{ $t('ens.fetching') }}\r\n    </div>\r\n    <div v-else-if=\"names.length === 0 && !loading\" class=\"no-ens-container\">\r\n      {{ $t('ens.no-names-found', { address: account.address }) }}\r\n    </div>\r\n    <div v-else class=\"name-container\">\r\n      <div\r\n        v-for=\"name in names\"\r\n        :key=\"name['name']\"\r\n        class=\"information-container\"\r\n      >\r\n        <p class=\"name-container\">\r\n          {{ name.name }}.{{ network.type.ens.registrarTLD }}\r\n        </p>\r\n        <p>{{ name.expiration }}</p>\r\n        <button\r\n          v-show=\"name.name.indexOf('0x') !== 0\"\r\n          :class=\"['action-button', nameTextAndClassValue(name).class]\"\r\n          @click=\"\r\n            methodCall(`${name.name}.${network.type.ens.registrarTLD}`, name)\r\n          \"\r\n        >\r\n          {{ nameTextAndClassValue(name).text }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isAddress } from '@/helpers/addressUtils';\r\nimport { mapState } from 'vuex';\r\nimport { Toast } from '@/helpers';\r\nimport ExpiryAbi from '@/layouts/InterfaceLayout/expiryAbi.js';\r\n\r\nconst ENS_CURRENT_ADDRESS = '0x57f1887a8bf19b14fc0df6fd9b2acc9af147ea85';\r\nconst EXPIRY_ADDRESS = '0x78e21d038fcbb6d56f825dc1e8d8acd965744adb';\r\n\r\nexport default {\r\n  props: {\r\n    renewName: {\r\n      type: Function,\r\n      default: () => {}\r\n    },\r\n    checkDomain: {\r\n      type: Function,\r\n      default: () => {}\r\n    }\r\n  },\r\n  data: () => {\r\n    return {\r\n      names: [],\r\n      loading: true\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState('main', ['account', 'network', 'web3'])\r\n  },\r\n  mounted() {\r\n    this.loading = true;\r\n    const nameFetch = fetch(\r\n      `https://nft2.mewapi.io/tokens?owner=${this.account.address}&chain=mainnet`\r\n    ).then(res => {\r\n      return res.json();\r\n    });\r\n\r\n    nameFetch.then(this.setExpiry);\r\n  },\r\n  methods: {\r\n    nameTextAndClassValue(obj) {\r\n      const isSubdomain = obj.name.split('.').length > 1;\r\n      if (!isSubdomain) {\r\n        if (obj.gracePeriod && !obj.expired) {\r\n          return {\r\n            text: this.$t('ens.renew'),\r\n            class: 'renew-class'\r\n          };\r\n        } else if (obj.expired && !obj.gracePeriod) {\r\n          return {\r\n            text: this.$t('ens.register'),\r\n            class: 'expired-class'\r\n          };\r\n        }\r\n      }\r\n      return {\r\n        text: this.$t('ens.manage'),\r\n        class: ''\r\n      };\r\n    },\r\n    setExpiry(param) {\r\n      const names = param.hasOwnProperty(ENS_CURRENT_ADDRESS)\r\n        ? param[ENS_CURRENT_ADDRESS].tokens\r\n        : [];\r\n      if (names.length > 0) {\r\n        const hashes = names.map(item => {\r\n          return item.id;\r\n        });\r\n        const contract = new this.web3.eth.Contract(ExpiryAbi, EXPIRY_ADDRESS);\r\n        const expiry = contract.methods\r\n          .getExpirationDates(ENS_CURRENT_ADDRESS, hashes)\r\n          .call()\r\n          .then(response => {\r\n            return response;\r\n          })\r\n          .catch(() => {\r\n            Toast.responseHandler(\r\n              this.$t('ens.error.something-went-wrong'),\r\n              Toast.ERROR\r\n            );\r\n          });\r\n        expiry.then(response => {\r\n          if (!response) return;\r\n          response.forEach((item, idx) => {\r\n            const expiryDate = item * 1000;\r\n            const gracePeriod = new Date(expiryDate);\r\n            gracePeriod.setDate(gracePeriod.getDate() + 90);\r\n            const isInGracePeriod = gracePeriod > new Date().getTime();\r\n            const isExpired = gracePeriod.getTime() < new Date().getTime();\r\n            const expiryDateFormat = new Date(expiryDate);\r\n            names[idx].gracePeriod = isExpired ? isInGracePeriod : isExpired;\r\n            names[idx].expired = isExpired;\r\n            names[idx].expireDateValue = expiryDateFormat;\r\n            names[\r\n              idx\r\n            ].expiration = `${expiryDateFormat.toLocaleDateString()} ${expiryDateFormat.toLocaleTimeString()}`;\r\n          });\r\n          const sortedNames = names.slice().sort((a, b) => {\r\n            return a.expireDateValue - b.expireDateValue;\r\n          });\r\n\r\n          this.names = sortedNames;\r\n          this.loading = false;\r\n        });\r\n      } else {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    methodCall(nameString, nameObj) {\r\n      if (nameObj.gracePeriod && !nameObj.expired) {\r\n        this.checkDomain(nameString, true);\r\n      } else {\r\n        this.checkDomain(nameString, false);\r\n      }\r\n    },\r\n    showBlockie(name) {\r\n      return !(\r\n        name !== 'controller' &&\r\n        name !== 'registrant' &&\r\n        name !== 'resolver'\r\n      );\r\n    },\r\n    shouldHide(key, name) {\r\n      const exclusion = ['name', 'id', 'description', 'image', 'expired'];\r\n      if (exclusion.includes(key)) {\r\n        return false;\r\n      } else if (key === 'controller' && name['expired']) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    isAddress: isAddress\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import 'EnsMultiManager.scss';\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EnsMultiManager.vue?vue&type=template&id=7d3e5338&scoped=true&\"\nimport script from \"./EnsMultiManager.vue?vue&type=script&lang=js&\"\nexport * from \"./EnsMultiManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnsMultiManager.vue?vue&type=style&index=0&id=7d3e5338&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d3e5338\",\n  null\n  \n)\n\nexport default component.exports","const expiryAbi = [\r\n  {\r\n    inputs: [],\r\n    payable: false,\r\n    stateMutability: 'nonpayable',\r\n    type: 'constructor'\r\n  },\r\n  {\r\n    constant: true,\r\n    inputs: [\r\n      {\r\n        internalType: 'address',\r\n        name: 'ensAdd',\r\n        type: 'address'\r\n      },\r\n      {\r\n        internalType: 'uint256[]',\r\n        name: 'labelHases',\r\n        type: 'uint256[]'\r\n      }\r\n    ],\r\n    name: 'getExpirationDates',\r\n    outputs: [\r\n      {\r\n        internalType: 'uint256[]',\r\n        name: '',\r\n        type: 'uint256[]'\r\n      }\r\n    ],\r\n    payable: false,\r\n    stateMutability: 'view',\r\n    type: 'function'\r\n  }\r\n];\r\n\r\nexport default expiryAbi;\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=style&index=0&id=7d3e5338&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=style&index=0&id=7d3e5338&lang=scss&scoped=true&\""],"sourceRoot":""}