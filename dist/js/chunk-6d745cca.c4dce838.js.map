{"version":3,"sources":["webpack:///src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?a1b7","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?d6b1","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/index.js","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?2e3a"],"names":["__webpack_require__","__webpack_exports__","components","interface-bottom-text","_components_InterfaceBottomText__WEBPACK_IMPORTED_MODULE_3__","interface-container-title","_components_InterfaceContainerTitle__WEBPACK_IMPORTED_MODULE_4__","data","message","error","show","msg","showMessage","computed","Object","_home_xinfin_github_xinFinOrg_Wallet_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","vuex__WEBPACK_IMPORTED_MODULE_6__","web3","watch","newVal","this","methods","copyToClipboard","$refs","signature","select","document","execCommand","window","getSelection","removeAllRanges","deleteInput","value","verifyMessage","json","JSON","parse","hash","_helpers__WEBPACK_IMPORTED_MODULE_5__","hashPersonalMessage","toBuffer","sig","Buffer","from","getNakedAddress","length","version","signer","getTrezorHash","utils","sha3","pubKey","ecrecover","slice","address","pubToAddress","toString","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","$t","_v","on","click","_s","directives","name","rawName","expression","ref","domProps","input","$event","target","composing","_e","errors","has","first","class","link-text","question","link","staticRenderFns","VerifyMessageContainer_VerifyMessageContainervue_type_script_lang_js_","VerifyMessageContainervue_type_script_lang_js_","component","componentNormalizer","VerifyMessageContainer","d","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_VerifyMessageContainer_vue_vue_type_style_index_0_id_6fa3c936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_VerifyMessageContainer_vue_vue_type_style_index_0_id_6fa3c936_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6d745cca.c4dce838.js","sourcesContent":["<template>\n  <div class=\"verify-message-container\">\n    <interface-container-title :title=\"$t('common.verifyMessage')\" />\n\n    <div class=\"content-container\">\n      <div class=\"send-form\">\n        <div class=\"title-container\">\n          <div class=\"title\">\n            <h4>Signature:</h4>\n            <div class=\"copy-buttons\">\n              <span @click=\"deleteInput\">{{ $t('common.clear') }}</span>\n              <span @click=\"copyToClipboard\">{{ $t('common.copy') }}</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"the-form signature\">\n          <textarea\n            v-validate=\"'required'\"\n            ref=\"signature\"\n            v-model=\"message\"\n            name=\"verify\"\n            class=\"custom-textarea-1\"\n          />\n        </div>\n        <div>\n          <p v-if=\"message !== '' && showMessage === true\">\n            {{ JSON.parse(message).address }}\n            {{ $t('interface.verifiedMessage') }}:<br\n              v-if=\"JSON.parse(message).msg.length > 20\"\n            />\n            <b>{{ JSON.parse(message).msg }}</b>\n          </p>\n          <p v-if=\"message !== '' && error.show === true\">{{ error.show }}</p>\n          <p v-if=\"errors.has('verify')\">{{ errors.first('verify') }}</p>\n        </div>\n      </div>\n\n      <div class=\"submit-button-container\">\n        <div class=\"buttons\">\n          <button\n            :class=\"[\n              errors.has('verify') || error.show === true || message === ''\n                ? 'disabled'\n                : '',\n              'submit-button large-round-button-green-filled clickable'\n            ]\"\n            @click=\"verifyMessage\"\n          >\n            {{ $t('common.verifyMessage') }}\n          </button>\n        </div>\n        <interface-bottom-text\n          :link-text=\"$t('interface.helpCenter')\"\n          :question=\"$t('interface.haveIssues')\"\n          link=\"https://xinfin.network\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport InterfaceBottomText from '@/components/InterfaceBottomText';\nimport InterfaceContainerTitle from '../../components/InterfaceContainerTitle';\nimport { MessageUtil } from '@/helpers';\nimport { mapGetters } from 'vuex';\n// eslint-disable-next-line\nconst createKeccakHash = require('keccak');\n\nexport default {\n  components: {\n    'interface-bottom-text': InterfaceBottomText,\n    'interface-container-title': InterfaceContainerTitle\n  },\n  data() {\n    return {\n      message: '',\n      error: {\n        show: false,\n        msg: ''\n      },\n      showMessage: false\n    };\n  },\n  computed: {\n    ...mapGetters({\n      web3: 'web3'\n    })\n  },\n  watch: {\n    message(newVal) {\n      this.message = newVal;\n      this.error = {\n        show: false,\n        msg: ''\n      };\n    }\n  },\n  methods: {\n    copyToClipboard() {\n      this.$refs.signature.select();\n      document.execCommand('copy');\n      window.getSelection().removeAllRanges();\n    },\n    deleteInput() {\n      this.$refs.signature.value = '';\n    },\n    verifyMessage() {\n      const json = JSON.parse(this.message);\n      let hash = MessageUtil.hashPersonalMessage(\n        MessageUtil.toBuffer(json.msg)\n      );\n      const sig = Buffer.from(MessageUtil.getNakedAddress(json.sig), 'hex');\n      if (sig.length !== 65) {\n        this.error.show = true;\n        this.error.msg = 'Something went terribly WRONG!!!!'; // Should be replaced with actual error message\n        return;\n      }\n\n      sig[64] = sig[64] === 0 || sig[64] === 1 ? sig[64] + 27 : sig[64];\n      if (json.version === '3') {\n        if (json.signer === 'trezor') {\n          hash = MessageUtil.getTrezorHash(json.msg);\n        } else if (json.signer === 'ledger') {\n          hash = MessageUtil.hashPersonalMessage(Buffer.from(json.msg));\n        }\n      } else if (json.version === '1') {\n        hash = this.web3.utils.sha3(json.msg);\n      }\n\n      const pubKey = MessageUtil.ecrecover(\n        hash,\n        sig[64],\n        sig.slice(0, 32),\n        sig.slice(32, 64)\n      );\n      if (\n        MessageUtil.getNakedAddress(json.address) !==\n        MessageUtil.pubToAddress(pubKey).toString('hex')\n      ) {\n        this.error.show = true;\n        this.error.msg = 'Something went terribly WRONG!!!!'; // Should be replaced with actual error message\n      } else {\n        this.showMessage = true;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'VerifyMessageContainer.scss';\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"verify-message-container\"},[_c('interface-container-title',{attrs:{\"title\":_vm.$t('common.verifyMessage')}}),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"send-form\"},[_c('div',{staticClass:\"title-container\"},[_c('div',{staticClass:\"title\"},[_c('h4',[_vm._v(\"Signature:\")]),_c('div',{staticClass:\"copy-buttons\"},[_c('span',{on:{\"click\":_vm.deleteInput}},[_vm._v(_vm._s(_vm.$t('common.clear')))]),_c('span',{on:{\"click\":_vm.copyToClipboard}},[_vm._v(_vm._s(_vm.$t('common.copy')))])])])]),_c('div',{staticClass:\"the-form signature\"},[_c('textarea',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],ref:\"signature\",staticClass:\"custom-textarea-1\",attrs:{\"name\":\"verify\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}})]),_c('div',[(_vm.message !== '' && _vm.showMessage === true)?_c('p',[_vm._v(\"\\n          \"+_vm._s(JSON.parse(_vm.message).address)+\"\\n          \"+_vm._s(_vm.$t('interface.verifiedMessage'))+\":\"),(JSON.parse(_vm.message).msg.length > 20)?_c('br'):_vm._e(),_c('b',[_vm._v(_vm._s(JSON.parse(_vm.message).msg))])]):_vm._e(),(_vm.message !== '' && _vm.error.show === true)?_c('p',[_vm._v(_vm._s(_vm.error.show))]):_vm._e(),(_vm.errors.has('verify'))?_c('p',[_vm._v(_vm._s(_vm.errors.first('verify')))]):_vm._e()])]),_c('div',{staticClass:\"submit-button-container\"},[_c('div',{staticClass:\"buttons\"},[_c('button',{class:[\n            _vm.errors.has('verify') || _vm.error.show === true || _vm.message === ''\n              ? 'disabled'\n              : '',\n            'submit-button large-round-button-green-filled clickable'\n          ],on:{\"click\":_vm.verifyMessage}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('common.verifyMessage'))+\"\\n        \")])]),_c('interface-bottom-text',{attrs:{\"link-text\":_vm.$t('interface.helpCenter'),\"question\":_vm.$t('interface.haveIssues'),\"link\":\"https://xinfin.network\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VerifyMessageContainer.vue?vue&type=template&id=6fa3c936&scoped=true&\"\nimport script from \"./VerifyMessageContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./VerifyMessageContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fa3c936\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './VerifyMessageContainer';\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\""],"sourceRoot":""}