(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c457d6d"],{"0ede":function(t,e,n){"use strict";var a=n("1c5c"),i=n.n(a);i.a},"1c5c":function(t,e,n){},"4cb9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lend-migrator-container"},[n("back-button"),n("b-container",{staticClass:"text-center"},[n("div",{staticClass:"pt-4 lend-title"},[t._v(t._s(t.$t("dappsAave.lend-title")))]),n("div",{staticClass:"d-flex mt-4 mb-1 total-container entire-bal"},[n("p",[t._v(" "+t._s(t.$t("dappsAave.total-lend"))+": "),n("span",{staticClass:"balance"},[t.loading?t._e():n("span",[t._v(t._s(t.balance)+" ")]),t.loading?n("i",{staticClass:"fa fa-spin fa-spinner fa-lg"}):t._e()])]),n("button",{staticClass:"button-link",on:{click:t.setEntireBalance}},[t._v(" "+t._s(t.$t("sendTx.button-entire"))+" ")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"text",placeholder:t.$t("dappsAave.total-amount")},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("button",{class:["large-round-button-green-filled","mt-3",t.disabled?"disabled":""],on:{click:t.checkAllowance}},[t._v(" "+t._s(t.$t("dappsAave.migrate"))+" ")])])],1)},i=[],s=(n("b680"),n("96cf"),n("1da1")),o=n("5530"),u=n("572c"),r=[{inputs:[{internalType:"contract IERC20",name:"aave",type:"address"},{internalType:"contract IERC20",name:"lend",type:"address"},{internalType:"uint256",name:"lendAaveRatio",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"uint256",name:"amount",type:"uint256"}],name:"LendMigrated",type:"event"},{inputs:[],name:"AAVE",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LEND",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LEND_AAVE_RATIO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"REVISION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_totalLendMigrated",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"migrateFromLEND",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],c=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}],p=c,l=n("901e"),d=n.n(l),m=n("2f62"),y=n("ce96"),b="0x317625234562B1526Ea2FaC4030Ea499C5291de4",f="0x80fB784B7eD66730e8b1DBd9820aFD29931aab03",v={components:{"back-button":u["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}}},data:function(){return{amount:0,hasEnoughRatio:!1,lendMigratorContract:"",amountAsHex:"",loading:!1,lendContract:"",balance:""}},computed:Object(o["a"])(Object(o["a"])({},Object(m["c"])("main",["web3","account"])),{},{disabled:function(){return!(this.amount>0&&this.amount<=this.balance&&this.hasEnoughRatio)}}),mounted:function(){this.getLendBalance(),this.getRatio()},methods:{getLendBalance:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lendContract=new t.web3.eth.Contract(p,f),e.next=3,t.lendContract.methods.balanceOf(t.account.address).call();case 3:n=e.sent,t.balance=t.web3.utils.fromWei(n,"ether");case 5:case"end":return e.stop()}}),e)})))()},checkAllowance:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new d.a(t.amount).times(new d.a(10).pow(18)).toFixed(),t.amountAsHex=t.web3.utils.numberToHex(n),e.next=4,t.lendContract.methods.allowance(t.account.address,b).call();case 4:if(a=e.sent,t.loading=!0,"0"===a||!new d.a(a).lt(new d.a(t.amountAsHex))){e.next=13;break}return e.next=9,t.lendContract.methods.approve(b,0).encodeABI();case 9:i=e.sent,t.web3.eth.sendTransaction({from:t.account.address,to:f,value:0,gas:1e5,data:i}).then((function(){t.migrate()})).catch((function(e){t.loading=!1,y["e"].responseHandler(e,y["e"].ERROR)})),e.next=14;break;case 13:t.migrate();case 14:case"end":return e.stop()}}),e)})))()},migrate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.lendContract.methods.approve(b,t.amountAsHex).encodeABI();case 2:return n=e.sent,e.next=5,t.lendMigratorContract.methods.migrateFromLEND(t.amountAsHex).encodeABI();case 5:a=e.sent,t.loading=!0,t.web3.mew.sendBatchTransactions([{from:t.account.address,to:f,value:0,gas:1e5,data:n},{from:t.account.address,to:b,gas:5e5,value:0,data:a}]).then((function(){t.amount=0,t.loading=!1})).catch((function(e){t.loading=!1,y["e"].responseHandler(e,y["e"].ERROR)}));case 8:case"end":return e.stop()}}),e)})))()},getRatio:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lendMigratorContract=new t.web3.eth.Contract(r,b),e.next=3,t.lendMigratorContract.methods.LEND_AAVE_RATIO().call();case 3:n=e.sent,n>1?t.hasEnoughRatio=!0:y["e"].responseHandler(t.$t("dappAave.invalid-ratio"),y["e"].ERROR);case 5:case"end":return e.stop()}}),e)})))()},setEntireBalance:function(){this.amount=this.balance}}},w=v,h=(n("0ede"),n("2877")),g=Object(h["a"])(w,a,i,!1,null,"8602e514",null);e["default"]=g.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-4c457d6d.49c19fb8.js.map