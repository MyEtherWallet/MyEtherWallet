{"version":3,"sources":["webpack:///src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?c4a6","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?d6b1","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/index.js","webpack:///./src/layouts/InterfaceLayout/containers/VerifyMessageContainer/VerifyMessageContainer.vue?2e3a"],"names":["components","data","message","error","show","msg","showMessage","computed","watch","this","newVal","methods","copyToClipboard","$refs","signature","select","document","execCommand","window","getSelection","removeAllRanges","deleteInput","value","verifyMessage","sig","length","json","version","signer","hash","web3","utils","sha3","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$t","_v","on","_s","directives","name","rawName","expression","ref","domProps","$event","target","composing","JSON","parse","address","_e","errors","has","first","class","staticRenderFns","component"],"mappings":"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","file":"js/chunk-6d745cca.55bc68e9.js","sourcesContent":["<template>\n  <div class=\"verify-message-container\">\n    <interface-container-title :title=\"$t('common.verifyMessage')\" />\n\n    <div class=\"content-container\">\n      <div class=\"send-form\">\n        <div class=\"title-container\">\n          <div class=\"title\">\n            <h4>Signature:</h4>\n            <div class=\"copy-buttons\">\n              <span @click=\"deleteInput\">{{ $t('common.clear') }}</span>\n              <span @click=\"copyToClipboard\">{{ $t('common.copy') }}</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"the-form signature\">\n          <textarea\n            v-validate=\"'required'\"\n            ref=\"signature\"\n            v-model=\"message\"\n            name=\"verify\"\n            class=\"custom-textarea-1\"\n          />\n        </div>\n        <div>\n          <p v-if=\"message !== '' && showMessage === true\">\n            {{ JSON.parse(message).address }}\n            {{ $t('interface.verifiedMessage') }}:<br\n              v-if=\"JSON.parse(message).msg.length > 20\"\n            />\n            <b>{{ JSON.parse(message).msg }}</b>\n          </p>\n          <p v-if=\"message !== '' && error.show === true\">{{ error.show }}</p>\n          <p v-if=\"errors.has('verify')\">{{ errors.first('verify') }}</p>\n        </div>\n      </div>\n\n      <div class=\"submit-button-container\">\n        <div class=\"buttons\">\n          <button\n            :class=\"[\n              errors.has('verify') || error.show === true || message === ''\n                ? 'disabled'\n                : '',\n              'submit-button large-round-button-green-filled clickable'\n            ]\"\n            @click=\"verifyMessage\"\n          >\n            {{ $t('common.verifyMessage') }}\n          </button>\n        </div>\n        <interface-bottom-text\n          :link-text=\"$t('interface.helpCenter')\"\n          :question=\"$t('interface.haveIssues')\"\n          link=\"https://xinfin.network\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport InterfaceBottomText from '@/components/InterfaceBottomText';\nimport InterfaceContainerTitle from '../../components/InterfaceContainerTitle';\nimport { MessageUtil } from '@/helpers';\nimport { mapGetters } from 'vuex';\n// eslint-disable-next-line\nconst createKeccakHash = require('keccak');\n\nexport default {\n  components: {\n    'interface-bottom-text': InterfaceBottomText,\n    'interface-container-title': InterfaceContainerTitle\n  },\n  data() {\n    return {\n      message: '',\n      error: {\n        show: false,\n        msg: ''\n      },\n      showMessage: false\n    };\n  },\n  computed: {\n    ...mapGetters({\n      web3: 'web3'\n    })\n  },\n  watch: {\n    message(newVal) {\n      this.message = newVal;\n      this.error = {\n        show: false,\n        msg: ''\n      };\n    }\n  },\n  methods: {\n    copyToClipboard() {\n      this.$refs.signature.select();\n      document.execCommand('copy');\n      window.getSelection().removeAllRanges();\n    },\n    deleteInput() {\n      this.$refs.signature.value = '';\n    },\n    verifyMessage() {\n      const json = JSON.parse(this.message);\n      let hash = MessageUtil.hashPersonalMessage(\n        MessageUtil.toBuffer(json.msg)\n      );\n      const sig = Buffer.from(MessageUtil.getNakedAddress(json.sig), 'hex');\n      if (sig.length !== 65) {\n        this.error.show = true;\n        this.error.msg = 'Something went terribly WRONG!!!!'; // Should be replaced with actual error message\n        return;\n      }\n\n      sig[64] = sig[64] === 0 || sig[64] === 1 ? sig[64] + 27 : sig[64];\n      if (json.version === '3') {\n        if (json.signer === 'trezor') {\n          hash = MessageUtil.getTrezorHash(json.msg);\n        } else if (json.signer === 'ledger') {\n          hash = MessageUtil.hashPersonalMessage(Buffer.from(json.msg));\n        }\n      } else if (json.version === '1') {\n        hash = this.web3.utils.sha3(json.msg);\n      }\n\n      const pubKey = MessageUtil.ecrecover(\n        hash,\n        sig[64],\n        sig.slice(0, 32),\n        sig.slice(32, 64)\n      );\n      if (\n        MessageUtil.getNakedAddress(json.address) !==\n        MessageUtil.pubToAddress(pubKey).toString('hex')\n      ) {\n        this.error.show = true;\n        this.error.msg = 'Something went terribly WRONG!!!!'; // Should be replaced with actual error message\n      } else {\n        this.showMessage = true;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'VerifyMessageContainer.scss';\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"verify-message-container\"},[_c('interface-container-title',{attrs:{\"title\":_vm.$t('common.verifyMessage')}}),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"send-form\"},[_c('div',{staticClass:\"title-container\"},[_c('div',{staticClass:\"title\"},[_c('h4',[_vm._v(\"Signature:\")]),_c('div',{staticClass:\"copy-buttons\"},[_c('span',{on:{\"click\":_vm.deleteInput}},[_vm._v(_vm._s(_vm.$t('common.clear')))]),_c('span',{on:{\"click\":_vm.copyToClipboard}},[_vm._v(_vm._s(_vm.$t('common.copy')))])])])]),_c('div',{staticClass:\"the-form signature\"},[_c('textarea',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"},{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],ref:\"signature\",staticClass:\"custom-textarea-1\",attrs:{\"name\":\"verify\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}})]),_c('div',[(_vm.message !== '' && _vm.showMessage === true)?_c('p',[_vm._v(\"\\n          \"+_vm._s(JSON.parse(_vm.message).address)+\"\\n          \"+_vm._s(_vm.$t('interface.verifiedMessage'))+\":\"),(JSON.parse(_vm.message).msg.length > 20)?_c('br'):_vm._e(),_c('b',[_vm._v(_vm._s(JSON.parse(_vm.message).msg))])]):_vm._e(),(_vm.message !== '' && _vm.error.show === true)?_c('p',[_vm._v(_vm._s(_vm.error.show))]):_vm._e(),(_vm.errors.has('verify'))?_c('p',[_vm._v(_vm._s(_vm.errors.first('verify')))]):_vm._e()])]),_c('div',{staticClass:\"submit-button-container\"},[_c('div',{staticClass:\"buttons\"},[_c('button',{class:[\n            _vm.errors.has('verify') || _vm.error.show === true || _vm.message === ''\n              ? 'disabled'\n              : '',\n            'submit-button large-round-button-green-filled clickable'\n          ],on:{\"click\":_vm.verifyMessage}},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('common.verifyMessage'))+\"\\n        \")])]),_c('interface-bottom-text',{attrs:{\"link-text\":_vm.$t('interface.helpCenter'),\"question\":_vm.$t('interface.haveIssues'),\"link\":\"https://xinfin.network\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VerifyMessageContainer.vue?vue&type=template&id=6fa3c936&scoped=true&\"\nimport script from \"./VerifyMessageContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./VerifyMessageContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fa3c936\",\n  null\n  \n)\n\nexport default component.exports","export { default } from './VerifyMessageContainer';\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VerifyMessageContainer.vue?vue&type=style&index=0&id=6fa3c936&lang=scss&scoped=true&\""],"sourceRoot":""}