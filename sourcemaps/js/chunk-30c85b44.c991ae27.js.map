{"version":3,"sources":["webpack:///./src/dapps/staked-dapp/components/staked-stepper/staked-steps/StepTwoGenerate.vue?8cc6","webpack:///src/dapps/staked-dapp/components/staked-stepper/staked-steps/StepTwoGenerate.vue","webpack:///./src/dapps/staked-dapp/components/staked-stepper/staked-steps/StepTwoGenerate.vue?3bdc","webpack:///./src/dapps/staked-dapp/components/staked-stepper/staked-steps/StepTwoGenerate.vue","webpack:///./src/assets/images/icons/button-circle-right-arrow.svg"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","on","$event","onContinue","attrs","_s","eth2Address","mnemonic","_e","downloadedKeystore","keystoreName","downloadingKeystore","$vuetify","breakpoint","xs","nativeOn","onDownload","apply","arguments","keystoreFileWarning","smAndDown","onBack","buttonText","onCreatePassword","generateKeystore","onDialogStateChange","staticRenderFns","components","BorderBlock","StakedCreatePasswordDialog","MnemonicPhraseTable","data","ks","keystoreJson","link","computed","mounted","methods","createAddress","address","createMnemonic","newVal","pw","password","toWithdrawalKeystore","Date","verifyKeystore","Toast","downloadKeystore","skipped","onStep","isSkipped","URL","component","module","exports"],"mappings":"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","file":"js/chunk-30c85b44.c991ae27.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"mx-auto mb-3\",staticStyle:{\"max-width\":\"550px\"}},[_c('div',{staticClass:\"mew-heading-2 py-8 text-center\"},[_vm._v(\" Here is your new Eth2 Address \")]),_c('div',{staticClass:\"skip-container d-flex flex-column flex-sm-row rounded align-center justify-space-between greyLight px-5 py-4\"},[_c('div',{staticClass:\"mb-2 mb-sm-0\"},[_vm._v(\"Already have Eth2 address?\")]),_c('div',{staticClass:\"d-flex align-center greenPrimary--text cursor-pointer\",on:{\"click\":function($event){return _vm.onContinue(true)}}},[_vm._v(\" Skip this step \"),_c('img',{staticClass:\"ml-2\",attrs:{\"height\":\"17\",\"src\":require(\"@/assets/images/icons/button-circle-right-arrow.svg\"),\"alt\":\"right arrow\"}})])]),_c('border-block',{staticClass:\"mt-4 pa-3 pa-sm-5\"},[_c('div',{staticClass:\"overlayBg rounded pa-5\"},[_c('div',{staticClass:\"mew-heading-3 mb-3\"},[_vm._v(\"Your Eth2 Address\")]),_c('div',{staticClass:\"break-word mew-address\"},[_vm._v(\" \"+_vm._s(_vm.eth2Address)+\" \")])]),_c('div',{staticClass:\"mt-8\"},[_c('div',{staticClass:\"mew-heading-3 mb-5 pl-md-5\"},[_vm._v(\" 1. Write down your recovery phrase \")]),_c('border-block',{staticClass:\"px-3 px-sm-7 py-4\"},[_c('mnemonic-phrase-table',{attrs:{\"data\":_vm.mnemonic}})],1)],1),_c('div',{staticClass:\"mt-10\"},[_c('div',{staticClass:\"mew-heading-3 mb-5 pl-md-5\"},[_vm._v(\" 2. Download your keystore file \")]),_c('div',{staticClass:\"d-block d-sm-flex align-center justify-space-between greyLight py-5 px-3 rounded\"},[_c('div',{staticClass:\"d-flex align-center\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/icons/icon-keystore-file.svg\"),\"alt\":\"Keystore file\",\"height\":\"32\"}}),_c('div',{staticClass:\"ml-3\"},[_c('div',{staticClass:\"mew-heading-4\"},[_vm._v(\" Keystore file \"),(_vm.downloadedKeystore)?_c('v-icon',{attrs:{\"size\":\"16\",\"color\":\"greenPrimary\"}},[_vm._v(\"mdi-checkbox-marked-circle\")]):_vm._e()],1),(_vm.downloadedKeystore && _vm.keystoreName)?_c('div',{staticClass:\"textLight--text\"},[_vm._v(\" \"+_vm._s(_vm.keystoreName)+\" \")]):_vm._e()])]),_c('mew-button',{staticClass:\"my-2\",attrs:{\"btn-size\":\"small\",\"title\":\"Download\",\"btn-style\":\"outline\",\"loading\":_vm.downloadingKeystore && !_vm.downloadedKeystore,\"has-full-width\":_vm.$vuetify.breakpoint.xs},nativeOn:{\"click\":function($event){return _vm.onDownload.apply(null, arguments)}}})],1),(_vm.downloadedKeystore)?_c('mew-warning-sheet',{staticClass:\"mt-4 mb-1\",attrs:{\"description\":_vm.keystoreFileWarning}}):_vm._e()],1)]),_c('div',{staticClass:\"mt-10 d-flex flex-column-reverse flex-md-row align-center justify-center\"},[_c('mew-button',{staticClass:\"d-block ma-2\",attrs:{\"has-full-width\":_vm.$vuetify.breakpoint.smAndDown,\"btn-size\":\"xlarge\",\"title\":\"Back\",\"btn-style\":\"outline\"},nativeOn:{\"click\":function($event){return _vm.onBack.apply(null, arguments)}}}),_c('mew-button',{staticClass:\"d-block ma-2\",attrs:{\"has-full-width\":_vm.$vuetify.breakpoint.smAndDown,\"btn-size\":\"xlarge\",\"title\":_vm.buttonText,\"disabled\":!_vm.downloadedKeystore},nativeOn:{\"click\":function($event){return _vm.onContinue(false)}}})],1),_c('staked-create-password-dialog',{attrs:{\"opened\":_vm.onCreatePassword},on:{\"generate\":_vm.generateKeystore,\"onDialogStateChange\":_vm.onDialogStateChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--\n    ===================================================\n    Step two: Generate Eth2 Address\n    ===================================================\n    -->\n  <div>\n    <div class=\"mx-auto mb-3\" style=\"max-width: 550px\">\n      <div class=\"mew-heading-2 py-8 text-center\">\n        Here is your new Eth2 Address\n      </div>\n      <div\n        class=\"skip-container d-flex flex-column flex-sm-row rounded align-center justify-space-between greyLight px-5 py-4\"\n      >\n        <!--\n      ===================================================\n      Already have Eth2 Address\n      ===================================================\n      -->\n        <div class=\"mb-2 mb-sm-0\">Already have Eth2 address?</div>\n        <div\n          class=\"d-flex align-center greenPrimary--text cursor-pointer\"\n          @click=\"onContinue(true)\"\n        >\n          Skip this step\n          <img\n            height=\"17\"\n            class=\"ml-2\"\n            src=\"@/assets/images/icons/button-circle-right-arrow.svg\"\n            alt=\"right arrow\"\n          />\n        </div>\n      </div>\n\n      <border-block class=\"mt-4 pa-3 pa-sm-5\">\n        <!--\n    ===================================================\n   Eth2 Address\n    ===================================================\n    -->\n        <div class=\"overlayBg rounded pa-5\">\n          <div class=\"mew-heading-3 mb-3\">Your Eth2 Address</div>\n          <div class=\"break-word mew-address\">\n            {{ eth2Address }}\n          </div>\n        </div>\n        <!--\n    ===================================================\n    Recovery phrase\n    ===================================================\n    -->\n        <div class=\"mt-8\">\n          <div class=\"mew-heading-3 mb-5 pl-md-5\">\n            1. Write down your recovery phrase\n          </div>\n          <border-block class=\"px-3 px-sm-7 py-4\">\n            <mnemonic-phrase-table :data=\"mnemonic\" />\n          </border-block>\n        </div>\n        <!--\n    ===================================================\n    Keystore\n    ===================================================\n    -->\n\n        <div class=\"mt-10\">\n          <div class=\"mew-heading-3 mb-5 pl-md-5\">\n            2. Download your keystore file\n          </div>\n          <div\n            class=\"d-block d-sm-flex align-center justify-space-between greyLight py-5 px-3 rounded\"\n          >\n            <div class=\"d-flex align-center\">\n              <img\n                src=\"@/assets/images/icons/icon-keystore-file.svg\"\n                alt=\"Keystore file\"\n                height=\"32\"\n              />\n              <div class=\"ml-3\">\n                <div class=\"mew-heading-4\">\n                  Keystore file\n                  <v-icon\n                    v-if=\"downloadedKeystore\"\n                    size=\"16\"\n                    color=\"greenPrimary\"\n                    >mdi-checkbox-marked-circle</v-icon\n                  >\n                </div>\n                <div\n                  v-if=\"downloadedKeystore && keystoreName\"\n                  class=\"textLight--text\"\n                >\n                  {{ keystoreName }}\n                </div>\n              </div>\n            </div>\n            <mew-button\n              class=\"my-2\"\n              btn-size=\"small\"\n              title=\"Download\"\n              btn-style=\"outline\"\n              :loading=\"downloadingKeystore && !downloadedKeystore\"\n              :has-full-width=\"$vuetify.breakpoint.xs\"\n              @click.native=\"onDownload\"\n            />\n          </div>\n\n          <mew-warning-sheet\n            v-if=\"downloadedKeystore\"\n            class=\"mt-4 mb-1\"\n            :description=\"keystoreFileWarning\"\n          />\n        </div>\n      </border-block>\n      <!--\n    ======================================================\n    Back + Continue buttons\n    ======================================================\n    -->\n      <div\n        class=\"mt-10 d-flex flex-column-reverse flex-md-row align-center justify-center\"\n      >\n        <mew-button\n          :has-full-width=\"$vuetify.breakpoint.smAndDown\"\n          btn-size=\"xlarge\"\n          class=\"d-block ma-2\"\n          title=\"Back\"\n          btn-style=\"outline\"\n          @click.native=\"onBack\"\n        />\n        <mew-button\n          :has-full-width=\"$vuetify.breakpoint.smAndDown\"\n          btn-size=\"xlarge\"\n          class=\"d-block ma-2\"\n          :title=\"buttonText\"\n          :disabled=\"!downloadedKeystore\"\n          @click.native=\"onContinue(false)\"\n        />\n      </div>\n\n      <!--\n    ======================================================\n    Create password + download keystore dialog\n    ======================================================\n    -->\n      <staked-create-password-dialog\n        :opened=\"onCreatePassword\"\n        @generate=\"generateKeystore\"\n        @onDialogStateChange=\"onDialogStateChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport KeyStore, { verifyKeystore } from '@myetherwallet/eth2-keystore';\n\nimport { Toast, ERROR } from '@/modules/toast/handler/handlerToast';\nimport { createBlob } from '@/modules/create-wallet/handlers/helpers';\n\nexport default {\n  components: {\n    BorderBlock: () => import('@/components/BorderBlock'),\n    StakedCreatePasswordDialog: () =>\n      import('../StakedCreatePasswordDialog.vue'),\n    MnemonicPhraseTable: () => import('@/components/MnemonicPhraseTable')\n  },\n  data() {\n    return {\n      ks: {},\n      mnemonic: [],\n      eth2Address: '',\n      downloadedKeystore: false,\n      downloadingKeystore: false,\n      keystoreFileWarning:\n        \"Don't lose your Keystore file / password and Recovery phrase. They hold your keys and are necessary future access. MEW will not be able to recover them for you so make sure to keep them safe.\",\n      keystoreJson: '',\n      keystoreName: '',\n      onCreatePassword: false,\n      link: {}\n    };\n  },\n  computed: {\n    buttonText() {\n      return this.downloadedKeystore\n        ? 'Next: upload your keystore file'\n        : 'Continue after downloading keystore file';\n    }\n  },\n  mounted() {\n    /**\n     * Create Keystore handler\n     * then create address, mnemonic\n     */\n    this.ks = new KeyStore();\n    this.createAddress();\n    this.createMnemonic();\n  },\n  methods: {\n    /**\n     * Create Eth2 Address\n     */\n    async createAddress() {\n      const address = await this.ks.getPublicKey(0, false);\n      this.eth2Address = address.toString('hex');\n    },\n    /**\n     * Create Mnemonic\n     */\n    async createMnemonic() {\n      const mnemonic = await this.ks.getMnemonic();\n      this.mnemonic = mnemonic.split(' ');\n    },\n    /**\n     * Gets triggered by emit from StakedCreatePasswordDialog\n     * stores the state of the dialog (opened or closed)\n     */\n    onDialogStateChange(newVal) {\n      this.onCreatePassword = newVal;\n    },\n    /**\n     * Gets triggered from clicking the Download button\n     * if keystore has not been downloaded, then create pw modal will pop up\n     * otherwise will download the same keystore file\n     */\n    onDownload() {\n      if (this.downloadedKeystore) {\n        this.downloadKeystore();\n        return;\n      }\n      this.onCreatePassword = !this.onCreatePassword;\n    },\n    /**\n     * Generate keystore json\n     */\n    async generateKeystore(pw) {\n      const password = pw;\n      this.downloadingKeystore = true;\n      this.onCreatePassword = false;\n      const toWithdrawalKeystore = await this.ks.toWithdrawalKeystore(password);\n      this.keystoreJson = createBlob(toWithdrawalKeystore, 'mime');\n      this.keystoreName =\n        'keystore-' +\n        toWithdrawalKeystore.path.split('/').join('_') +\n        '-' +\n        Date.now() +\n        '.json';\n      this.downloadKeystore();\n      /**\n       * Verify keystore\n       */\n      await verifyKeystore(toWithdrawalKeystore, password).catch(error => {\n        Toast(error, {}, ERROR);\n      });\n    },\n    /**\n     * Download keystore file\n     */\n    downloadKeystore() {\n      this.link = document.createElement('a');\n      this.link.href = this.keystoreJson;\n      this.link.download = this.keystoreName;\n      this.link.click();\n      this.downloadedKeystore = true;\n    },\n    /**\n     * Emits back to go to previous step\n     */\n    onBack() {\n      this.$emit('back');\n    },\n    /**\n     * Emits onContinue to go to next step\n     * if skipped @returns true means do not need to generate\n     * a new keystore\n     */\n    onContinue(skipped) {\n      this.$emit('onContinue', {\n        onStep: 2,\n        isSkipped: skipped,\n        address: this.eth2Address\n      });\n      URL.revokeObjectURL(this.link.href);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepTwoGenerate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StepTwoGenerate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StepTwoGenerate.vue?vue&type=template&id=a9f68486&\"\nimport script from \"./StepTwoGenerate.vue?vue&type=script&lang=js&\"\nexport * from \"./StepTwoGenerate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/button-circle-right-arrow.bc93cea1.svg\";"],"sourceRoot":""}