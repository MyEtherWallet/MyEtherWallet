{"version":3,"sources":["webpack:///./src/modules/notifications/helpers/formatNotification.js","webpack:///./src/modules/transfer-history/ModuleTransferHistory.vue?22d5","webpack:///src/modules/transfer-history/ModuleTransferHistory.vue","webpack:///./src/modules/transfer-history/ModuleTransferHistory.vue?9387","webpack:///./src/modules/transfer-history/ModuleTransferHistory.vue","webpack:///./src/modules/notifications/helpers/formatNonChainNotification.js","webpack:///./src/modules/transfer-history/ModuleTransferHistory.vue?3df4","webpack:///./src/core/helpers/timeAgo.js"],"names":["formatNotification","obj","network","isEthVMSupported","type","explorer","supported","blockExplorerTX","newObj","txHash","value","hash","string","link","replace","gasPrice","formatIntegerToString","fromWei","gasLimit","toBN","gas","toString","total","formatFloatingPointValue","transactionFee","currencyName","to","toTxData","from","amount","timestamp","timeAgo","date","toNumber","status","toLowerCase","read","toObj","fromObj","fromTxData","notification","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","class","draggable","_v","_s","actualTitle","on","toggleDropdown","chevronIcon","_l","data","key","nativeOn","$event","markNotificationAsRead","_e","staticRenderFns","name","props","isSwap","default","dropdown","computed","parsedTxNotifications","map","sort","parsedSwapNotifications","actualNotifications","mounted","methods","sortByDate","component","SECONDS_IN_YEAR","SECONDS_IN_MONTH","SECONDS_IN_DAY","SECONDS_IN_HOUR","SECONDS_IN_MINUTES","convertedDate","Date","seconds","Math","floor","secondsInYear","secondsInMonth","secondsInDay","secondsInHour","secondsInMin"],"mappings":"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","file":"js/chunk-dedb8346.5171cf0d.js","sourcesContent":["import timeAgo from '@/core/helpers/timeAgo';\nimport { fromWei, toBN } from 'web3-utils';\nimport {\n  formatFloatingPointValue,\n  formatIntegerToString\n} from '@/core/helpers/numberFormatHelper';\n/**\n * Formatted notification for mew-notification component\n */\nconst formatNotification = (obj, network) => {\n  const isEthVMSupported = network.type.isEthVMSupported;\n  const explorer = isEthVMSupported.supported\n    ? isEthVMSupported.blockExplorerTX\n    : network.type.blockExplorerTX;\n  const newObj = {\n    txHash: {\n      value: obj.hash ? obj.hash : '',\n      string: 'Transaction Hash',\n      link: `${explorer ? explorer.replace('[[txHash]]', obj.hash) : ''}`\n    },\n    gasPrice: {\n      value: `${formatIntegerToString(fromWei(obj.gasPrice, 'gwei'))} Gwei`,\n      string: 'Gas Price'\n    },\n    gasLimit: {\n      value: formatIntegerToString(toBN(obj.gas).toString()),\n      string: 'Gas Limit'\n    },\n    total: {\n      value: `${\n        formatFloatingPointValue(fromWei(obj.transactionFee, 'ether')).value\n      } ${network.type.currencyName}`,\n      string: 'Total Transaction fee'\n    },\n    to: {\n      value: obj.toTxData && obj.toTxData.to ? obj.toTxData.to : obj.to,\n      string: 'To'\n    },\n    from: {\n      value: obj.from,\n      string: 'From'\n    },\n    amount: {\n      value: `${formatFloatingPointValue(fromWei(obj.value, 'ether')).value} ${\n        network.type.currencyName\n      }`,\n      string: 'Amount'\n    },\n    timestamp: {\n      value: timeAgo(toBN(obj.date).toNumber()),\n      string: 'Time'\n    },\n    status: {\n      value: obj.status?.toLowerCase(),\n      string: 'Status'\n    },\n    type: {\n      value: obj.type?.toLowerCase(),\n      string: obj.type\n    },\n    read: obj.read,\n    toObj: obj.toTxData,\n    fromObj: obj.fromTxData\n  };\n  if (newObj.toObj && newObj.toObj.amount) {\n    newObj.toObj.amount = formatFloatingPointValue(newObj.toObj.amount).value;\n  }\n  if (newObj.fromObj && newObj.fromObj.amount) {\n    newObj.fromObj.amount = formatFloatingPointValue(\n      newObj.fromObj.amount\n    ).value;\n  }\n  obj.notification = newObj;\n  return obj;\n};\nexport default formatNotification;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mew6-white-sheet',{staticClass:\"px-5 px-lg-7 py-5 justify-space-between\"},[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"11\"}},[_c('div',{class:[_vm.draggable ? 'ml-7' : '', 'mew-heading-2 mb-3']},[_vm._v(\" \"+_vm._s(_vm.actualTitle)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"1\",\"align\":\"right\"},on:{\"click\":_vm.toggleDropdown}},[_c('v-icon',{attrs:{\"color\":\"black\"}},[_vm._v(_vm._s(_vm.chevronIcon))])],1),(_vm.dropdown)?_c('v-col',{staticClass:\"px-0\",attrs:{\"cols\":\"12\"}},_vm._l((_vm.actualNotifications),function(data,key){return _c('div',{key:key,staticClass:\"mb-2\"},[_c('mew-notification',{staticClass:\"px-0\",attrs:{\"show-indicator\":false,\"notification\":data.notification},nativeOn:{\"click\":function($event){return _vm.markNotificationAsRead(data)}}})],1)}),0):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <mew6-white-sheet class=\"px-5 px-lg-7 py-5 justify-space-between\">\n    <v-row dense>\n      <v-col cols=\"11\">\n        <div :class=\"[draggable ? 'ml-7' : '', 'mew-heading-2 mb-3']\">\n          {{ actualTitle }}\n        </div>\n      </v-col>\n      <v-col cols=\"1\" align=\"right\" @click=\"toggleDropdown\">\n        <v-icon color=\"black\">{{ chevronIcon }}</v-icon>\n      </v-col>\n      <v-col v-if=\"dropdown\" cols=\"12\" class=\"px-0\">\n        <div v-for=\"(data, key) in actualNotifications\" :key=\"key\" class=\"mb-2\">\n          <mew-notification\n            :show-indicator=\"false\"\n            :notification=\"data.notification\"\n            class=\"px-0\"\n            @click.native=\"markNotificationAsRead(data)\"\n          />\n        </div>\n      </v-col>\n    </v-row>\n  </mew6-white-sheet>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapActions } from 'vuex';\nimport formatNotification from '@/modules/notifications/helpers/formatNotification';\nimport formatNonChainNotification from '@/modules/notifications/helpers/formatNonChainNotification';\nimport { NOTIFICATION_TYPES } from '@/modules/notifications/handlers/handlerNotification.js';\n\nexport default {\n  name: 'ModuleTransferHistory',\n  props: {\n    isSwap: {\n      type: Boolean,\n      default: false\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return { dropdown: true };\n  },\n  computed: {\n    ...mapState('wallet', ['web3', 'address']),\n    ...mapGetters('global', ['network']),\n    ...mapGetters('notifications', ['txNotifications', 'swapNotifications']),\n    parsedTxNotifications() {\n      return this.txNotifications\n        .map(item => {\n          if (item.hasOwnProperty('hash')) {\n            return formatNotification(item, this.network);\n          }\n          return formatNonChainNotification(item);\n        })\n        .sort(this.sortByDate);\n    },\n    parsedSwapNotifications() {\n      return this.swapNotifications\n        .map(item => {\n          if (item.hasOwnProperty('hash')) {\n            return formatNotification(item, this.network);\n          }\n          return formatNonChainNotification(item);\n        })\n        .sort(this.sortByDate);\n    },\n    actualNotifications() {\n      return !this.isSwap\n        ? this.parsedTxNotifications\n        : this.parsedSwapNotifications;\n    },\n    actualTitle() {\n      return this.isSwap ? `Swap History` : `Send History`;\n    },\n    chevronIcon() {\n      return this.dropdown ? 'mdi-chevron-up' : 'mdi-chevron-down';\n    }\n  },\n  mounted() {},\n  methods: {\n    ...mapActions('notifications', ['updateNotification']),\n    markNotificationAsRead(notification) {\n      if (!notification.read) {\n        notification.markAsRead().then(() => {\n          const type = notification.type.toLowerCase();\n          if (\n            type === NOTIFICATION_TYPES.OUT ||\n            type === NOTIFICATION_TYPES.SWAP\n          ) {\n            this.updateNotification(notification);\n          } else {\n            notification.read = true;\n          }\n        });\n      }\n    },\n    sortByDate(a, b) {\n      return new Date(b.date) - new Date(a.date);\n    },\n    toggleDropdown() {\n      this.dropdown = !this.dropdown;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.cursor {\n  cursor: pointer;\n}\n\n.history-container {\n  max-height: 300px;\n  overflow-y: scroll;\n  /**\n  * adding this style here until mew-notification is updated with a new prop\n  */\n  .notification-container {\n    background-color: var(--v-white-base) !important;\n    border: none !important;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModuleTransferHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModuleTransferHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModuleTransferHistory.vue?vue&type=template&id=031f49c5&scoped=true&\"\nimport script from \"./ModuleTransferHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./ModuleTransferHistory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModuleTransferHistory.vue?vue&type=style&index=0&id=031f49c5&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"031f49c5\",\n  null\n  \n)\n\nexport default component.exports","import timeAgo from '@/core/helpers/timeAgo';\nimport { toBN } from 'web3-utils';\n/**\n * Formatted notification for mew-notification component\n */\nconst formatNotification = obj => {\n  const newObj = {\n    to: {\n      value: obj.toTxData && obj.toTxData.to ? obj.toTxData.to : obj.to,\n      string: 'To'\n    },\n    from: {\n      value: obj.from,\n      string: 'From'\n    },\n    timestamp: {\n      value: timeAgo(toBN(obj.date).toNumber()),\n      string: 'Time'\n    },\n    status: {\n      value: obj.status?.toLowerCase(),\n      string: 'Status'\n    },\n    type: {\n      value: obj.type?.toLowerCase(),\n      string: obj.type\n    },\n    read: obj.read,\n    toObj: obj.toTxData,\n    fromObj: obj.fromTxData\n  };\n  obj.notification = newObj;\n  return obj;\n};\nexport default formatNotification;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModuleTransferHistory.vue?vue&type=style&index=0&id=031f49c5&prod&lang=scss&scoped=true&\"","const SECONDS_IN_YEAR = 31536000;\nconst SECONDS_IN_MONTH = 2592000;\nconst SECONDS_IN_DAY = 86400;\nconst SECONDS_IN_HOUR = 3600;\nconst SECONDS_IN_MINUTES = 60;\n\n// date is in time string\nexport default date => {\n  const convertedDate = new Date(date);\n  const seconds = Math.floor((new Date() - convertedDate) / 1000);\n  const secondsInYear = Math.floor(seconds / SECONDS_IN_YEAR);\n  const secondsInMonth = Math.floor(seconds / SECONDS_IN_MONTH);\n  const secondsInDay = Math.floor(seconds / SECONDS_IN_DAY);\n  const secondsInHour = Math.floor(seconds / SECONDS_IN_HOUR);\n  const secondsInMin = Math.floor(seconds / SECONDS_IN_MINUTES);\n\n  return secondsInYear > 1\n    ? `${secondsInYear} years ago`\n    : secondsInMonth > 1\n    ? `${secondsInMonth} months ago`\n    : secondsInDay > 1\n    ? `${secondsInDay} days ago`\n    : secondsInHour > 1\n    ? `${secondsInHour} hours ago`\n    : secondsInMin > 1\n    ? `${secondsInMin} minutes ago`\n    : `${Math.floor(seconds)} seconds ago`;\n};\n"],"sourceRoot":""}