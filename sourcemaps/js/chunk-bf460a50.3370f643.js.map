{"version":3,"sources":["webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?40d5","webpack:///src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?06da","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue","webpack:///./src/layouts/InterfaceLayout/expiryAbi.js","webpack:///./src/dapps/ManageENS/containers/EnsMultiManager/EnsMultiManager.vue?7c6f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","names","length","loading","_l","name","key","network","type","ens","registrarTLD","expiration","directives","rawName","value","indexOf","expression","class","nameTextAndClassValue","on","$event","methodCall","text","address","account","staticRenderFns","props","renewName","Function","default","checkDomain","data","computed","mounted","res","json","nameFetch","then","setExpiry","methods","isSubdomain","obj","gracePeriod","expired","item","id","expiry","response","forEach","setDate","getDate","idx","isExpired","isInGracePeriod","expireDateValue","expiryDateFormat","a","b","nameObj","nameString","showBlockie","shouldHide","exclusion","includes","isAddress","component","expiryAbi","inputs","payable","stateMutability","constant","internalType","outputs"],"mappings":"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","file":"js/chunk-bf460a50.3370f643.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"multi-manager-container\"},[_c('div',{staticClass:\"title-container\"},[_c('h3',[_vm._v(_vm._s(_vm.$t('ens.ens-manager.title')))]),_c('p',[_vm._v(_vm._s(_vm.$t('ens.ens-manager.description')))])]),(_vm.loading)?_c('div',[_c('i',{attrs:{\"clas\":\"fa fa-spinner fa-spin\"}}),_vm._v(\" \"+_vm._s(_vm.$t('ens.fetching'))+\" \")]):(_vm.names.length === 0 && !_vm.loading)?_c('div',{staticClass:\"no-ens-container\"},[_vm._v(\" \"+_vm._s(_vm.$t('ens.no-names-found', { address: _vm.account.address }))+\" \")]):_c('div',{staticClass:\"name-container\"},_vm._l((_vm.names),function(name){return _c('div',{key:name['name'],staticClass:\"information-container\"},[_c('p',{staticClass:\"name-container\"},[_vm._v(\" \"+_vm._s(name.name)+\".\"+_vm._s(_vm.network.type.ens.registrarTLD)+\" \")]),_c('p',[_vm._v(_vm._s(name.expiration))]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(name.name.indexOf('0x') !== 0),expression:\"name.name.indexOf('0x') !== 0\"}],class:['action-button', _vm.nameTextAndClassValue(name).class],on:{\"click\":function($event){return _vm.methodCall(((name.name) + \".\" + (_vm.network.type.ens.registrarTLD)), name)}}},[_vm._v(\" \"+_vm._s(_vm.nameTextAndClassValue(name).text)+\" \")])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"multi-manager-container\">\n    <div class=\"title-container\">\n      <h3>{{ $t('ens.ens-manager.title') }}</h3>\n      <p>{{ $t('ens.ens-manager.description') }}</p>\n    </div>\n    <div v-if=\"loading\">\n      <i clas=\"fa fa-spinner fa-spin\" /> {{ $t('ens.fetching') }}\n    </div>\n    <div v-else-if=\"names.length === 0 && !loading\" class=\"no-ens-container\">\n      {{ $t('ens.no-names-found', { address: account.address }) }}\n    </div>\n    <div v-else class=\"name-container\">\n      <div\n        v-for=\"name in names\"\n        :key=\"name['name']\"\n        class=\"information-container\"\n      >\n        <p class=\"name-container\">\n          {{ name.name }}.{{ network.type.ens.registrarTLD }}\n        </p>\n        <p>{{ name.expiration }}</p>\n        <button\n          v-show=\"name.name.indexOf('0x') !== 0\"\n          :class=\"['action-button', nameTextAndClassValue(name).class]\"\n          @click=\"\n            methodCall(`${name.name}.${network.type.ens.registrarTLD}`, name)\n          \"\n        >\n          {{ nameTextAndClassValue(name).text }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { isAddress } from '@/helpers/addressUtils';\nimport { mapState } from 'vuex';\nimport { Toast } from '@/helpers';\nimport ExpiryAbi from '@/layouts/InterfaceLayout/expiryAbi.js';\n\nconst ENS_CURRENT_ADDRESS = '0x57f1887a8bf19b14fc0df6fd9b2acc9af147ea85';\nconst EXPIRY_ADDRESS = '0x78e21d038fcbb6d56f825dc1e8d8acd965744adb';\n\nexport default {\n  props: {\n    renewName: {\n      type: Function,\n      default: () => {}\n    },\n    checkDomain: {\n      type: Function,\n      default: () => {}\n    }\n  },\n  data: () => {\n    return {\n      names: [],\n      loading: true\n    };\n  },\n  computed: {\n    ...mapState('main', ['account', 'network', 'web3'])\n  },\n  mounted() {\n    this.loading = true;\n    const nameFetch = fetch(\n      `https://nft2.mewapi.io/tokens?owner=${this.account.address}&chain=mainnet`\n    ).then(res => {\n      return res.json();\n    });\n\n    nameFetch.then(this.setExpiry);\n  },\n  methods: {\n    nameTextAndClassValue(obj) {\n      const isSubdomain = obj.name.split('.').length > 1;\n      if (!isSubdomain) {\n        if (obj.gracePeriod && !obj.expired) {\n          return {\n            text: this.$t('ens.renew'),\n            class: 'renew-class'\n          };\n        } else if (obj.expired && !obj.gracePeriod) {\n          return {\n            text: this.$t('ens.register'),\n            class: 'expired-class'\n          };\n        }\n      }\n      return {\n        text: this.$t('ens.manage'),\n        class: ''\n      };\n    },\n    setExpiry(param) {\n      const names = param.hasOwnProperty(ENS_CURRENT_ADDRESS)\n        ? param[ENS_CURRENT_ADDRESS].tokens\n        : [];\n      if (names.length > 0) {\n        const hashes = names.map(item => {\n          return item.id;\n        });\n        const contract = new this.web3.eth.Contract(ExpiryAbi, EXPIRY_ADDRESS);\n        const expiry = contract.methods\n          .getExpirationDates(ENS_CURRENT_ADDRESS, hashes)\n          .call()\n          .then(response => {\n            return response;\n          })\n          .catch(() => {\n            Toast.responseHandler(\n              this.$t('ens.error.something-went-wrong'),\n              Toast.ERROR\n            );\n          });\n        expiry.then(response => {\n          if (!response) return;\n          response.forEach((item, idx) => {\n            const expiryDate = item * 1000;\n            const gracePeriod = new Date(expiryDate);\n            gracePeriod.setDate(gracePeriod.getDate() + 90);\n            const isInGracePeriod = gracePeriod > new Date().getTime();\n            const isExpired = gracePeriod.getTime() < new Date().getTime();\n            const expiryDateFormat = new Date(expiryDate);\n            names[idx].gracePeriod = isExpired ? isInGracePeriod : isExpired;\n            names[idx].expired = isExpired;\n            names[idx].expireDateValue = expiryDateFormat;\n            names[\n              idx\n            ].expiration = `${expiryDateFormat.toLocaleDateString()} ${expiryDateFormat.toLocaleTimeString()}`;\n          });\n          const sortedNames = names.slice().sort((a, b) => {\n            return a.expireDateValue - b.expireDateValue;\n          });\n\n          this.names = sortedNames;\n          this.loading = false;\n        });\n      } else {\n        this.loading = false;\n      }\n    },\n    methodCall(nameString, nameObj) {\n      if (nameObj.gracePeriod && !nameObj.expired) {\n        this.checkDomain(nameString, true);\n      } else {\n        this.checkDomain(nameString, false);\n      }\n    },\n    showBlockie(name) {\n      return !(\n        name !== 'controller' &&\n        name !== 'registrant' &&\n        name !== 'resolver'\n      );\n    },\n    shouldHide(key, name) {\n      const exclusion = ['name', 'id', 'description', 'image', 'expired'];\n      if (exclusion.includes(key)) {\n        return false;\n      } else if (key === 'controller' && name['expired']) {\n        return false;\n      }\n      return true;\n    },\n    isAddress: isAddress\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import 'EnsMultiManager.scss';\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EnsMultiManager.vue?vue&type=template&id=8c955cba&scoped=true&\"\nimport script from \"./EnsMultiManager.vue?vue&type=script&lang=js&\"\nexport * from \"./EnsMultiManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnsMultiManager.vue?vue&type=style&index=0&id=8c955cba&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c955cba\",\n  null\n  \n)\n\nexport default component.exports","const expiryAbi = [\n  {\n    inputs: [],\n    payable: false,\n    stateMutability: 'nonpayable',\n    type: 'constructor'\n  },\n  {\n    constant: true,\n    inputs: [\n      {\n        internalType: 'address',\n        name: 'ensAdd',\n        type: 'address'\n      },\n      {\n        internalType: 'uint256[]',\n        name: 'labelHases',\n        type: 'uint256[]'\n      }\n    ],\n    name: 'getExpirationDates',\n    outputs: [\n      {\n        internalType: 'uint256[]',\n        name: '',\n        type: 'uint256[]'\n      }\n    ],\n    payable: false,\n    stateMutability: 'view',\n    type: 'function'\n  }\n];\n\nexport default expiryAbi;\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=style&index=0&id=8c955cba&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsMultiManager.vue?vue&type=style&index=0&id=8c955cba&lang=scss&scoped=true&\""],"sourceRoot":""}