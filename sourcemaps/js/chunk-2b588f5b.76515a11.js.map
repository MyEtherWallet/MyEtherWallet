{"version":3,"sources":["webpack:///./src/modules/swap/components/SwapProvidersList.vue?7aef","webpack:///src/modules/swap/components/SwapProvidersList.vue","webpack:///./src/modules/swap/components/SwapProvidersList.vue?969f","webpack:///./src/modules/swap/components/SwapProvidersList.vue","webpack:///./src/modules/swap/components/SwapProvidersList.vue?3f4a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","step","toTokenSymbol","hasProviderError","attrs","providersList","length","_v","_e","_l","quote","idx","key","ref","refInFor","scopedSlots","_u","fn","active","toggle","class","on","$event","setProvider","toTokenIcon","bestRate","rate","_s","amount","tooltip","providersCut","showMore","moreProvidersText","directives","name","rawName","value","expression","isLoading","providersError","staticRenderFns","components","AppUserMsgBlock","props","type","default","availableQuotes","subtitle","selectedProviderId","data","computed","arr","watch","handler","card","immediate","setTimeout","cards","component"],"mappings":"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","file":"js/chunk-2b588f5b.76515a11.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modules--swap--components--swap-providers-list my-5\"},[(_vm.step >= 1 && _vm.toTokenSymbol && !_vm.hasProviderError)?_c('v-item-group',{attrs:{\"value\":0}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[(_vm.providersList.length > 0)?_c('div',{staticClass:\"mew-heading-3 mb-5 pl-4\"},[_vm._v(\" Select rate \")]):_vm._e(),_vm._l((_vm.providersList),function(quote,idx){return _c('v-col',{key:(\"quote-\" + idx),staticClass:\"mb-1\",attrs:{\"cols\":\"12\"}},[_c('v-item',{ref:(\"card\" + idx),refInFor:true,scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar active = ref.active;\nvar toggle = ref.toggle;\nreturn [_c('v-container',{class:[\n              active ? 'rate-active' : '',\n              'd-flex align-center rate py-0 px-1'\n            ],on:{\"click\":function($event){toggle();\n              _vm.setProvider(idx, true);}}},[_c('v-row',{staticClass:\"align-center justify-start\",attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"10\",\"sm\":\"7\"}},[_c('v-container',{staticClass:\"pa-2\"},[_c('v-row',{staticClass:\"align-center justify-start pl-5 pr-1 py-3 py-sm-4\"},[_c('mew-token-container',{attrs:{\"size\":\"small\",\"img\":_vm.toTokenIcon}}),_c('div',{staticClass:\"d-block d-sm-flex mx-2 mx-sm-4 align-center justify-start\"},[(_vm.bestRate !== null && _vm.bestRate === quote.rate)?_c('div',{staticClass:\"greenPrimary--text font-weight-medium mew-label order-sm-12 pl-sm-2\"},[_vm._v(\" Best Rate \")]):_vm._e(),_c('div',{staticClass:\"d-flex order-sm-1 justify-start align-center\"},[_c('div',{staticClass:\"mb-0 mew-heading-3 font-weight-medium\"},[_vm._v(\" \"+_vm._s(quote.amount)+\" \"+_vm._s(_vm.toTokenSymbol)+\" \")]),(quote.amount && quote.amount !== '')?_c('mew-tooltip',{staticClass:\"pl-1\",attrs:{\"text\":quote.tooltip}}):_vm._e()],1)])],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"2\",\"sm\":\"5\"}},[_c('v-row',{staticClass:\"align-center justify-end pr-3\"},[_c('mew-checkbox',{attrs:{\"value\":active}})],1)],1)],1)],1)]}}],null,true)})],1)})],2)],1):_vm._e(),(_vm.step >= 1 && _vm.providersCut > 0 && _vm.toTokenSymbol && !_vm.hasProviderError)?_c('div',{staticClass:\"cursor--pointer user-select--none greenPrimary--text mt-7 ml-4\",on:{\"click\":function($event){_vm.showMore = !_vm.showMore}}},[_vm._v(\" \"+_vm._s(_vm.moreProvidersText)+\" \"),_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showMore),expression:\"!showMore\"}],attrs:{\"small\":\"\",\"color\":\"greenPrimary\"}},[_vm._v(\"mdi-arrow-down\")]),_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showMore),expression:\"showMore\"}],attrs:{\"small\":\"\",\"color\":\"greenPrimary\"}},[_vm._v(\"mdi-arrow-up\")])],1):_vm._e(),(_vm.step >= 1 && _vm.hasProviderError && !_vm.isLoading)?_c('app-user-msg-block',{attrs:{\"message\":_vm.providersError,\"is-alert\":false,\"container-padding\":\"pa-4 py-6\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"modules--swap--components--swap-providers-list my-5\">\n    <!--\n    =====================================================================================\n      Provider Rate Row\n    =====================================================================================\n    -->\n    <v-item-group\n      v-if=\"step >= 1 && toTokenSymbol && !hasProviderError\"\n      :value=\"0\"\n    >\n      <v-row no-gutters>\n        <div v-if=\"providersList.length > 0\" class=\"mew-heading-3 mb-5 pl-4\">\n          Select rate\n        </div>\n        <v-col\n          v-for=\"(quote, idx) in providersList\"\n          :key=\"`quote-${idx}`\"\n          cols=\"12\"\n          class=\"mb-1\"\n        >\n          <v-item v-slot=\"{ active, toggle }\" :ref=\"`card${idx}`\">\n            <v-container\n              :class=\"[\n                active ? 'rate-active' : '',\n                'd-flex align-center rate py-0 px-1'\n              ]\"\n              @click=\"\n                toggle();\n                setProvider(idx, true);\n              \"\n            >\n              <v-row no-gutters class=\"align-center justify-start\">\n                <!--\n                =====================================================================================\n                  Token Image, Rate & Best Rate Chip\n                  xs = 10 / total = 10\n                  md = 7 / total = 7\n                =====================================================================================\n                -->\n                <v-col cols=\"10\" sm=\"7\">\n                  <v-container class=\"pa-2\">\n                    <v-row\n                      class=\"align-center justify-start pl-5 pr-1 py-3 py-sm-4\"\n                    >\n                      <!--\n                    =====================================================================================\n                      Token Icon\n                    =====================================================================================\n                    -->\n                      <mew-token-container size=\"small\" :img=\"toTokenIcon\" />\n                      <!--\n                      =====================================================================================\n                        Rate\n                      =====================================================================================\n                      -->\n                      <div\n                        class=\"d-block d-sm-flex mx-2 mx-sm-4 align-center justify-start\"\n                      >\n                        <div\n                          v-if=\"bestRate !== null && bestRate === quote.rate\"\n                          class=\"greenPrimary--text font-weight-medium mew-label order-sm-12 pl-sm-2\"\n                        >\n                          Best Rate\n                        </div>\n                        <div\n                          class=\"d-flex order-sm-1 justify-start align-center\"\n                        >\n                          <div class=\"mb-0 mew-heading-3 font-weight-medium\">\n                            {{ quote.amount }} {{ toTokenSymbol }}\n                          </div>\n                          <mew-tooltip\n                            v-if=\"quote.amount && quote.amount !== ''\"\n                            class=\"pl-1\"\n                            :text=\"quote.tooltip\"\n                          />\n                        </div>\n                      </div>\n                    </v-row>\n                  </v-container>\n                </v-col>\n                <!--\n                =====================================================================================\n                  Provider Image & Checkbox\n                  xs = 2 / total = 12\n                  sm = 5 / total = 12\n                =====================================================================================\n                -->\n                <v-col cols=\"2\" sm=\"5\">\n                  <v-row class=\"align-center justify-end pr-3\">\n                    <mew-checkbox :value=\"active\" />\n                  </v-row>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-item>\n        </v-col>\n      </v-row>\n    </v-item-group>\n\n    <!--\n    =====================================================================================\n      Show More Providers Button\n    =====================================================================================\n    -->\n    <div\n      v-if=\"step >= 1 && providersCut > 0 && toTokenSymbol && !hasProviderError\"\n      class=\"cursor--pointer user-select--none greenPrimary--text mt-7 ml-4\"\n      @click=\"showMore = !showMore\"\n    >\n      {{ moreProvidersText }}\n      <v-icon v-show=\"!showMore\" small color=\"greenPrimary\"\n        >mdi-arrow-down</v-icon\n      >\n      <v-icon v-show=\"showMore\" small color=\"greenPrimary\">mdi-arrow-up</v-icon>\n    </div>\n    <!--\n    =====================================================================================\n      Providers Message\n    =====================================================================================\n    -->\n    <app-user-msg-block\n      v-if=\"step >= 1 && hasProviderError && !isLoading\"\n      :message=\"providersError\"\n      :is-alert=\"false\"\n      container-padding=\"pa-4 py-6\"\n    />\n  </div>\n</template>\n<script>\nimport { isArray } from 'lodash';\n\nimport { formatFloatingPointValue } from '@/core/helpers/numberFormatHelper';\nconst MAX_PROVIDERS = 3;\nexport default {\n  name: 'SwapProvidersList',\n  components: {\n    AppUserMsgBlock: () => import('@/core/components/AppUserMsgBlock')\n  },\n  props: {\n    step: {\n      type: Number,\n      default: 0\n    },\n    availableQuotes: {\n      type: Array,\n      default: () => []\n    },\n    setProvider: {\n      type: Function,\n      default: () => {}\n    },\n    toTokenSymbol: {\n      type: String,\n      default: ''\n    },\n    toTokenIcon: {\n      type: String,\n      default: ''\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    providersError: {\n      type: Object,\n      default: () => {\n        return { subtitle: '' };\n      }\n    },\n    selectedProviderId: {\n      type: Number,\n      default: () => undefined\n    }\n  },\n  data() {\n    return {\n      showMore: false\n    };\n  },\n  computed: {\n    /**\n     * @Returns Boolean\n     * checks whether there's errors\n     * with the providers\n     */\n    hasProviderError() {\n      return (\n        this.availableQuotes.length === 0 || this.providersError.subtitle !== ''\n      );\n    },\n    /**\n     * Property returns best rate in the quotes\n     * Or null id quotes not defined.\n     * Used in best rate chip\n     */\n    bestRate() {\n      return this.providersList.length > 0 && this.providersList[0].rate\n        ? this.providersList[0].rate\n        : null;\n    },\n    /**\n     * Property returns quotes to be displayed on the ui\n     * If more then 3 quotes found: the list will be sliced by max_providers\n     * List Fitlers out null and undefined items\n     * Used in Providers Rate Row\n     */\n    providersList() {\n      if (!this.isLoading && this.step > 0) {\n        const list =\n          !this.showMore && this.providersCut > 0\n            ? this.availableQuotes.slice(0, MAX_PROVIDERS)\n            : this.availableQuotes;\n        const returnedList = list.reduce((arr, item) => {\n          if (item) {\n            const formatted = formatFloatingPointValue(item.rate * 100);\n            const formattedAmt = formatFloatingPointValue(item.amount);\n            arr.push({\n              rate: formatted.value,\n              amount: formattedAmt.value,\n              tooltip: `${formattedAmt.tooltipText || formattedAmt.value} ${\n                this.toTokenSymbol\n              }`\n            });\n          }\n          return arr;\n        }, []);\n        if (returnedList) return returnedList;\n      }\n      return [];\n    },\n    /**\n     * Property returns number of providers that was sliced on the ui\n     */\n    providersCut() {\n      return this.availableQuotes.filter(item => !!item).length - MAX_PROVIDERS;\n    },\n    /**\n     * Property returns a string for show more providers button\n     * If showMore - returns \"Show Less\",\n     * If show less - returns \"{providers cut} More Providers\"\n     */\n    moreProvidersText() {\n      if (this.providersCut > 0) {\n        const single = 'More Rate';\n        const multiple = 'More Rates';\n        if (!this.showMore) {\n          return this.providersCut === 1\n            ? `${this.providersCut} ${single}`\n            : `${this.providersCut} ${multiple}`;\n        }\n        return 'Show Less';\n      }\n      return '';\n    }\n  },\n  watch: {\n    providersList: {\n      handler: function (newVal, oldVal) {\n        const hasOldVal = !oldVal || (isArray(oldVal) && oldVal.length === 0);\n        if (newVal.length > 0 && hasOldVal && !this.hasProviderError) {\n          const bestRate = newVal.findIndex(item => {\n            return item.rate === this.bestRate;\n          });\n\n          this.$nextTick(() => {\n            if (bestRate !== -1) {\n              const rateCard = this.$refs[`card${bestRate}`];\n              if (!rateCard) return;\n              const card = rateCard[0];\n              if (!card?.isActive) {\n                card.toggle();\n              }\n              this.setProvider(bestRate, this.step === 1);\n            }\n          });\n        }\n      },\n      immediate: true\n    },\n    selectedProviderId: {\n      handler: function (id) {\n        setTimeout(() => {\n          if (id !== undefined) {\n            const card = this.$refs[`card${id}`][0];\n            if (card?.hasOwnProperty('isActive') && !card?.isActive) {\n              card.toggle();\n            }\n          } else {\n            setTimeout(() => {\n              const refs = Object.keys(this.$refs);\n              const cards = refs.filter(c => c.includes('card'));\n              cards.forEach(c => {\n                const card = this.$refs[c][0];\n                if (card?.isActive) {\n                  card.toggle();\n                }\n              });\n            }, 500);\n          }\n        }, 100);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.rate-active {\n  border: 1px solid var(--v-greenPrimary-base) !important;\n  background-color: var(--v-buttonGrayLight-base) !important;\n}\n.rate {\n  min-height: 60px;\n  border-radius: 8px;\n  border: 1px solid var(--v-borderInput-base);\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SwapProvidersList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SwapProvidersList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SwapProvidersList.vue?vue&type=template&id=402fb29f&scoped=true&\"\nimport script from \"./SwapProvidersList.vue?vue&type=script&lang=js&\"\nexport * from \"./SwapProvidersList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SwapProvidersList.vue?vue&type=style&index=0&id=402fb29f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"402fb29f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SwapProvidersList.vue?vue&type=style&index=0&id=402fb29f&prod&lang=scss&scoped=true&\""],"sourceRoot":""}