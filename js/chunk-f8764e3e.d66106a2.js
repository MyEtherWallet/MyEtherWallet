(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8764e3e"],{"0dd3":function(e,t,s){},"889c":function(e,t,s){"use strict";s("8b9d")},"8b9d":function(e,t,s){},bd97:function(e,t,s){"use strict";s("0dd3")},cbc3:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-sheet",{staticClass:"addressBlock d-flex justify-space-between align-center mb-7",attrs:{color:"transparent"}},[s("mew-blockie",{attrs:{address:e.address}}),s("span",{staticClass:"font-weight-heavy pr-15"},[e._v(e._s(e.address))])],1),e.hasDomains?s("div",{staticClass:"d-flex flex-column justify-space-between"},[s("div",{staticClass:"mew-heading-2 mb-2"},[e._v("Your Domains:")]),s("div",{staticClass:"d-flex justify-space-between"},[s("mew-select",{staticClass:"domain-dropdown",attrs:{"normal-dropdown":"",value:e.selectedDomain,"filter-placeholder":"Search for Domain",items:e.domainListItems,"error-messages":e.selectedDomain.error},on:{input:e.setDomain}}),s("mew-button",{staticClass:"set-button",attrs:{title:"Register","btn-size":"xlarge",loading:e.selectedDomain.loading,disabled:e.disableRegister},nativeOn:{click:function(t){return e.setReverseRecord(e.selectedDomain)}}})],1)]):s("div",[s("mew-alert",{staticClass:"font-weight-light d-flex justify-space-between align-center mb-7 mt-7",attrs:{"hide-close-icon":""}},[e._v(" No ENS names have their ETH Address records set to this address. Only ENS names that point to your Ethereum account can be set as your Primary ENS Name. ")])],1),e.hasReverseRecordNames?s("div",[s("div",{staticClass:"mew-heading-2 mb-2"},[e._v("Reverse Names:")]),s("div",{staticClass:"d-flex justify-space-between"},[e._v(" "+e._s(e.reverseRecordNames)+" ")])]):e._e()],1)},r=[],i=(s("14d9"),s("2ef0")),n=s("5dc6"),c=s.n(n),o=s("2f62"),d=s("9b88"),h=s("9593"),l=s("2623"),m=s("ef5b"),u=s("ac8e"),w={name:"EnsReverseLookup",props:{address:{default:"",type:String},name:{default:"",type:String},durationPick:{default:"",type:String},ensManager:{default:()=>{},type:Object}},data(){return{ensLookupResults:null,hasDomains:!1,selectedDomain:{loading:!1,fee:Object(u["h"])(0),error:""},selectedDomainAddr:"",permHandler:{},hasReverseRecordNames:!1,reverseRecordNames:"",domainListItems:[]}},computed:{...Object(o["c"])("global",["network","gasPrice","gasPriceByType","getFiatValue"]),...Object(o["c"])("external",["fiatValue"]),...Object(o["e"])("global",["gasPriceType"]),...Object(o["e"])("wallet",["balance","web3","instance"]),disableRegister(){return!this.selectedDomain.hasOwnProperty("address")||!this.selectedDomain.hasOwnProperty("name")||(!this.selectedDomain.value&&Object(u["h"])(this.balance).lt(this.selectedDomain.fee)||this.selectedDomain.error.length>0)}},watch:{network(){this.checkNetwork()&&this.setup()},address(e){this.checkNetwork()&&e&&this.setup()},web3(){this.checkNetwork()&&this.setup()}},async mounted(){this.checkNetwork()&&await this.setup()},methods:{async setDomainListItems(){var e;const t=[];null===(e=this.ensLookupResults)||void 0===e||e.forEach(async e=>{e.loading=!0,e.fee=Object(u["h"])(0),e.error="";try{const t=await this.permHandler.getNameReverseData(e.name);e.fee=Object(u["h"])(t*this.gasPrice),Object(u["h"])(this.balance).lt(e.fee)&&(e.error="Insufficient amount of "+this.network.type.currencyName)}catch{return e.error="An error occurred while retrieving the domain information",e.loading=!1,t.push(e)}return e.loading=!1,t.push(e)}),this.domainListItems=t},checkNetwork(){return m["a"].networks.find(e=>e.chainID===this.network.type.chainID)},async setup(){await this.findDomainByAddress();const e=this.network.type.ens?new c.a({provider:this.web3.eth.currentProvider,ensAddress:this.network.type.ens.registry}):null;this.permHandler=new h["a"](this.name,this.address,this.network,this.web3,e,this.durationPick),this.selectedDomain={loading:!1,fee:Object(u["h"])(0),error:""},await this.setDomainListItems(),this.getReverseRecordNames()},async fetchDomains(){return await this.ensManager.getAllNamesForAddress(this.address)},async findDomainByAddress(){try{this.hasDomains=!0;const e=await this.fetchDomains();Object(i["isEmpty"])(e)&&(this.hasDomains=!1),this.ensLookupResults=e.map(e=>({name:e.name,value:e.nameHash,address:e.address}))}catch(e){Object(d["e"])(e,{},d["a"])}},setDomain(e){this.selectedDomain=e,this.getReverseRecordNames(this.selectedDomainAddr)},async setReverseRecord(e){try{const t=await this.permHandler.setNameReverseRecord(e.name);return this.hasReverseRecordNames=!0,t}catch(t){const e=Object(l["a"])(t);e&&Object(d["e"])(e,{},d["a"])}},async getReverseRecordNames(){try{const e=this.network.type.ens?new c.a(this.web3.currentProvider,this.network.type.ens.registry):null,t=e.reverse(this.address);this.reverseRecordNames=await t.name(),this.hasReverseRecordNames=!0}catch(e){this.hasReverseRecordNames=!1}}}},p=w,b=(s("bd97"),s("889c"),s("2877")),f=Object(b["a"])(p,a,r,!1,null,"527e8ac8",null);t["default"]=f.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-f8764e3e.d66106a2.js.map