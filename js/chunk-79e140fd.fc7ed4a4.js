(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79e140fd"],{"0672":function(t,e,n){},"8ff0":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mew-module",{staticClass:"text-center d-flex justify-end flex-grow-1 pt-6 mr-3",attrs:{"has-elevation":!0,"has-indicator":!0,title:"NFT Manager"},scopedSlots:t._u([{key:"moduleBody",fn:function(){return[t.loadingContracts&&!t.hasNoTokens?n("v-skeleton-loader",{attrs:{type:"table-heading,list-item-avatar-three-line, list-item-avatar-three-line, list-item-avatar-three-line"}}):t._e(),!t.loadingContracts&&0===t.contracts.length&&0===t.tabs.length||t.hasNoTokens?n("v-card",{staticClass:"d-flex align-center px-5 py-4",attrs:{flat:"",color:"selectorBg lighten-1","min-height":"94px"}},[n("v-card-text",{staticClass:"text-center"},[t._v(t._s(t.$t("nftManager.none-owned"))+" ")])],1):t._e(),!t.loadingContracts&&!t.onNftSend&&t.tabs.length>0&&!t.hasNoTokens?n("mew-tabs",{attrs:{items:t.tabs,"is-vertical":t.$vuetify.breakpoint.mdAndUp,"has-underline":t.$vuetify.breakpoint.smAndDown,"active-tab":t.activeTab},on:{onTab:t.onTab}},[t._l(t.contracts,(function(e,s){return n("template",{slot:"tabItemContent"+(s+1)},[n("div",{key:s,staticClass:"ml-5"},[n("div",{staticClass:"d-flex justify-space-between mt-3 mb-5"},[n("h5",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.selectedContract.name)+" ")]),n("div",[t._v("Total: "+t._s(t.selectedContract.count))])]),t.displayedTokens&&0===t.displayedTokens.length?n("div",[t._v(" Loading ... ")]):t._e(),t.displayedTokens&&0!==t.displayedTokens.length?n("div",[t._l(t.displayedTokens,(function(e,s){return n("div",{key:s,staticClass:"mb-3"},[n("nft-manager-details",{attrs:{loading:t.loadingTokens,"on-click":t.openNftSend,"get-image-url":t.getImageUrl,token:e}})],1)})),t.hasPages?n("div",{staticClass:"px-4 mt-3 d-flex align-center justify-end"},[n("v-pagination",{staticClass:"nft-pagination",attrs:{color:"expandHeader",length:t.totalPages,"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},on:{input:t.setPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e()],2):t._e()])])}))],2):t._e(),t.onNftSend?n("nft-manager-send",{attrs:{close:t.closeNftSend,"get-image-url":t.getImageUrl,nft:t.selectedNft,"nft-category":t.selectedContract.name,send:t.sendTx,disabled:!t.isValid,"enough-funds":t.enoughFunds,"show-balance-error":t.showBalanceError,"set-address":t.setAddress},on:{hasMinEth:t.hasMinEth}}):t._e()]},proxy:!0}])})],1)},a=[],r=n("53ca"),i=n("c7eb"),o=n("1da1"),c=n("5530"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("99af"),n("b0c0"),n("7db0"),n("fb6a"),n("14d9"),n("25f0"),n("ac1f"),n("5319"),n("c740"),n("a434"),n("2f62")),d=n("5ba3"),h=n.n(d),l=n("9b88"),f=(n("a15b"),n("0b16")),p=n.n(f),g=function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.substr(1,t.length)):""},b=function(t){var e=p.a.parse(t).hostname,n=e.split(".");return n.length>2?g("".concat(n[1],".").concat(n[2])):g(n.join("."))},m=b,k=n("db3a"),y=n("913e"),v=n("ac8e"),w=n("d4ec"),T=n("bee2"),N=(n("d9e2"),n("caad"),n("2532"),{url:"https://nft.mewapi.io",countPerPage:9,cryptoKittiesContract:"0x06012c8cf97bead5deae237070f9587f8e7a266d",mainnet:"ETH",api:"https://mainnet.mewwallet.dev"}),P=N,j=[{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],_=j,x=n("901e"),A=n.n(x),C=function(){function t(e){var n=e.network,s=e.address,a=e.web3;Object(w["a"])(this,t),this.network=n,this.address=s,this.web3=a,this.countPerPage=P.countPerPage,this.currentPage=1}return Object(T["a"])(t,[{key:"getNfts",value:function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(P.api,"/v3/nfts/account?address=").concat(this.address)).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t["catch"](0),new Error(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"isValidAddress",value:function(t){return""!==t&&h.a.isAddress(t)}},{key:"send",value:function(t,e){var n;return this.contract=new this.web3.eth.Contract(_),n=e.contract.includes(P.cryptoKittiesContract)?this.cryptoKittiesTransfer(t,e):this.safeTransferFrom(t,e),n.from=this.address,this.web3.eth.sendTransaction(n)}},{key:"getGasFees",value:function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(e,n){var s,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.contract=new this.web3.eth.Contract(_),s=n.contract.includes(P.cryptoKittiesContract)?this.cryptoKittiesTransfer(e,n):this.safeTransferFrom(e,n),s.from=this.address,a=this.web3.eth.estimateGas(s),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"safeTransferFrom",value:function(t,e){return{to:e.contract,data:this.contract.methods.safeTransferFrom(this.address,t,e.token_id).encodeABI()}}},{key:"cryptoKittiesTransfer",value:function(t,e){return this.contract.options.address=e.contract,{to:e.contract,data:this.contract.methods.transfer(t,e.token_id).encodeABI()}}},{key:"totalPages",value:function(t){return Math.ceil(new A.a(t).div(this.countPerPage).toNumber())}},{key:"hasPages",value:function(t){return this.countPerPage<t}},{key:"startIndex",value:function(){return this.currentPage*this.countPerPage-this.countPerPage}},{key:"endIndex",value:function(t){var e=this.currentPage*this.countPerPage;return t>e?e:t}},{key:"setCurrentPage",value:function(t){this.currentPage=t}},{key:"goToFirstPage",value:function(){this.currentPage=1}},{key:"getImageUrl",value:function(t,e){var n="".concat(P.url,"/getImage");return e&&"0x"===e.slice(0,2)&&(e=e.slice(2)),"".concat(n,"?contract=").concat(t,"&tokenId=").concat(e)}}]),t}(),O=21e3,F={components:{NftManagerDetails:function(){return n.e("chunk-75f6e5be").then(n.bind(null,"6ccc2"))},NftManagerSend:function(){return n.e("chunk-482f27de").then(n.bind(null,"b10c"))}},data:function(){return{nft:{},activeTab:0,onNftSend:!1,hasNoTokens:!1,selectedNft:{},toAddress:"",selectedContract:{},gasFees:"0",enoughFunds:!1,showBalanceError:!1,localGasPrice:"0",loadingContracts:!0,loadingTokens:!0,nftApiResponse:[]}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(u["e"])("wallet",["balance","web3","address"])),Object(u["e"])("global",["network","gasPriceType"])),Object(u["c"])("wallet",["balanceInETH","balanceInWei"])),Object(u["c"])("global",["isEthNetwork","network","gasPrice","gasPriceByType"])),{},{tabs:function(){return this.contracts.map((function(t){return{name:"".concat(t.name," (").concat(t.count,")")}}))},tokens:function(){var t=this;if(this.nftApiResponse.length>0){var e=this.nftApiResponse.find((function(e){return e.contract_address.toLowerCase()===t.selectedContract.contract}));if(e)return e.assets.map((function(t){var n=t.urls.length>0?t.urls.find((function(t){if("IMAGE"===t.type)return t})):"",s=n?n.url:"";return{image:"https://img.mewapi.io/?image=".concat(s),name:t.name,token_id:t.token_id,contract:e.contract_address}}))}return[]},contracts:function(){return this.nftApiResponse.length>0?this.nftApiResponse.map((function(t){return{contract:t.contract_address,count:t.assets.length,name:t.contract_name}})):[]},totalPages:function(){return this.nft.totalPages(this.selectedContract.count)},hasPages:function(){return this.nft.hasPages(this.selectedContract.count)},startIndex:function(){return this.nft.startIndex()},endIndex:function(){return this.nft.endIndex(this.selectedContract.count)},currentPage:{get:function(){return this.nft.currentPage},set:function(t){return t}},displayedTokens:function(){return this.tokens.slice(this.startIndex,this.endIndex)},isValid:function(){return this.nft.isValidAddress(this.toAddress)&&this.enoughFunds}}),watch:{balanceInWei:function(){this.hasMinEth()},web3:function(){this.loadingContracts=!0,this.loadingTokens=!0,this.onNftSend=!1,this.$router.push({name:k["b"].NFT_MANAGER.NAME}),this.network.type.name===y["ETH"].name?this.setUpNFT():(Object(l["e"])("NFT Manager not supported in network: ".concat(this.network.type.name),{},l["f"]),this.nftApiResponse=[])},address:function(){this.loadingContracts=!0,this.loadingTokens=!0,this.onNftSend=!1,this.$router.push({name:k["b"].NFT_MANAGER.NAME}),this.setUpNFT()},contracts:function(t){t.length>0&&this.onTab(0)},toAddress:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var s,a,r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Object(d["isAddress"])(t)){n.next=8;break}return s=e.gasPriceByType(e.gasPriceType),n.next=4,e.nft.getGasFees(t,e.selectedNft);case 4:a=n.sent,r=Object(v["h"])(a).mul(Object(v["h"])(s)),e.gasFees=r.toString(),r.gte(Object(d["toBN"])(e.balanceInWei))?(e.enoughFunds=!1,e.showBalanceError=!0):(e.enoughFunds=!0,e.showBalanceError=!1);case 8:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.setUpNFT()},methods:{setUpNFT:function(){this.nft=new C({network:this.network,address:this.address,web3:this.web3}),this.getNfts(),this.localGasPrice=this.gasPriceByType(this.gasPriceType),this.hasMinEth()},getNfts:function(){var t=this;this.nft.getNfts().then((function(e){t.nftApiResponse=e,t.loadingContracts=!1,setTimeout((function(){t.loadingTokens=!1}),500)}))},hasMinEth:function(){var t=this.localGasPrice;Object(d["toBN"])(this.balanceInWei).gt(Object(d["toBN"])(t).muln(O))?(this.enoughFunds=!0,this.showBalanceError=!1):(this.enoughFunds=!1,this.showBalanceError=!0)},getImageUrl:function(t){return this.nft.getImageUrl(t.contract,t.token_id)},onTab:function(t){this.activeTab=t,this.selectedContract=this.contracts[t],this.selectedContractHash=this.contracts[t].contract,this.nft.goToFirstPage()},openNftSend:function(t){t&&(this.selectedNft=t),this.onNftSend=!0,this.$router.push({name:k["b"].NFT_MANAGER_SEND.NAME})},closeNftSend:function(){this.onNftSend=!1,this.toAddress="",this.$router.push({name:k["b"].NFT_MANAGER.NAME})},sendTx:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isValid)try{t.nft.send(t.toAddress,t.selectedNft).then((function(e){t.updateValues(),t.enoughFunds=!0,t.toAddress="",t.closeNftSend(),Object(l["e"])("Cheers! Your transaction was mined. Check it in ",{title:"".concat(m(t.network.type.blockExplorerTX)),url:t.network.type.blockExplorerTX.replace("[[txHash]]",e.blockHash)},l["d"],5e3)})).catch((function(t){Object(l["e"])(t.message,{},l["a"])}))}catch(n){Object(l["e"])(n.message,{},l["f"])}case 1:case"end":return e.stop()}}),e)})))()},updateValues:function(){var t=this,e=this.tokens.findIndex((function(e){return e.token_id===t.selectedNft.token_id}));this.tokens.splice(e,1),0===this.tokens.length&&1===this.contracts.length&&(this.hasNoTokens=!0),this.getNfts()},setAddress:function(t){"object"===Object(r["a"])(t)&&t?this.toAddress=t.address:this.toAddress=t},setPage:function(t){this.nft.setCurrentPage(t)}}},E=F,I=(n("9361"),n("2877")),M=Object(I["a"])(E,s,a,!1,null,null,null);e["default"]=M.exports},9361:function(t,e,n){"use strict";n("0672")}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-79e140fd.fc7ed4a4.js.map