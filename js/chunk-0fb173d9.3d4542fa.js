(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb173d9"],{"3c4b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"mx-auto pb-3",staticStyle:{"max-width":"550px"}},[s("div",{staticClass:"mew-heading-2 py-8 text-center"},[t._v("Review and stake")]),s("v-row",{attrs:{dense:""}},t._l(t.details,(function(e,a){return s("v-col",{key:e+a,attrs:{cols:"12",sm:"6"}},[s("div",{staticClass:"greyLight pa-5 d-flex align-center rounded-lg"},[s("div",{staticClass:"mr-3 mt-1"},[s("img",{attrs:{src:e.img,height:"25",alt:"eth icon"}})]),s("div",[s("div",{staticClass:"textLight--text text-uppercase detail-subtitle font-weight-medium"},[t._v(" "+t._s(e.subtitle)+" ")]),s("div",{staticClass:"mew-heading-4 detail-title"},[t._v(t._s(e.title))]),e.isAddress?s("mew-transform-hash",{staticClass:"mew-hash-container textLight--text font-weight-medium",attrs:{hash:e.desc}}):t._e(),e.isAddress?t._e():s("div",{staticClass:"textLight--text"},[t._v(" "+t._s(e.desc)+" ")])],1)])])})),1),s("div",{staticClass:"mt-5"},t._l(t.fees,(function(e,a){return s("div",{key:e+a,staticClass:"d-block d-sm-flex align-center justify-space-between mb-3 mb-sm-2"},[s("div",{staticClass:"mew-caption textLight--text"},[t._v(t._s(e.title))]),s("div",[t._v(" "+t._s(e.ethValue)+" "),s("span",{staticClass:"textLight--text"},[t._v("ETH /")]),t._v(" "+t._s(e.fiatValue)+" ")])])})),0),s("div",{staticClass:"mt-11 mt-sm-10 pa-5 greyLight"},[s("mew-checkbox",{attrs:{dense:"","class-name":"textMedium--text",label:"I understand that staking involves slashing risks and my funds can be lost."},model:{value:t.secondCondition,callback:function(e){t.secondCondition=e},expression:"secondCondition"}}),s("mew-checkbox",{attrs:{dense:"","class-name":"textMedium--text"},scopedSlots:t._u([{key:"contentSlot",fn:function(){return[s("span",[t._v("I have read and agreed to "),s("a",{attrs:{href:"https://staked.us/terms/",target:"_blank"}},[t._v("Staked.us")]),t._v(" terms of service. This Staking feature is provided by Staked.us, and MEW is not liable for it's services.")])]},proxy:!0}]),model:{value:t.thirdCondition,callback:function(e){t.thirdCondition=e},expression:"thirdCondition"}})],1),s("border-block",{staticClass:"mt-6 mx-md-2 text-center rounded-lg pa-6"},[1===t.stakedStep?s("div",[s("div",{class:["mx-auto",t.stakedStep1Title.error?"redPrimary--text":"textMedium--text"],staticStyle:{"max-width":"300px"}},[t._v(" "+t._s(t.stakedStep1Title.message)+" "),t.stakedStep1Title.showContactSupport?s("a",{staticClass:"cursor-pointer greenPrimary--text text-lowercase",attrs:{rel:"noopener noreferrer",href:"mailto:support@myetherwallet.com",target:"_blank"}},[t._v(" "+t._s(t.$t("common.contact-support"))+" ")]):t._e()]),s("mew-button",{staticClass:"mt-3",attrs:{"btn-size":"xlarge",title:"Prepare for staking",disabled:!t.secondCondition||!t.thirdCondition},nativeOn:{click:function(e){return t.prepareToStake.apply(null,arguments)}}})],1):t._e(),2===t.stakedStep?s("div",[s("div",{staticClass:"mew-heading-4 font-weight-medium mb-2"},[t._v(" Preparing validators ")]),s("div",{staticClass:"textMedium--text mx-auto",staticStyle:{"max-width":"300px"}},[t._v(" This usually takes ~20 seconds, in rare cases it can take up to 10 min. ")]),s("div",{staticClass:"px-5"},[s("v-progress-linear",{staticClass:"mt-4 mx-auto",staticStyle:{"max-width":"350px"},attrs:{indeterminate:"",color:"greenPrimary"}})],1)]):t._e(),3===t.stakedStep?s("div",[s("v-icon",{staticClass:"mr-2",attrs:{color:"greenPrimary"}},[t._v("mdi-check-circle")]),t._v(" Ready to stake ")],1):t._e()]),s("div",{staticClass:"mt-10 d-flex flex-column-reverse flex-md-row align-center justify-center"},[s("mew-button",{staticClass:"d-block ma-2",attrs:{"has-full-width":t.$vuetify.breakpoint.smAndDown,"btn-size":"xlarge",title:"Back","btn-style":"outline"},nativeOn:{click:function(e){return t.onBack.apply(null,arguments)}}}),s("mew-button",{staticClass:"d-block ma-2",attrs:{"has-full-width":t.$vuetify.breakpoint.smAndDown,"btn-size":"xlarge",title:t.buttonTitle,disabled:!t.readyToStake},nativeOn:{click:function(e){return t.onReadyToStake.apply(null,arguments)}}})],1)],1)])},i=[],n=(s("caad"),s("901e")),r=s.n(n),o=s("2f62"),l=s("4a2b"),d=s("ac8e"),c=s("a47c"),u=s.n(c),h=s("7f65"),m={components:{BorderBlock:()=>s.e("chunk-4d3d9ba2").then(s.bind(null,"3b13"))},props:{amount:{type:Number,default:0},eth2Address:{type:String,default:""},startProvision:{type:Function,default:()=>{}},pollingStatus:{type:Object,default:()=>{}}},data(){return{secondCondition:!1,thirdCondition:!1,readyToStake:!1,serviceFees:{},stakedStep:1,stakedStep1Title:{message:"We will prepare validators for you. After that you can confirm and stake your ETH."}}},computed:{...Object(o["c"])("external",["fiatValue"]),...Object(o["c"])("global",["network","getFiatValue"]),...Object(o["e"])("wallet",["web3"]),...Object(o["c"])("global",["gasPrice","network"]),buttonTitle(){return`Stake ${this.amount} ETH`},networkImg(){return this.network.type.icon},details(){return[{img:this.networkImg,subtitle:"Staking",title:this.amount+" ETH",desc:this.amountFiat},{img:u.a,subtitle:"Ethereum",title:"Your withdrawal address",desc:this.eth2Address,isAddress:!0}]},fees(){return[{title:"Network fee",ethValue:this.networkFees.eth,fiatValue:this.networkFees.fiat},{title:"Service fee",ethValue:this.serviceFees.eth,fiatValue:this.serviceFees.fiat},{title:"Total",ethValue:this.totalFees.eth,fiatValue:this.totalFees.fiat}]},networkFees(){const t=Object(d["a"])(this.gasPrice).value;return{eth:t,fiat:this.getFiatValue(r()(this.fiatValue).times(t))}},totalFees(){const t=new r.a(this.networkFees.eth).plus(this.serviceFees.eth).toFixed();return{eth:t,fiat:this.getFiatValue(new r.a(this.fiatValue).times(t).toFixed())}},validatorsCount(){return this.amount?new r.a(this.amount).dividedBy(32).toFixed():0},amountFiat(){return this.getFiatValue(new r.a(this.amount).times(this.fiatValue))}},watch:{pollingStatus(t){var e;t.success?(this.stakedStep+=1,this.readyToStake=!0):(this.stakedStep-=1,406===t.error.status||null!==(e=t.error.message)&&void 0!==e&&e.includes("406")?this.stakedStep1Title={message:"Oops. We donâ€™t know how you got this far without enough ETH. Please start over and check your funds.",error:!0}:this.stakedStep1Title={message:"Something went wrong. Please try again in a few minutes. If the problem persists,",error:!0,showContactSupport:!0})}},mounted(){this.getServiceFees()},methods:{async getServiceFees(){const t=h["a"].network[this.network.type.name].batchContract,e=new this.web3.eth.Contract(l["a"],t),s=await e.methods.getFees(this.amount/32).call(),a=Object(d["a"])(s).value;this.serviceFees={eth:a,fiat:this.getFiatValue(r()(this.fiatValue).times(a))}},onBack(){this.$emit("back")},prepareToStake(){this.stakedStep+=1,this.startProvision({eth2Address:this.eth2Address,count:this.validatorsCount})},onReadyToStake(){this.$emit("readyToStake")}}},p=m,v=(s("b58f"),s("2877")),f=Object(v["a"])(p,a,i,!1,null,"0f3e1b2f",null);e["default"]=f.exports},"60e0":function(t,e,s){},a47c:function(t,e,s){t.exports=s.p+"img/icon-colorful-eth.82aab93b.svg"},b58f:function(t,e,s){"use strict";s("60e0")}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-0fb173d9.3d4542fa.js.map