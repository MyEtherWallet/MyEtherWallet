(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05bf23c2"],{"165f":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loading?i("v-skeleton-loader",{staticClass:"mx-auto",attrs:{"max-width":"300",type:"avatar"}}):e._e(),e.loading?e._e():i("div",{staticClass:"d-flex align-center"},[i("v-btn",{attrs:{icon:""},on:{click:e.openNotifications}},[i("img",{class:[e.invertIcon?"make-white-svg":""],attrs:{src:n("dfaa")}})]),e.newNotificationCount>0?i("div",{staticClass:"notification-count pa-3 cursor--pointer d-flex align-center justify-center white--text error lighten2",on:{click:e.openNotifications}},[e._v(" "+e._s(e.newNotificationCount)+" ")]):e._e()],1),i("mew-overlay",{attrs:{footer:{text:"Need help?",linkTitle:"Contact support",link:"mailto:support@myetherwallet.com"},title:"Notifications","content-size":"large","show-overlay":e.isOpenNotifications,close:e.closeNotifications}},[i("v-sheet",{staticClass:"transparent",attrs:{"max-width":"735px",width:"100%"}},[i("v-sheet",{staticClass:"d-flex align-center justify-space-between mx-auto mb-6",attrs:{color:"transparent","max-width":"350px"}},[i("div",[i("v-icon",{attrs:{color:"greenPrimary",large:""}},[e._v(" mdi-circle-medium ")]),e._v(" Success ")],1),i("div",[i("v-icon",{attrs:{color:"orangePrimary",large:""}},[e._v(" mdi-circle-medium ")]),e._v(" Pending ")],1),i("div",[i("v-icon",{attrs:{color:"redPrimary",large:""}},[e._v(" mdi-circle-medium ")]),e._v(" Failed ")],1)]),e.hasNotification?i("div",{staticClass:"d-flex align-center justify-end"},[i("v-sheet",{attrs:{color:"transparent","max-width":"150px"}},[i("mew-select",{attrs:{items:e.items,"normal-dropdown":""},on:{input:e.setSelected}})],1)],1):e._e(),e._l(e.notificationsByType,(function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.notificationsByType.length>0,expression:"!loading && notificationsByType.length > 0"}],key:n,staticClass:"mt-2"},[i("mew-notification",{attrs:{notification:t.notification},nativeOn:{click:function(n){return e.markNotificationAsRead(t)}}})],1)})),i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.notificationsByType.length,expression:"notificationsByType.length === 0"}],staticClass:"pa-5 text-center"},[i("h3",{staticClass:"mb-5"},[e._v("No notifications to display for:")]),i("h3",{staticClass:"break-hash"},[e._v(e._s(e.address))])])],2)],1)],1)},a=[],s=n("5530"),o=(n("b0c0"),n("4e82"),n("d81d"),n("d3b7"),n("14d9"),n("99af"),n("fb6a"),n("4de4"),n("159b"),n("2f62")),r=n("25ed"),c=n("295b"),d=n("9901"),l=n("068e"),u=(n("caad"),n("2532"),n("c740"),n("a434"),n("3c65"),n("1b00")),m=n("9b88"),h={cannotReturnNull:"Cannot return null for non-nullable field Query.getTransactionByHash."},f=15,v={name:"HandlerNotification",data:function(){return{getEthTransfersV2:"",getTransactionsByHashes:"",newPendingTransaction:"",getTransactionByHash:"",subscribeToTxHash:"",txHash:"",initialLoad:!0,txHashes:[],ethTransfersIncoming:[]}},apollo:{getEthTransfersV2:{query:u["getEthTransfersV2"],variables:function(){return{owner:this.address,limit:f}},skip:function(){return!this.isEthNetwork||null===this.address||""===this.address},result:function(e){var t=this,n=e.data;n&&n.getEthTransfersV2.transfers&&n.getEthTransfersV2.transfers.forEach((function(e){var n=e.transfer.transactionHash;!t.txHashes.includes(n)&&t.txHashes.push(n)}))},error:function(e){Object(m["e"])(e.message,{},m["a"])}},getTransactionsByHashes:{query:u["getTransactionsByHashes"],variables:function(){return{hashes:this.txHashes}},fetchPolicy:"cache-and-networ`k`",skip:function(){return!this.isEthNetwork||0===this.txHashes.length},result:function(e){var t=e.data;t&&t.getTransactionsByHashes&&(this.ethTransfersIncoming=t.getTransactionsByHashes)},error:function(e){Object(m["e"])(e.message,{},m["a"])}},getTransactionByHash:{query:u["getTransactionByHash"],variables:function(){return{hash:this.txHash}},skip:function(){return!this.isEthNetwork||!this.txHash||""===this.txHash||null===this.txHash},update:function(e){return e.getTransactionByHash},result:function(e){var t=e.data;if(t){var n=t.getTransactionByHash;if(n.to===this.address){var i=this.ethTransfersIncoming,a=i.findIndex((function(e){if(n.hash===e.hash)return e}));a>=0?i.splice(a,1,n):i.unshift(n),this.ethTransfersIncoming=i}}},error:function(e){e.message.includes(h.cannotReturnNull)||Object(m["e"])(e.message,{},m["a"])}},$subscribe:{newPendingTransaction:{query:u["pendingTransaction"],variables:function(){return{owner:this.address}},skip:function(){return!this.isEthNetwork||""===this.address||null===this.address||this.loading},result:function(e){var t=e.data;if(t&&t.pendingTransaction){var n,i=t.pendingTransaction;(null===(n=i.to)||void 0===n?void 0:n.toLowerCase())===this.address&&(this.txHash=i.transactionHash)}},error:function(e){Object(m["e"])(e.message,{},m["a"])}},subscribeToTxHash:{query:u["transactionEvent"],variables:function(){return{hash:this.txHash}},skip:function(){return!this.isEthNetwork||!this.txHash||""===this.txHash||null===this.txHash},result:function(){var e;null===(e=this.$apollo.queries.getTransactionByHash)||void 0===e||e.refetch()},error:function(e){Object(m["e"])(e.message,{},m["a"])}}}}},k=n("8ca2"),g=n("3c5b"),p={name:"ModuleNotifications",mixins:[v],props:{invertIcon:{type:Boolean,default:!1}},data:function(){return{selected:r["b"].ALL,items:[{name:"All",value:r["b"].ALL},{name:"In",value:r["b"].IN},{name:"Out",value:r["b"].OUT},{name:"Swap",value:r["b"].SWAP}],isOpenNotifications:!1}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["c"])("notifications",["currentNotifications","txNotifications","swapNotifications"])),Object(o["c"])("global",["network","isEthNetwork"])),Object(o["e"])("wallet",["address","web3"])),{},{loading:function(){return this.$apollo.loading},swapper:function(){return new k["a"](this.web3,this.network.type.name)},outgoingTxNotifications:function(){var e=this;return this.txNotifications.map((function(t){return t.hasOwnProperty("hash")?Object(c["a"])(t,e.network):Object(d["a"])(t)})).sort(this.sortByDate)},incomingTxNotifications:function(){var e=this,t=this.address?this.address.toLowerCase():"";return this.loading?[]:this.ethTransfersIncoming.reduce((function(n,i){var a;return(null===(a=i.to)||void 0===a?void 0:a.toLowerCase())===t&&(i.type=r["b"].IN,i.status?i.read=!0:i.read=!1,i.hasOwnProperty("hash")?(i=new r["c"](i),n.push(Object(c["a"])(i,e.network))):(i=new g["a"](i),n.push(Object(d["a"])(i)))),n}),[]).sort(this.sortByDate)},allNotifications:function(){var e=this.formattedCurrentNotifications().concat(this.incomingTxNotifications);return e.sort(this.sortByDate),e.slice(0,20)},notificationsByType:function(){switch(this.selected){case r["b"].IN:return this.incomingTxNotifications.slice(0,20).sort(this.sortByDate);case r["b"].OUT:return this.outgoingTxNotifications.slice(0,20).sort(this.sortByDate);case r["b"].SWAP:return this.swapNotifications.slice(0,20).sort(this.sortByDate);default:return this.allNotifications}},newNotificationCount:function(){var e=this.allNotifications.filter((function(e){if(!e.read)return e}));return e.length},hasNotification:function(){return this.allNotifications.length>0}}),watch:{currentNotifications:{handler:function(e){var t=this;e.forEach((function(e){t.checkAndSetNotificationStatus(e)}))},deep:!0}},mounted:function(){var e=this;l["a"].$on("openNotifications",(function(){e.openNotifications()})),e.currentNotifications.forEach((function(t){e.checkAndSetNotificationStatus(t)}))},beforeDestroy:function(){l["a"].$off("openNotifications")},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("notifications",["updateNotification"])),{},{setSelected:function(e){this.selected=e.value},sortByDate:function(e,t){return new Date(t.date)-new Date(e.date)},formattedCurrentNotifications:function(){var e=this;return this.currentNotifications.map((function(t){return t.hasOwnProperty("hash")?Object(c["a"])(t,e.network):Object(d["a"])(t)}))},checkAndSetNotificationStatus:function(e){var t=this,n=e.type;e.status&&(n===r["b"].SWAP&&e.status.toLowerCase()===r["a"].PENDING&&e.checkSwapStatus(this.swapper),n===r["b"].OUT&&e.status.toLowerCase()===r["a"].PENDING&&this.web3.eth.getTransactionReceipt(e.hash).then((function(n){n&&(e.status=n.status?r["a"].SUCCESS:r["a"].FAILED,t.updateNotification(e))})))},markNotificationAsRead:function(e){var t=this;e.read||e.markAsRead().then((function(){var n=e.type.toLowerCase();n===r["b"].OUT||n===r["b"].SWAP?t.updateNotification(e):e.read=!0}))},openNotifications:function(){this.isOpenNotifications=!0},closeNotifications:function(){this.isOpenNotifications=!1}})},N=p,b=(n("831a"),n("2877")),y=Object(b["a"])(N,i,a,!1,null,"2aeaed7c",null);t["default"]=y.exports},"1b00":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEthTransfersV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextKey"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getEthTransfersV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"OUTGOING"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"nextKey"},value:{kind:"Variable",name:{kind:"Name",value:"nextKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transfers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transfer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transactionHash"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"nextKey"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getTransactionsByHashes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hashes"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getTransactionsByHashes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hashes"},value:{kind:"Variable",name:{kind:"Name",value:"hashes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gas"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gasPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gasUsed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hash"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"input"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getTransactionByHash"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hash"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getTransactionByHash"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"Variable",name:{kind:"Name",value:"hash"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gas"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gasPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gasUsed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hash"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"input"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"pendingTransaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pendingTransaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transactionHash"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"transactionEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hash"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transactionEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"Variable",name:{kind:"Name",value:"hash"}}}],directives:[]}]}}],loc:{start:0,end:897}};n.loc.source={body:"query getEthTransfersV2($owner: String!, $limit: Int, $nextKey: String) {\n  getEthTransfersV2(\n    owner: $owner\n    direction: OUTGOING\n    limit: $limit\n    nextKey: $nextKey\n  ) {\n    transfers {\n      transfer {\n        transactionHash\n      }\n    }\n    nextKey\n  }\n}\n\nquery getTransactionsByHashes($hashes: [String]!) {\n  getTransactionsByHashes(hashes: $hashes) {\n    from\n    gas\n    gasPrice\n    gasUsed\n    hash\n    timestamp\n    nonce\n    to\n    value\n    input\n    status\n  }\n}\n\nquery getTransactionByHash($hash: String!) {\n  getTransactionByHash(hash: $hash) {\n    from\n    gas\n    gasPrice\n    gasUsed\n    hash\n    timestamp\n    nonce\n    to\n    value\n    input\n    status\n  }\n}\n\nsubscription pendingTransaction($owner: String) {\n  pendingTransaction(owner: $owner) {\n    transactionHash\n    to\n  }\n}\n\nsubscription transactionEvent($hash: String!) {\n  transactionEvent(hash: $hash)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var a={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function o(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,o=new Set,r=new Set;i.forEach((function(e){r.add(e)}));while(r.size>0){var c=r;r=new Set,c.forEach((function(e){if(!o.has(e)){o.add(e);var t=a[e]||new Set;t.forEach((function(e){r.add(e)}))}}))}return o.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),a[e.name.value]=t}}))})(),e.exports=n,e.exports["getEthTransfersV2"]=o(n,"getEthTransfersV2"),e.exports["getTransactionsByHashes"]=o(n,"getTransactionsByHashes"),e.exports["getTransactionByHash"]=o(n,"getTransactionByHash"),e.exports["pendingTransaction"]=o(n,"pendingTransaction"),e.exports["transactionEvent"]=o(n,"transactionEvent")},"216d":function(e,t,n){},"295b":function(e,t,n){"use strict";n("ac1f"),n("5319"),n("d3b7"),n("25f0"),n("99af");var i=n("eb5b"),a=n("5ba3"),s=n("ac8e"),o=function(e,t){var n,o,r=t.type.isEthVMSupported,c=r.supported?r.blockExplorerTX:t.type.blockExplorerTX,d={txHash:{value:e.hash?e.hash:"",string:"Transaction Hash",link:"".concat(c?c.replace("[[txHash]]",e.hash):"")},gasPrice:{value:"".concat(Object(s["e"])(Object(a["fromWei"])(e.gasPrice,"gwei"))," Gwei"),string:"Gas Price"},gasLimit:{value:Object(s["e"])(Object(a["toBN"])(e.gas).toString()),string:"Gas Limit"},total:{value:"".concat(Object(s["c"])(Object(a["fromWei"])(e.transactionFee,"ether")).value," ").concat(t.type.currencyName),string:"Total Transaction fee"},to:{value:e.toTxData&&e.toTxData.to?e.toTxData.to:e.to,string:"To"},from:{value:e.from,string:"From"},amount:{value:"".concat(Object(s["c"])(Object(a["fromWei"])(e.value,"ether")).value," ").concat(t.type.currencyName),string:"Amount"},timestamp:{value:Object(i["a"])(Object(a["toBN"])(e.date).toNumber()),string:"Time"},status:{value:null===(n=e.status)||void 0===n?void 0:n.toLowerCase(),string:"Status"},type:{value:null===(o=e.type)||void 0===o?void 0:o.toLowerCase(),string:e.type},read:e.read,toObj:e.toTxData,fromObj:e.fromTxData};return d.toObj&&d.toObj.amount&&(d.toObj.amount=Object(s["c"])(d.toObj.amount).value),d.fromObj&&d.fromObj.amount&&(d.fromObj.amount=Object(s["c"])(d.fromObj.amount).value),e.notification=d,e};t["a"]=o},"831a":function(e,t,n){"use strict";n("216d")},9901:function(e,t,n){"use strict";var i=n("eb5b"),a=n("5ba3"),s=function(e){var t,n,s={to:{value:e.toTxData&&e.toTxData.to?e.toTxData.to:e.to,string:"To"},from:{value:e.from,string:"From"},timestamp:{value:Object(i["a"])(Object(a["toBN"])(e.date).toNumber()),string:"Time"},status:{value:null===(t=e.status)||void 0===t?void 0:t.toLowerCase(),string:"Status"},type:{value:null===(n=e.type)||void 0===n?void 0:n.toLowerCase(),string:e.type},read:e.read,toObj:e.toTxData,fromObj:e.fromTxData};return e.notification=s,e};t["a"]=s},dfaa:function(e,t,n){e.exports=n.p+"img/icon-notifications.09e377be.svg"},eb5b:function(e,t,n){"use strict";var i=31536e3,a=2592e3,s=86400,o=3600,r=60;t["a"]=function(e){var t=new Date(e),n=Math.floor((new Date-t)/1e3),c=Math.floor(n/i),d=Math.floor(n/a),l=Math.floor(n/s),u=Math.floor(n/o),m=Math.floor(n/r);return c>1?"".concat(c," years ago"):d>1?"".concat(d," months ago"):l>1?"".concat(l," days ago"):u>1?"".concat(u," hours ago"):m>1?"".concat(m," minutes ago"):"".concat(Math.floor(n)," seconds ago")}}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-05bf23c2.1aa1ffc1.js.map