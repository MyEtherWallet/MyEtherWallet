(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-252ef923"],{"03c0":function(t,e,a){},"0c2f":function(t,e,a){},"130b":function(t,e,a){"use strict";var n=a("0c2f"),i=a.n(n);i.a},"148d":function(t,e,a){},"212e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-maker"},[a("deposit-modal",{ref:"deposit",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{lockEth:t.lockEth}}),a("generate-modal",{ref:"generate",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{drawDai:t.drawDai}}),a("withdraw-modal",{ref:"withdraw",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,freeEth:t.freeEth}}),a("payback-modal",{ref:"payback",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,wipeDai:t.wipeDai}}),a("close-cdp-modal",{ref:"closeCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,closeCdp:t.closeCdp}}),a("move-cdp-modal",{ref:"moveCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"dest-address-has-proxy":t.destAddressHasProxy,"dest-address-proxy":t.destAddressProxy,"tokens-with-balance":t.tokensWithBalance},on:{moveCdp:t.moveCdp,checkForProxy:t.checkIfDestAddressHasProxy}}),a("back-button",{attrs:{path:"/interface/dapps/"}},[a("div",{staticClass:"back-bar-container"},[t.showMoveOrClose?a("div",{staticClass:"header-buttons-container"},[a("div",{staticClass:"inner-container"},[a("button",{staticClass:"move-btn",on:{click:t.showMove}},[a("h4",[t._v(t._s(t.$t("dappsMaker.move-title")))])]),!t.hasProxy&&!t.onCreate||t.showCdpMigrateButtons?t._e():a("div",[a("button",{staticClass:"close-btn",on:{click:t.showClose}},[a("h4",[t._v(t._s(t.$t("dappsMaker.close-title")))])])])])]):t._e()])]),t.makerActive?a("div",{staticClass:"buttons-container"},[t.showCreateProxy?a("div",[a("div",{staticClass:"dapps-button",on:{click:t.buildProxy}},[a("h4",[t._v(t._s(t.$t("dappsMaker.create-proxy")))])])]):t._e(),t.showCreateProxy?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.proxy-instructions"))+" ")]):t._e(),t.showCdpMigrateButtons?a("div",t._l(t.cdpsWithoutProxy,(function(e,n){return a("div",{key:n+e},[a("div",{staticClass:"dapps-button"},[a("div",{on:{click:function(a){return t.migrateCdpExternal(e)}}},[a("h4",[t._v(" "+t._s(t.$t("dappsMaker.migrate-cdp",{value:e}))+" ")])])])])})),0):t._e(),t.showCdpMigrateButtons?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.migrate-instructions"))+" ")]):t._e()]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive,expression:"makerActive"}],staticClass:"buttons-container"},[t.showCreateProxy&&t.cdpsWithoutProxy.length>1?a("div",t._l(t.cdpsWithoutProxy,(function(e,n){return a("div",{key:n+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openMigrate(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive&&t.listCdps,expression:"makerActive && listCdps"}],staticClass:"buttons-container"},t._l(t.cdps,(function(e,n){return a("div",{key:n+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openManage(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0),a("router-view",{attrs:{"build-empty":t.buildEmpty,"maker-active":t.makerActive,"eth-price":t.ethPrice,"peth-price":t.pethPrice,"peth-min":t.pethMin,"weth-to-peth-ratio":t.wethToPethRatio,"liquidation-penalty":t.liquidationPenalty,"stability-fee":t.stabilityFee,"liquidation-ratio":t.liquidationRatio,"price-service":t.priceService,"cdp-service":t.cdpService,"proxy-service":t.proxyService,cdps:t.cdps,"cdp-details-loaded":t.cdpDetailsLoaded,"tokens-with-balance":t.tokensWithBalance,"migration-in-progress":t.migrationInProgress,"open-close-modal":t.openCloseModal,"open-move-modal":t.openMoveModal,"values-updated":t.valuesUpdated,values:t.activeValues,"get-cdp":t.getCdp,"has-cdp":t.hasCdp,"loading-message1":t.$t("dappsMaker.initial-loading-one"),"loading-message2":t.$t("dappsMaker.initial-loading-two")},on:{activeCdpId:t.setupCdpManage,cdpOpened:t.addCdp,cdpClosed:t.removeCdp,modalHidden:t.modalHidden,managerUpdate:t.doUpdate,showWithdraw:t.showWithdraw,showPayback:t.showPayback,showGenerate:t.showGenerate,showDeposit:t.showDeposit,migrateCdp:t.migrateCdpExternal}})],1)},i=[],r=(a("99af"),a("4de4"),a("4160"),a("caad"),a("b0c0"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("d0ff")),s=(a("96cf"),a("c964")),o=a("fc11"),c=a("f3f3"),u=a("2f62"),l=a("572c"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.close-title"),centered:"",static:"",lazy:"","hide-footer":""}},[a("div",{staticClass:"contents"},[t.enoughMkr?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-mkr-close"))+" ")]),t.enoughDai?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-dai-close"))+" ")]),a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.closing-notice"))+" ")]),a("div",{staticClass:"value-table-container"},[a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughMkr,expression:"!enoughMkr"}],staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.dai-balance")))])]),a("p",[a("b",[t._v(t._s(t.daiBalance)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughDai,expression:"!enoughDai"}],staticClass:"get-mkr",on:{click:function(e){return t.getDai()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-dai"))+" ")])]),a("div",{staticClass:"value-table other-values"},[a("div",{staticClass:"value-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("div",{staticClass:"value-block"},[a("p",[t._v(" "+t._s(t.$t("dappsMaker.stability-fee-in-mkr",{value:t.displayFixedValue(t.displayPercentValue(t.values.stabilityFee))}))+" ")]),a("p",[a("b",[t._v(t._s(t.getfeeOwed)+" "+t._s(t.$t("dappsMaker.mkr")))])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-dai"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-maker"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.close"),buttonStyle:"green",fullWidth:!0,noMinWidth:!0},"button-disabled":!t.canClose,"click-function":t.closeCdp}})],1),a("help-center-button")],1)])],1)},p=[],h=(a("7db0"),a("b680"),a("a8f0")),m=a("76ed"),v=a("901e"),f=a.n(v),b=function(t){return new f.a(t)},y={components:{"help-center-button":m["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},makerManager:{type:Object,default:function(){return{}}}},data:function(){return{amount:0,amountEth:0,amountDai:0,govFee:0,closable:!1,modalDetailInformation:!1,textValues:{},mkrToken:{},daiToken:{},cancelButton:{title:"Cancel",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},closeButton:{title:"Close",buttonStyle:"green",fullWidth:!0,noMinWidth:!0},suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{getfeeOwed:function(){var t=this.values.governanceFeeOwed;return this.displayFixedValue(t,8)},newCollateralRatio:function(){return this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return!this.values||b(this.values.collatRatio).gte(2)},newLiquidationPrice:function(){return this.values?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},enoughMkr:function(){var t=this.values.governanceFeeOwed;return!!t&&b(this.mkrBalance).minus(t).gte(0)},enoughDai:function(){if(this.values.zeroDebt)return!0;var t=this.values.debtValue;return!!t&&b(this.daiBalance).minus(t).gte(0)},needsDaiApprove:function(){return!(!b(this.values.proxyAllowanceDai).gt(0)||!b(this.values.proxyAllowanceDai).lte(this.values.debtValue))||b(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!b(this.values.proxyAllowanceMkr).gt(0)||!b(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||b(this.values.proxyAllowanceMkr).eq(0)},canClose:function(){return this.enoughMkr&&this.enoughDai&&!this.needsDaiApprove&&!this.needsMkrApprove}}),watch:{tokensWithBalance:function(){this.getBalances()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.destAddress=t.account.address,t.getBalances(),t.$refs.modal.$on("shown",Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getBalances();case 1:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})))()},methods:{closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},closeCdp:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.delayCloseModal(),t.$emit("closeCdp");case 2:case"end":return e.stop()}}),e)})))()},displayPercentValue:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return f.a.isBigNumber(t)||(t=new f.a(t)),t.toFixed(e,f.a.ROUND_DOWN).toString()},maxDai:function(){this.amount=this.values.maxDai},currentDai:function(){this.amount=this.values.debtValue},getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"DAI"===t.symbol}))},getMkr:function(){var t=this,e=this.getfeeOwed;b(this.mkrBalance).lt(e)&&(this.suppliedToAmount=b(e).minus(b(this.mkrBalance)).plus(b(e).times(.01)).toNumber(),b(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$nextTick((function(){t.$refs.swapWidget.$refs.modal.show()})))},getDai:function(){var t=this.values.debtValue;b(this.daiBalance).lt(t)&&(this.suppliedToAmount=b(t).minus(b(this.daiBalance)).toNumber(),b(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"DAI",name:"Dai"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},approveDai:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("approveDai");case 1:case"end":return e.stop()}}),e)})))()},approveMkr:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("approveMkr");case 1:case"end":return e.stop()}}),e)})))()}}},g=y,k=(a("b459"),a("2877")),x=Object(k["a"])(g,d,p,!1,null,"3d51ce30",null),C=x.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.move-title"),"hide-footer":"",centered:"",static:"",lazy:""}},[a("div",{staticClass:"modal-content"},[a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.move-notice"))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}])}),a("div",{staticClass:"input-container"},[a("label",[t._v(t._s(t.$t("dappsMaker.move-question")))]),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),a("div",[t.destAddressHasProxy?a("div",[a("p",[t._v(" "+t._s(t.$t("dappsMaker.proxy-address",{value:t.destAddressProxy}))+" ")]),t._v(" "+t._s(t.$t("dappsMaker.move-with-proxy"))+" ")]):t._e(),t.destAddressHasProxy?t._e():a("div",[t._v(" "+t._s(t.$t("dappsMaker.move-without-proxy"))+" ")])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0,fullWidth:!0},"button-disabled":!t.btnActive,"click-function":t.moveCdp}})],1),a("help-center-button")],1)])],1)},_=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check-box"},[a("label",{staticClass:"check-box-container"},[a("input",{attrs:{type:"checkbox"},on:{click:t.checkBoxClicked}}),a("span",{staticClass:"checkmark"}),t._t("terms")],2)])},R=[],M={data:function(){return{checkboxChecked:!1}},methods:{checkBoxClicked:function(){this.checkboxChecked=!this.checkboxChecked,this.$emit("changeStatus",this.checkboxChecked)}}},D=M,A=(a("7c0e"),Object(k["a"])(D,P,R,!1,null,"74d90e30",null)),$=A.exports,S=a("ce96"),E={components:{"check-box":$,"help-center-button":m["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},destAddressHasProxy:{type:Boolean,default:!1},destAddressProxy:{type:String,default:""}},data:function(){return{address:"",amountEth:0,amountDai:0,govFee:0,modalDetailInformation:!1,checkBoxChecked:!1,textValues:{},mkrToken:{}}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{btnActive:function(){return S["d"].isValidETHAddress(this.address)&&this.checkBoxChecked}}),watch:{address:function(t){S["d"].isValidETHAddress(t)&&this.$emit("checkForProxy",t)}},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.address=""}))},methods:{closeCdp:function(){this.activeCdp.closeCdp()},checkBoxClicked:function(){this.checkBoxChecked=!this.checkBoxChecked},displayPercentValue:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return f.a.isBigNumber(t)||(t=new f.a(t)),t.toFixed(e,f.a.ROUND_DOWN).toString()},moveCdp:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:S["d"].isValidETHAddress(t.address)&&(t.$emit("moveCdp",t.address),t.closeModal());case 1:case"end":return e.stop()}}),e)})))()},closeModal:function(){this.$refs.modal.hide()}}},O=E,B=(a("f09a"),Object(k["a"])(O,w,_,!1,null,"62b4dd78",null)),j=B.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.generate-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("div",{staticClass:"inputs"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.generate-question"))+" ")]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"total"},[a("span",[t._v(t._s(t.$t("dappsMaker.total")))]),t._v(" "+t._s(t.newTotal)+" "+t._s(t.$t("dappsMaker.dai"))+" ")]),a("p",{staticClass:"max",on:{click:t.maxDai}},[t._v(" "+t._s(t.$t("dappsMaker.max-available"))+" ")])]),a("div",{class:["input-box",t.allOk?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"input-unit"},[t._v(t._s(t.$t("dappsMaker.dai")))])]),a("div",{staticClass:"sub-text"},[t.canGenerateDaiAmount?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.above-max-dai"))+" ")]),a("p",[t._v(" "+t._s(t.$t("dappsMaker.collateral-ratio-val",{value:t.newCollateralRatio}))+" ")])])]),a("expanding-option",{attrs:{title:"Details"}},[a("div",{staticClass:"detail-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-generate-available")))]),a("p",[a("b",[t._v(" "+t._s(t.values.maxDai?t.displayFixedValue(t.values.maxDai):0)+" ")]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.newCollateralRatio)+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.newCollateralRatio}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.generate"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},q=[],T=a("70c1"),F=a.n(T),W=a("1768"),I=a("c16c"),U=function(t){return new f.a(t)},N={components:{"help-center-button":m["a"],"check-box":$,"expanding-option":W["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!U(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},showWarning:function(){return!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass},newTotal:function(){return U(this.values.debtValue).plus(this.amount)},hasEnoughEth:function(){if(this.canCompute){var t=F.a.fromWei(this.account.balance,"ether");return U(this.amount).lte(U(t))}return!0},canGenerateDaiAmount:function(){return!(this.canCompute&&!U(this.amount).isNaN())||U(this.amount).lte(U(this.values.maxDai))},canProceed:function(){return!!this.canCompute&&(!U(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canGenerateDaiAmount||!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(U(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute||this.values?this.displayFixedPercent(this.calcCollateralRatio):"--"},newCollateralRatioSafe:function(){return!this.canCompute||this.calcCollateralRatio.gte(2)},newCollateralRatioInvalid:function(){return!this.canCompute||this.calcCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceDaiChg(U(this.values.debtValue).plus(this.amount)):this.values?this.values.liquidationPrice:0}}),methods:{submitBtn:function(){this.canProceed&&this.drawDai()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:I["e"],displayFixedValue:I["d"],displayFixedPercent:I["c"],notZero:function(t){return U(t).gt(0)},maxDai:function(){this.amount=U(this.values.maxDai).minus(U(this.values.maxDai).times(.01)),this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},drawDai:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:U(t.amount).gte(0)&&(t.delayCloseModal(),t.newCollateralRatioSafe?t.$emit("drawDai",[t.amount,null]):t.$emit("drawDai",[t.amount,t.riskyBypass]));case 1:case"end":return e.stop()}}),e)})))()},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},L=N,H=(a("9441"),Object(k["a"])(L,V,q,!1,null,"10604b53",null)),z=H.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.deposit-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.deposit-question"))+" ")]),a("div",{class:["input-box",t.hasEnoughEth?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.hasEnoughEth?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.notEnoughEth"))+" ")]),a("div",{staticClass:"peth"},[a("p",[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("common.currency.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("div",{staticClass:"detail-info"},[a("div",{staticClass:"info"},[a("h4",[t._v(t._s(t.$t("dappsMaker.detail-info")))]),a("div",{staticClass:"sliding-switch-white"},[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.modalDetailInformation=!t.modalDetailInformation}}}),a("span",{staticClass:"slider round"})])])]),a("div",{staticClass:"expended-info",class:t.modalDetailInformation&&"expended-info-open"},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.currently-deposited")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.values.ethCollateral,5)))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.submit"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},K=[],Q=function(t){return new f.a(t)},Z={components:{"help-center-button":m["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!Q(this.amount).lte(0)},hasEnoughEth:function(){if(this.amount||""!==this.amount){var t=F.a.fromWei(this.account.balance,"ether");return Q(this.amount).lte(Q(t))}return!0},canWithdrawEthAmount:function(){return!(!this.amount&&""===this.amount)&&Q(this.amount).lte(Q(this.values.ethCollateral))},canProceed:function(){if(Q(this.amount).lte(0))return!1;var t=Q(this.newCollateralRatio),e=t.gt(1.5)||t.eq(0);return this.hasEnoughEth&&(e||this.riskyBypass)},newCollateralRatio:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(Q(this.values.ethCollateral).plus(this.amount)):this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(Q(this.values.ethCollateral).plus(this.amount)).gte(2):!this.values||Q(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(Q(this.values.ethCollateral).plus(this.amount)).lte(1.5):!this.values||Q(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values&&this.amount>0?this.calcLiquidationPriceEthChg(Q(this.values.ethCollateral).plus(Q(this.amount))):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.lockEth()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:I["e"],displayFixedValue:I["d"],notZero:function(t){return Q(t).gt(0)},currentDai:function(){this.amount=this.values.debtValue},lockEth:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Q(t.amount).gte(0)&&(t.delayCloseModal(),t.$emit("lockEth",t.amount));case 1:case"end":return e.stop()}}),e)})))()},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},J=Z,Y=(a("394f"),Object(k["a"])(J,G,K,!1,null,"64b38325",null)),X=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.withdraw-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("dappsMaker.withdraw-notice"))+" ")]),a("label",[t._v(" "+t._s(t.$t("dappsMaker.withdraw-question")))]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"max-withdraw",on:{click:t.maxWithdraw}},[t._v(" "+t._s(t.$t("dappsMaker.max-available"))+" ")])]),a("div",{class:["input-box",t.newCollateralRatioSafe?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.canWithdrawEthNotice?a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.over-max-withdraw"))+" ")]):t._e(),a("div",{staticClass:"peth"},[a("p",{staticClass:"peth-value"},[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("dappsMaker.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-available")))]),a("p",[a("b",[t._v(t._s(t.values.maxDai?t.displayFixedValue(t.values.maxEthDraw,5):0))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio))}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},et=[],at=function(t){return new f.a(t)},nt={components:{"help-center-button":m["a"],"check-box":$,"expanding-option":W["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!at(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},canWithdrawEthNotice:function(){return!!this.amountPresent&&!at(this.amount).lte(at(this.values.maxEthDraw))},canWithdrawEthAmount:function(){return!!this.amountPresent&&at(this.amount).lte(at(this.values.ethCollateral))},canProceed:function(){return!!this.amountPresent&&(!at(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canWithdrawEthAmount||!this.newCollateralRatioInvalid&&this.canWithdrawEthAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(at(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute?this.calcCollatRatioEthChg(at(this.values.ethCollateral).minus(this.amount)):this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return!this.canCompute||(!!this.values.zeroDebt||this.newCollateralRatio.gte(2))},newCollateralRatioInvalid:function(){return!this.canCompute||!this.values.zeroDebt&&this.newCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceEthChg(at(this.values.ethCollateral).minus(this.amount)):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0})),this.$refs.modal.$on("hidden",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.freeEth()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:I["e"],displayFixedValue:I["d"],notZero:function(t){return at(t).gt(0)},maxWithdraw:function(){this.amount=this.values.maxEthDraw,this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},freeEth:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:at(t.amount).gte(0)&&(t.delayCloseModal(),t.newCollateralRatioSafe?t.$emit("freeEth",[t.amount,null]):t.$emit("freeEth",[t.amount,t.riskyBypass]));case 1:case"end":return e.stop()}}),e)})))()},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},it=nt,rt=(a("130b"),Object(k["a"])(it,tt,et,!1,null,"1738db86",null)),st=rt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.payback-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("p",{staticClass:"top-message"},[t._v(" "+t._s(t.$t("dappsMaker.payback-notice"))+" ")]),t.hasEnoughMkr?t._e():a("div",[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"input-container"},[a("div",{staticClass:"top-buttons"},[a("p",{on:{click:t.currentDai}},[t._v(t._s(t.$t("dappsMaker.max-available")))])]),a("div",{class:["dai-amount",t.hasEnoughDai?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"floating-text"},[t._v(t._s(t.$t("dappsMaker.dai")))])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("ul",{staticClass:"details"},[a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue?t.displayFixedValue(t.values.debtValue,3):0))]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.stability-fee-owed")))]),a("p",[a("b",[t._v(t._s(t.values.governanceFeeOwed))]),t._v(" "+t._s(t.$t("dappsMaker.mkr"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-dai"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-maker"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0,fullWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0,fullWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},ct=[],ut=function(t){return new f.a(t)},lt={components:{"help-center-button":m["a"],"expanding-option":W["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,mkrToken:{},daiToken:{},riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!ut(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},hasEnoughEth:function(){if(this.canCompute){var t=F.a.fromWei(this.account.balance,"ether");return ut(this.amount).lte(ut(t))}return!0},paybackFee:function(){return this.canCompute?ut(this.amount).div(this.values.debtValue).times(this.values.governanceFeeOwed):0},hasEnoughMkr:function(){return!this.canCompute||ut(this.mkrBalance).gte(ut(this.paybackFee))},hasEnoughDai:function(){return!this.canCompute||ut(this.amount).lte(ut(this.daiBalance))},canWithdrawEthAmount:function(){return!!this.canCompute&&ut(this.amount).lte(ut(this.values.ethCollateral))},canGenerateDaiAmount:function(){return!this.canCompute||ut(this.amount).lte(ut(this.values.maxDai))},canProceed:function(){return this.hasEnoughDai},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(ut(this.values.debtValue).minus(this.amount)):this.values?this.values.collateralRatio:"--"},newCollateralRatio:function(){return this.amount>0?this.calcCollateralRatio:this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new f.a(9e-6))||this.calcCollateralRatio.gte(2):!this.values||ut(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new f.a(9e-6))||this.calcCollateralRatio.gte(1.5):!this.values||ut(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values.debtValue&&this.amount>0?this.calcLiquidationPriceDaiChg(ut(this.values.debtValue).minus(this.amount)):this.values.liquidationPrice?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},needsDaiApprove:function(){return!(!ut(this.values.proxyAllowanceDai).gt(0)||!ut(this.values.proxyAllowanceDai).lt(this.values.debtValue))||ut(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!ut(this.values.proxyAllowanceMkr).gt(0)||!ut(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||ut(this.values.proxyAllowanceMkr).eq(0)}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0,t.getBalances()}))},methods:{submitBtn:function(){this.canProceed&&this.wipeDai()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:I["e"],displayFixedValue:I["d"],notZero:function(t){return ut(t).gt(0)},maxDai:function(){this.amount=ut(this.values.maxDai).minus(ut(this.values.maxDai).times(.01))},currentDai:function(){this.amount=this.values.debtValue},wipeDai:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ut(t.amount).gte(0)&&(t.delayCloseModal(),ut(t.amount).gt(t.values.debtValue)?t.$emit("wipeDai",t.values.debtValue):t.$emit("wipeDai",t.amount));case 1:case"end":return e.stop()}}),e)})))()},getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"SAI"===t.symbol}))},getMkr:function(){var t=this.paybackFee;ut(this.mkrBalance).lt(t)&&(this.suppliedToAmount=ut(t).minus(ut(this.mkrBalance)).plus(ut(t).times(.01)).toNumber(),ut(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},approveDai:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("approveDai");case 1:case"end":return e.stop()}}),e)})))()},approveMkr:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("approveMkr");case 1:case"end":return e.stop()}}),e)})))()}}},dt=lt,pt=(a("d4e0"),Object(k["a"])(dt,ot,ct,!1,null,"aba123ba",null)),ht=pt.exports,mt=a("a7ac"),vt=a.n(mt),ft=a("276c"),bt=a("e954"),yt=a("9c3d"),gt=a("5e71");a("a15b"),a("fb6a"),a("ace4"),a("ac1f"),a("466d"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");function kt(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(t,e))}),t}function xt(t){if(!t||parseInt(t.length)!=t.length||"string"===typeof t)return!1;for(var e=0;e<t.length;e++){var a=t[e];if(a<0||a>=256||parseInt(a)!=a)return!1}return!0}function Ct(t){if(t&&t.toHexString&&(t=t.toHexString()),_t(t)){t=t.substring(2),t.length%2&&(t="0"+t);for(var e=[],a=0;a<t.length;a+=2)e.push(parseInt(t.substr(a,2),16));return kt(new Uint8Array(e))}if(xt(t))return kt(new Uint8Array(t))}function wt(t,e){if(t=Ct(t),e<t.length)throw new Error("cannot pad");var a=new Uint8Array(e);return a.set(t,e-t.length),kt(a)}function _t(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}var Pt="0123456789abcdef";function Rt(t){if(t&&t.toHexString)return t.toHexString();if("number"===typeof t){var e="";while(t)e=Pt[15&t]+e,t=parseInt(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(_t(t))return t.length%2&&(t="0x0"+t.substring(2)),t;if(xt(t)){for(var a=[],n=0;n<t.length;n++){var i=t[n];a.push(Pt[(240&i)>>4]+Pt[15&i])}return"0x"+a.join("")}}var Mt=a("ce3b"),Dt=vt.a.MKR,At=vt.a.DAI,$t=vt.a.ETH,St=function(t){return new f.a(t)},Et=function(){function t(e,a,n,i){Object(ft["a"])(this,t),this.cdpId=e,this.cdp={},this.web3=a||{},this.ready=!1,this.doUpdate=0,this.cdps=[],this.noProxy=i.noProxy||!1,this.services=n||null,this.needsUpdate=!1,this.closing=!1,this.opening=!1,this.migrated=!1,this.migrateCdpActive=!1,this.migrateCdpStage=0,this._liqPrice=St(0),this.isSafe=!1,this.debtValue=St(0),this._collatRatio=0,this.ethCollateral=St(0),this.pethCollateral=St(0),this._usdCollateral=St(0),this._governanceFee=St(0)}return Object(bt["a"])(t,[{key:"init",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:this.cdpId,t.next=3,this.updateValues(e);case 3:return t.next=5,this.cdpService.getGovernanceFee(this.cdpId,Dt);case 5:return this._governanceFee=t.sent.toBigNumber(),this.ready=!0,t.abrupt("return",this);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateValues",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=n.length>0&&void 0!==n[0]?n[0]:this.cdpId;try{this.byte32Id=Rt(wt(this.web3.utils.numberToHex(this.cdpId),32))}catch(i){console.error(i)}return t.next=4,this.services.getProxy();case 4:if(this._proxyAddress=t.sent,this.noProxy=null===this._proxyAddress,!this._proxyAddress){t.next=12;break}return t.next=9,this.services.getCdp(e,this._proxyAddress);case 9:this.cdp=t.sent,t.next=15;break;case 12:return t.next=14,this.services.getCdp(e,!1);case 14:this.cdp=t.sent;case 15:return t.next=17,this.cdp.getLiquidationPrice();case 17:return a=t.sent,this._liqPrice=a.toBigNumber().toFixed(2),t.next=21,this.cdp.isSafe();case 21:return this.isSafe=t.sent,t.next=24,this.cdp.getDebtValue();case 24:return this.debtValue=t.sent.toBigNumber(),t.next=27,this.cdp.getCollateralizationRatio();case 27:return this._collatRatio=t.sent,t.next=30,this.cdp.getCollateralValue();case 30:return this.ethCollateral=t.sent.toBigNumber(),t.next=33,this.cdp.getCollateralValue(vt.a.PETH);case 33:return this.pethCollateral=t.sent.toBigNumber(),t.next=36,this.cdp.getCollateralValue(vt.a.USD);case 36:this._usdCollateral=t.sent.toBigNumber();case 37:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.migrated){t.next=8;break}return t.next=3,this.proxyService.currentProxy();case 3:if(e=t.sent,!e){t.next=8;break}return this.migrated=!1,t.next=8,this.cdpService.give(this.cdpId,this._proxyAddress);case 8:if(!this.needsUpdate){t.next=15;break}return this.opening=!1,this.needsUpdate=!1,t.next=13,this.updateValues(this.cdpId);case 13:return this.doUpdate++,t.abrupt("return",this);case 15:return t.abrupt("return",this);case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getProxy",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.services.getProxy();case 2:this._proxyAddress=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"migrateCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:if(e=t.sent,e){t.next=10;break}return this.needsUpdate=!0,t.next=7,this.proxyService.ensureProxy();case 7:return t.abrupt("return",t.sent);case 10:if(!this.needToFinishMigrating){t.next=14;break}return this.needsUpdate=!0,t.next=14,this.cdpService.give(this.cdpId,this._proxyAddress);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"openCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e<=0)){t.next=2;break}return t.abrupt("return",0);case 2:if(this.hasProxy){t.next=10;break}return this.opening=!0,this.needsUpdate=!0,t.next=7,this.cdpService.openProxyCdpLockEthAndDrawDai(e,a,null);case 7:n=t.sent,t.next=15;break;case 10:return this.opening=!0,this.needsUpdate=!0,t.next=14,this.cdpService.openProxyCdpLockEthAndDrawDai(e,a,this.proxyAddress);case 14:n=t.sent;case 15:return t.abrupt("return",n.id);case 16:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"lockEth",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.noProxy){t.next=3;break}return t.abrupt("return");case 3:return this.needsUpdate=!0,t.next=6,this.cdpService.lockEthProxy(this._proxyAddress,this.cdpId,e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawDai",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.calcCollatRatio(this.ethCollateral,this.debtValue.plus(t)).gt(2)||e)try{if(this.noProxy)return;this.needsUpdate=!0,this.cdpService.drawDaiProxy(this._proxyAddress,this.cdpId,t)}catch(a){console.error(a)}}},{key:"freeEth",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,s,o,c,u,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=l.length>1&&void 0!==l[1]&&l[1],!(this.debtValue.eq(0)||this.calcCollatRatio(this.ethCollateral.minus(e),this.debtValue).gt(1.5)||a)){t.next=20;break}if(t.prev=2,!this.noProxy){t.next=5;break}return t.abrupt("return");case 5:return this.needsUpdate=!0,n={},n.ETH=Object(Mt["createCurrency"])("ETH"),i=Object(Mt["createGetCurrency"])(n),r="0x526af336d614ade5cc252a407062b8861af998f5",s=new this.web3.eth.Contract(yt,r),o=s.methods.free(this.cdpService._tubContract().address,this.byte32Id,i(e,$t).toFixed("wei")).encodeABI(),c=new this.web3.eth.Contract(gt["a"],this._proxyAddress),u=c.methods.execute(r,o).encodeABI(),t.abrupt("return",this.web3.eth.sendTransaction({to:this._proxyAddress,from:this.currentAddress,data:u,gas:2e6}).catch((function(t){S["e"].responseHandler(t,S["e"].ERROR)})));case 17:t.prev=17,t.t0=t["catch"](2),console.error(t.t0);case 20:case"end":return t.stop()}}),t,this,[[2,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"wipeDai",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.noProxy){t.next=3;break}return t.abrupt("return");case 3:return this.needsUpdate=!0,t.next=6,this.cdpService.wipeDaiProxy(this._proxyAddress,this.cdpId,e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"canCloseCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.debtValue.toNumber(),t.next=3,this.cdpService.enoughMkrToWipe(this.cdpId,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.needsUpdate=!0,this.closing=!0,!this.hasProxy){t.next=6;break}return t.next=6,this.cdpService.shutProxy(this._proxyAddress,this.cdpId);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("closeCdp Error:"),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"checkIfDestAddressHasProxy",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return t.next=4,this.proxyService.getProxyAddress(e);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"moveCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return t.next=4,this.proxyService.getProxyAddress(e);case 4:if(a=t.sent,!a){t.next=12;break}return this.needsUpdate=!0,this.closing=!0,t.next=10,this.cdpService.giveProxy(this._proxyAddress,this.cdpId,a);case 10:t.next=23;break;case 12:if(this.noProxy){t.next=19;break}return this.needsUpdate=!0,this.closing=!0,t.next=17,this.cdpService.giveProxy(this._proxyAddress,this.cdpId,e);case 17:t.next=23;break;case 19:return this.needsUpdate=!0,this.closing=!0,t.next=23,this.cdpService.give(this.cdpId,e);case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"enoughMkrToWipe",value:function(t){return this.cdpService.enoughMkrToWipe(t,At.wei)}},{key:"toUSD",value:function(t){var e=this.services.toUSD(t);return e.lt(0)?St(0):e}},{key:"toPeth",value:function(t){return this.services.toPeth(t)}},{key:"maxDaiDraw",value:function(){var t=St(this.ethPrice).times(St(this.ethCollateral)),e=St(this.debtValue).times(St(this.liquidationRatio));return t.minus(e).div(St(this.ethPrice))}},{key:"calcCollatRatio",value:function(t,e){return t<=0||e<=0?St(0):Object(I["a"])(this.ethPrice,t,e)}},{key:"calcLiquidationPrice",value:function(t,e){return t<=0||e<=0?St(0):Object(I["b"])(t,e,this.ethPrice,this.liquidationRatio)}},{key:"approveDai",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.daiToken.approveUnlimited(this.proxyAddress);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"approveMkr",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mkrToken.approveUnlimited(this.proxyAddress);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getDaiBalances",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.services.daiToken.balance();case 2:return this.daiBalance=t.sent,t.abrupt("return",this.daiBalance);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"currentAddress",get:function(){return this.services.account.address}},{key:"liquidationPenalty",get:function(){return this.services.liquidationPenalty}},{key:"stabilityFee",get:function(){return this.services.stabilityFee}},{key:"ethPrice",get:function(){return this.services.ethPrice}},{key:"pethPrice",get:function(){return this.services._pethPrice}},{key:"wethToPethRatio",get:function(){return this.services.wethToPethRatio}},{key:"liquidationRatio",get:function(){return this.services.liquidationRatio}},{key:"proxyAddress",get:function(){return this.services._proxyAddress}},{key:"hasProxy",get:function(){return this.services.hasProxy}},{key:"proxyAllowanceDai",get:function(){return this.services.proxyAllowanceDai}},{key:"proxyAllowanceMkr",get:function(){return this.services.proxyAllowanceMkr}},{key:"daiToken",get:function(){return this.services._daiToken}},{key:"daiBalance",get:function(){return this.services.daiBalance}},{key:"mkrToken",get:function(){return this.services._mkrToken}},{key:"mkrBalance",get:function(){return this.services.mkrBalance}},{key:"proxyService",get:function(){return this.services._proxyService}},{key:"cdpService",get:function(){return this.services._cdpService}},{key:"minEth",get:function(){return this.services.minEth()}},{key:"pethMin",get:function(){return this.services.pethMin}},{key:"zeroDebt",get:function(){return St(this.debtValue).eq(0)}},{key:"usdCollateral",get:function(){return this.toUSD(this.ethCollateral)}},{key:"ethCollateralNum",get:function(){return this.ethCollateral.toNumber()}},{key:"collatRatio",get:function(){return this._collatRatio}},{key:"liquidationPrice",get:function(){return this._liqPrice}},{key:"governanceFeeOwed",get:function(){return this._governanceFee}},{key:"maxDai",get:function(){return this.ethPrice&&this.ethCollateral&&this.liquidationRatio&&this.debtValue?Object(I["f"])(this.ethPrice,this.ethCollateral,this.liquidationRatio.plus(.001),this.debtValue):St(0)}},{key:"maxEthDraw",get:function(){return this.ethPrice&&this.debtValue&&this.liquidationRatio?this.zeroDebt?Object(I["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice,this.minEth.times(0)).toFixed(18):Object(I["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice).toFixed(18):St(0)}},{key:"maxPethDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.zeroDebt?Object(I["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice,this.pethMin.times(0)):Object(I["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice):St(0)}},{key:"maxUsdDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.toUSD(this.maxEthDraw):St(0)}},{key:"needToFinishMigrating",get:function(){return this._proxyAddress&&this.noProxy}}],[{key:"toNumber",value:function(t){return f.a.isBigNumber(t)?t.toNumber():St(t).toNumber()}},{key:"displayPercentValue",value:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()}},{key:"displayFixedValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return f.a.isBigNumber(t)||(t=new f.a(t)),a?t.toFixed(e,f.a.ROUND_DOWN).toString():t.toFixed(e).toString()}}]),t}(),Ot=a("b7d3"),Bt=a("1383"),jt=vt.a.MKR,Vt=vt.a.DAI,qt=function(t){return new f.a(t)},Tt=function(t,e,a){return qt(t).times(qt(e)).div(qt(a))},Ft={components:{"generate-modal":z,"deposit-modal":X,"withdraw-modal":st,"payback-modal":ht,"back-button":l["a"],"close-cdp-modal":C,"move-cdp-modal":j},props:{tokensWithBalance:{type:Array,default:function(){return[]}},getBalance:{type:Function,default:function(){}},highestGas:{type:String,default:"0"}},data:function(){return{destAddressProxy:"",destAddressHasProxy:!1,afterUpdate:[],allCdpIds:[],activeCdp:{},activeValues:{maxPethDraw:qt(0),maxEthDraw:qt(0),maxUsdDraw:qt(0),ethCollateral:qt(0),pethCollateral:qt(0),usdCollateral:qt(0),debtValue:qt(0),maxDai:qt(0),collateralRatio:qt(0),minEth:qt(0),cdpId:"--"},availableCdps:{},cdps:[],cdpsWithoutProxy:[],cdpService:{},cdpDetailsLoaded:!1,currentProxy:null,currentCdpId:"",creatingCdp:!1,daiPrice:0,daiQty:0,ethPrice:qt(0),ethQty:0,liquidationRatio:qt(0),liquidationPenalty:qt(0),makerActive:!1,makerCdp:{},makerManager:{},migrationInProgress:{},openCloseModal:!1,openMoveModal:!1,proxyService:{},proxyAddress:null,pethPrice:qt(0),pethMin:qt(0),priceService:{},priceFloor:0,stabilityFee:qt(0),sysVars:{},sysServices:{},targetPrice:0,valuesUpdated:0,wethToPethRatio:qt(0)}},computed:Object(c["a"])({},Object(u["c"])("main",["account","gasPrice","web3","network","ens"]),{maxDaiDraw:function(){return this.ethQty<=0?0:Tt(this.ethPrice,this.ethQty,this.liquidationRatio)},minEthDeposit:function(){return this.daiQty<=0?0:Tt(this.liquidationRatio,this.daiQty,this.ethPrice)},showMoveOrClose:function(){return"manage-sai"===this.$route.name||"migrate-sai"===this.$route.name},showManage:function(){return this.listCdps||this.cdps.length>=1&&this.cdpsWithoutProxy.length>=1},showRefresh:function(){return this.cdps.length>0||this.cdpsWithoutProxy.length>0},onCreate:function(){return"create-sai"===this.$route.name},showCreateProxy:function(){return!this.showCdpMigrateButtons&&(!this.hasProxy&&!this.onCreate)},showCdpMigrateButtons:function(){return this.hasProxy&&this.cdpsWithoutProxy.length>=1},listCdps:function(){return this.cdps.length>1||this.cdpsWithoutProxy.length>1},hasProxy:function(){return null!==this.proxyAddress},currentProxyAddress:function(){return this.proxyAddress}}),watch:Object(o["a"])({},"account.address",(function(){this.makerActive=!1,this.setup()})),destroyed:function(){this.priceService={},this.cdpService={},this.proxyService={},this.availableCdps={},this.activeCdp={},this.makerCdp={},this.sysVars={},this.sysServices={}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setup();case 2:case"end":return e.stop()}}),e)})))()},methods:{modalHidden:function(){this.openCloseModal=!1,this.openMoveModal=!1},gotoHome:function(){this.$router.push({name:"Maker-sai"})},gotoCreate:function(){this.$route.path.includes("maker-sai")&&(this.activeValues=this.systemValues,this.$router.push({name:"create-sai"}))},goToManage:function(){this.$route.path.includes("maker-sai")&&(1===this.cdps.length?this.$router.push({name:"manage-sai",params:{cdpId:this.cdps[0]}}):1===this.cdpsWithoutProxy.length?this.$router.push({name:"migrate-sai",params:{cdpId:this.cdpsWithoutProxy[0]}}):this.showManage?this.$router.push({name:"select-sai"}):this.gotoCreate())},openManage:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"manage-sai",params:{cdpId:t}}))},openMigrate:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"migrate-sai",params:{cdpId:t}}))},showDeposit:function(){this.$refs.deposit.$refs.modal.show()},showWithdraw:function(){this.$refs.withdraw.$refs.modal.show()},showPayback:function(){this.$refs.payback.$refs.modal.show()},showGenerate:function(){this.$refs.generate.$refs.modal.show()},showClose:function(){var t=this;this.$refs.closeCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.$refs.closeCdp.$refs.modal.show()},showMove:function(){var t=this;this.$refs.moveCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.destAddressHasProxy=!1,this.$refs.moveCdp.$refs.modal.show()},setup:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.activeCdps={},t.currentCdp={},a=t.web3,n=t,t.gotoHome(),i=Object(Bt["a"])(a,n.account.address,Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.$route.path.includes("maker-sai")){t.next=3;break}return t.next=3,n.doUpdate();case 3:case"end":return t.stop()}}),t)})))),e.next=8,vt.a.create("inject",{provider:{inject:a.currentProvider},plugins:[i],accounts:{myLedger1:{type:"mew"}}});case 8:return t.maker=e.sent,e.next=11,t.maker.authenticate();case 11:return t._priceService=t.maker.service("price"),e.next=14,t.maker.service("cdp");case 14:return t._cdpService=e.sent,e.next=17,t.maker.service("proxy");case 17:return t._proxyService=e.sent,e.next=20,t.maker.service("token");case 20:return t._tokenService=e.sent,t.pethMin=qt(.005),e.t0=qt,e.next=25,t._priceService.getEthPrice();case 25:return e.t1=e.sent.toNumber(),t.ethPrice=(0,e.t0)(e.t1),e.t2=qt,e.next=30,t._priceService.getPethPrice();case 30:return e.t3=e.sent.toNumber(),t.pethPrice=(0,e.t2)(e.t3),e.t4=qt,e.next=35,t._priceService.getPethPrice();case 35:return e.t5=e.sent.toNumber(),t._targetPrice=(0,e.t4)(e.t5),e.t6=qt,e.next=40,t._cdpService.getLiquidationRatio();case 40:return e.t7=e.sent,t.liquidationRatio=(0,e.t6)(e.t7),e.t8=qt,e.next=45,t._cdpService.getLiquidationPenalty();case 45:return e.t9=e.sent,t.liquidationPenalty=(0,e.t8)(e.t9),e.t10=qt,e.next=50,t._cdpService.getAnnualGovernanceFee();case 50:return e.t11=e.sent,t.stabilityFee=(0,e.t10)(e.t11),e.t12=qt,e.next=55,t._priceService.getWethToPethRatio();case 55:return e.t13=e.sent,t.wethToPethRatio=(0,e.t12)(e.t13),e.next=59,t._proxyService.currentProxy();case 59:return t.proxyAddress=e.sent,t.daiToken=t._tokenService.getToken(Vt),e.next=63,t.daiToken.balance();case 63:return t.daiBalance=e.sent.toBigNumber(),t.mkrToken=t._tokenService.getToken(jt),e.next=67,t.mkrToken.balance();case 67:return t.mkrBalance=e.sent.toBigNumber(),r=qt(t.pethMin).times(t.wethToPethRatio),t.systemValues={stabilityFee:t.stabilityFee,minEth:r,liquidationRatio:t.liquidationRatio,wethToPethRatio:t.wethToPethRatio,liquidationPenalty:t.liquidationPenalty,targetPrice:t._targetPrice,pethPrice:t.pethPrice},e.next=72,t.checkAllowances();case 72:return e.next=74,t.locateCdps();case 74:if(o=e.sent,c=o.withProxy,u=o.withoutProxy,t.cdps=c,t.cdpsWithoutProxy=u,!(t.cdps.length>0||t.cdpsWithoutProxy.length>0)){e.next=82;break}return e.next=82,t.loadCdpDetails();case 82:t.currentProxy=t.getProxy(),t.cdps.length>0||t.cdpsWithoutProxy.length>0?(t.cdpDetailsLoaded=!0,t.makerActive=!0,"create-sai"!==t.$route.name&&t.$route.path.includes("maker-sai")&&t.goToManage()):t.gotoCreate();case 84:case"end":return e.stop()}}),e)})))()},buildEmpty:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.buildCdpObject(null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},addCdp:function(){this.creatingCdp=!0},removeCdp:function(t){try{delete this.availableCdps[t.id],S["e"].responseHandler(this.$t("dapps-maker.cdp-closed"),S["e"].INFO)}catch(e){console.error(e)}},migrateCdpExternal:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.afterUpdate.push(e.goToManage),a.next=3,e.migrateCdp(t);case 3:case"end":return a.stop()}}),a)})))()},refreshExternal:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doUpdate();case 2:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.doUpdate();case 2:case"end":return e.stop()}}),e)})))()},doUpdate:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProxy();case 2:return t.proxyAddress=e.sent,a=!1,n="create-sai"===t.$route.name,e.next=7,t.updateActiveCdp();case 7:i=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.activeCdps[n].needsUpdate){e.next=16;break}if(!t.activeCdps[n].closing){e.next=8;break}a=!0,delete t.activeCdps[n],t.cdps=t.cdps.filter((function(t){return t!==n})),t.cdpsWithoutProxy=t.cdpsWithoutProxy.filter((function(t){return t!==n})),e.next=16;break;case 8:if(!t.activeCdps[n].opening){e.next=13;break}return e.next=11,t.activeCdps[n].updateValues();case 11:e.next=16;break;case 13:return e.next=15,t.activeCdps[n].update();case 15:t.activeCdps[n]=e.sent;case 16:if(n!==t.currentCdpId){e.next=21;break}return e.next=19,t.currentCdp.update();case 19:return e.next=21,t.setupCdpManage(t.currentCdpId);case 21:case"end":return e.stop()}}),e)})),e.t0=regeneratorRuntime.keys(t.activeCdps);case 9:if((e.t1=e.t0()).done){e.next=14;break}return r=e.t1.value,e.delegateYield(i(r),"t2",12);case 12:e.next=9;break;case 14:return e.next=16,t.daiToken.balance();case 16:return t.daiBalance=e.sent.toBigNumber(),e.next=19,t.mkrToken.balance();case 19:return t.mkrBalance=e.sent.toBigNumber(),e.next=22,t.checkAllowances();case 22:if(Object.keys(t.activeCdps).includes(t.currentCdpId)){e.next=29;break}return e.next=25,t.loadCdpDetails();case 25:return e.next=27,t.setupCdpManage(t.currentCdpId);case 27:e.next=31;break;case 29:return e.next=31,t.setupCdpManage(t.currentCdpId);case 31:if(s=function e(){if(t.afterUpdate.length>0){var a=t.afterUpdate.pop();a(),e()}},s(),(a||n||t.creatingCdp)&&(t.cdps.length>0||t.cdpsWithoutProxy.length>0?t.goToManage():t.gotoCreate()),!t.creatingCdp){e.next=41;break}return t.creatingCdp=!1,e.next=38,t.updateActiveCdp();case 38:S["e"].responseHandler(t.$t("dapps-maker.cdp-created"),S["e"].INFO),e.next=43;break;case 41:t.valuesUpdated++,S["e"].responseHandler(t.$t("dapps-maker.cdp-updated"),S["e"].INFO);case 43:case"end":return e.stop()}}),e)})))()},checkAllowances:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.proxyAddress){e.next=7;break}return e.next=3,t.daiToken.allowance(t.account.address,t.proxyAddress);case 3:return t._proxyAllowanceDai=e.sent.toBigNumber(),e.next=6,t.mkrToken.allowance(t.account.address,t.proxyAddress);case 6:t._proxyAllowanceMkr=e.sent.toBigNumber();case 7:case"end":return e.stop()}}),e)})))()},setupCdpManage:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.allCdpIds.includes(t)&&e.allCdpIds.length>0&&(t=e.allCdpIds[0]),0!==e.allCdpIds.length){a.next=5;break}e.activeValues=e.systemValues,a.next=9;break;case 5:return e.currentCdpId=t,a.next=8,e.getValuesForManage(t);case 8:e.activeValues=a.sent;case 9:case"end":return a.stop()}}),a)})))()},getValuesForManage:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,i,r,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.activeCdps[t],e.currentCdp=n,i=e._proxyAllowanceDai,r=e._proxyAllowanceMkr,s=e.toPeth,o=e.systemValues,a.abrupt("return",Object(c["a"])({},o,{cdpId:t,maxPethDraw:n.maxPethDraw,maxEthDraw:n.maxEthDraw,maxUsdDraw:n.maxUsdDraw,ethCollateral:n.ethCollateral,pethCollateral:n.pethCollateral,usdCollateral:n.usdCollateral,debtValue:n.debtValue,maxDai:n.maxDai,collateralRatio:n.collatRatio,liquidationPrice:n.liquidationPrice,minEth:n.minEth,isSafe:!1,governanceFeeOwed:n.governanceFeeOwed,ethCollateralNum:n.ethCollateralNum,toPeth:s,proxyAllowanceDai:i,proxyAllowanceMkr:r,zeroDebt:n.zeroDebt}));case 7:case"end":return a.stop()}}),a)})))()},locateCdps:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cdpsWithoutProxy=[],e.next=3,t.locateCdpsWithoutProxy();case 3:return t.cdpsWithoutProxy=e.sent,t.cdps=[],e.next=7,t.locateCdpsProxy();case 7:return t.cdps=e.sent,t.allCdpIds=[].concat(Object(r["a"])(t.cdpsWithoutProxy),Object(r["a"])(t.cdps)),e.abrupt("return",{withProxy:t.cdps,withoutProxy:t.cdpsWithoutProxy});case 10:case"end":return e.stop()}}),e)})))()},locateCdpsWithoutProxy:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._cdpService.getCdpIds(t.account.address);case 2:return a=e.sent,e.next=5,t._cdpService.getCdpIds(Object(Ot["b"])(t.account.address));case 5:return n=e.sent,e.abrupt("return",a.concat(n));case 7:case"end":return e.stop()}}),e)})))()},locateCdpsProxy:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProxy();case 2:return t.proxyAddress=e.sent,e.next=5,t._cdpService.getCdpIds(t.proxyAddress);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},updateActiveCdp:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object.keys(t.activeCdps),e.next=3,t.locateCdps();case 3:if(n=t.cdps.filter((function(e){return!Object.keys(t.activeCdps).includes(e.toString())})),i=t.cdpsWithoutProxy.filter((function(e){return!Object.keys(t.activeCdps).includes(e.toString())})),r=a.filter((function(e){return!(t.cdps.includes(e.toString())||t.cdpsWithoutProxy.includes(e.toString()))})),r.length>0&&r.forEach((function(e){return delete t.activeCdps[e]})),!(n.length>0)){e.next=16;break}s=0;case 9:if(!(s<n.length)){e.next=16;break}return e.next=12,t.buildCdpObject(n[s]);case 12:t.activeCdps[n[s]]=e.sent;case 13:s++,e.next=9;break;case 16:if(!(i.length>0)){e.next=25;break}o=0;case 18:if(!(o<i.length)){e.next=25;break}return e.next=21,t.buildCdpObject(i[o],{noProxy:!0});case 21:t.activeCdps[i[o]]=e.sent;case 22:o++,e.next=18;break;case 25:0===t.cdps.length&&0===t.cdpsWithoutProxy.length&&t.gotoCreate();case 26:case"end":return e.stop()}}),e)})))()},loadCdpDetails:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.cdps.length)){e.next=8;break}return e.next=4,t.buildCdpObject(t.cdps[a]);case 4:t.activeCdps[t.cdps[a]]=e.sent;case 5:a++,e.next=1;break;case 8:n=0;case 9:if(!(n<t.cdpsWithoutProxy.length)){e.next=16;break}return e.next=12,t.buildCdpObject(t.cdpsWithoutProxy[n],{noProxy:!0});case 12:t.activeCdps[t.cdpsWithoutProxy[n]]=e.sent;case 13:n++,e.next=9;break;case 16:case"end":return e.stop()}}),e)})))()},buildCdpObject:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(regeneratorRuntime.mark((function n(){var i,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=Object(c["a"])({},a,{_proxyAddress:e.proxyAddress,liquidationPenalty:e.liquidationPenalty,stabilityFee:e.stabilityFee,ethPrice:e.ethPrice,_pethPrice:e.pethPrice,wethToPethRatio:e.wethToPethRatio,_targetPrice:e._targetPrice,liquidationRatio:e.liquidationRatio,proxyAllowanceDai:e.proxyAllowanceDai,proxyAllowanceMkr:e.proxyAllowanceMkr,_daiToken:e._daiToken,daiBalance:e.daiBalance,_mkrToken:e._mkrToken,mkrBalance:e.mkrBalance,minEth:e.minEth,pethMin:e.pethMin}),!e.cdpsWithoutProxy.includes(t)){n.next=7;break}return n.next=4,e.getMakerCdp(t,!1);case 4:e.cdp=n.sent,n.next=16;break;case 7:if(!e.cdps.includes(t)){n.next=13;break}return n.next=10,e.getMakerCdp(t,e.proxyAddress);case 10:e.cdp=n.sent,n.next=16;break;case 13:return n.next=15,e.getMakerCdp(t,!1);case 15:e.cdp=n.sent;case 16:if(r={account:e.account,_proxyService:e._proxyService,priceService:e.priceService,_cdpService:e._cdpService,doUpdate:e.doUpdate,getProxy:e.getProxy,hasProxy:e.hasProxy,getCdp:e.getMakerCdp,toPeth:e.toPeth,toUSD:e.toUSD,_proxyAddress:e.proxyAddress,liquidationPenalty:e.liquidationPenalty,stabilityFee:e.stabilityFee,ethPrice:e.ethPrice,_pethPrice:e.pethPrice,wethToPethRatio:e.wethToPethRatio,_targetPrice:e._targetPrice,liquidationRatio:e.liquidationRatio,proxyAllowanceDai:e.proxyAllowanceDai,proxyAllowanceMkr:e.proxyAllowanceMkr,_daiToken:e._daiToken,daiBalance:e.daiBalance,_mkrToken:e._mkrToken,mkrBalance:e.mkrBalance,minEth:e.minEth,pethMin:e.pethMin},s=new Et(t,e.web3,r,i),!t){n.next=22;break}return n.next=21,s.init(t);case 21:return n.abrupt("return",n.sent);case 22:return n.abrupt("return",s);case 23:case"end":return n.stop()}}),n)})))()},getProxy:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._proxyService.currentProxy();case 2:if(t.proxyAddress=e.sent,t.proxyAddress){e.next=8;break}return e.next=6,t._proxyService.getProxyAddress(t.account.address);case 6:t.proxyAddress=e.sent,t.proxyAddress&&(t.noProxy=!1);case 8:return e.abrupt("return",t.proxyAddress);case 9:case"end":return e.stop()}}),e)})))()},lockEth:function(t){this.currentCdp.lockEth(t)},wipeDai:function(t){this.currentCdp.wipeDai(t)},freeEth:function(t){var e=this;null===t[1]?this.currentCdp.freeEth(t[0]).then((function(){e.$route.path.includes("maker-sai")&&e.doUpdate()})):this.currentCdp.freeEth(t[0],t[1]).then((function(){e.$route.path.includes("maker-sai")&&e.doUpdate()}))},drawDai:function(t){null===t[1]?this.currentCdp.drawDai(t[0]):this.currentCdp.drawDai(t[0],t[1])},closeCdp:function(){this.currentCdp.closeCdp()},checkIfDestAddressHasProxy:function(t){var e=this;this.currentCdp.checkIfDestAddressHasProxy(t).then((function(t){e.destAddressProxy=t,e.destAddressHasProxy=null!==t})).catch((function(t){throw t}))},moveCdp:function(t){this.currentCdp.moveCdp(t)},calcCollatRatioDaiChg:function(t){return qt(this.currentCdp.calcCollatRatio(this.currentCdp.ethCollateral,t))},calcCollatRatioEthChg:function(t){return qt(this.currentCdp.calcCollatRatio(t,this.currentCdp.debtValue))},calcLiquidationPriceDaiChg:function(t){return qt(this.currentCdp.calcLiquidationPrice(this.currentCdp.ethCollateral,t))},calcLiquidationPriceEthChg:function(t){return qt(this.currentCdp.calcLiquidationPrice(t,this.currentCdp.debtValue))},approveDai:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._tokenService.getToken(Vt).approveUnlimited(t.proxyAddress);case 2:case"end":return e.stop()}}),e)})))()},approveMkr:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._tokenService.getToken(jt).approveUnlimited(t.proxyAddress);case 1:case"end":return e.stop()}}),e)})))()},hasCdp:function(t){return Object.keys(this.activeCdps).includes(qt(t).toString())},getCdp:function(t){return this.activeCdps[t]},getMakerCdp:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==t){a.next=2;break}return a.abrupt("return");case 2:if(!e.cdpsWithoutProxy.includes(t)){a.next=8;break}return a.next=5,e.maker.getCdp(t,!1);case 5:return a.abrupt("return",a.sent);case 8:if(!e.cdps.includes(t)||!e.proxyAddress){a.next=14;break}return a.next=11,e.maker.getCdp(t,e.proxyAddress);case 11:return a.abrupt("return",a.sent);case 14:if(!e.proxyAddress){a.next=18;break}return a.next=17,e.maker.getCdp(t,e.proxyAddress);case 17:return a.abrupt("return",a.sent);case 18:return a.next=20,e.maker.getCdp(t,!1);case 20:return a.abrupt("return",a.sent);case 21:case"end":return a.stop()}}),a)})))()},buildProxy:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProxy();case 2:if(t.proxyAddress=e.sent,t.proxyAddress){e.next=10;break}return e.next=6,t._proxyService.build();case 6:return e.next=8,t._proxyService.currentProxy();case 8:return t.proxyAddress=e.sent,e.abrupt("return",t.proxyAddress);case 10:return e.next=12,t._proxyService.currentProxy();case 12:return t.proxyAddress=e.sent,e.abrupt("return",t.proxyAddress);case 14:case"end":return e.stop()}}),e)})))()},migrateCdp:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getProxy();case 2:if(n=a.sent,!n){a.next=6;break}return a.next=6,e._cdpService.give(t,n);case 6:case"end":return a.stop()}}),a)})))()},minEth:function(){return this.wethToPethRatio?qt(this.pethMin).times(this.wethToPethRatio):"--"},toUSD:function(t){return void 0===t||null===t?qt(0):this.ethPrice.times(qt(t))},toPeth:function(t){return qt(t).eq(0)?qt(0):qt(t).div(this.wethToPethRatio)}}},Wt=Ft,It=(a("b125"),Object(k["a"])(Wt,n,i,!1,null,"89746876",null));e["default"]=It.exports},2455:function(t,e,a){},"394f":function(t,e,a){"use strict";var n=a("af87"),i=a.n(n);i.a},"753f":function(t,e,a){},"7b92":function(t,e,a){},"7c0e":function(t,e,a){"use strict";var n=a("148d"),i=a.n(n);i.a},9441:function(t,e,a){"use strict";var n=a("2455"),i=a.n(n);i.a},"9c3d":function(t){t.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"draw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"},{"name":"wad","type":"uint256"},{"name":"otc_","type":"address"}],"name":"wipeAndFree","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"lockAndDraw","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"wad","type":"uint256"}],"name":"lockAndDraw","outputs":[{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"}],"name":"createAndOpen","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"otc_","type":"address"}],"name":"shut","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"},{"name":"otc_","type":"address"}],"name":"wipe","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"wipe","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"}],"name":"open","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"}],"name":"shut","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"}],"name":"lock","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"},{"name":"wad","type":"uint256"}],"name":"createOpenLockAndDraw","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"lad","type":"address"}],"name":"give","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"}],"name":"createOpenAndLock","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"}],"name":"free","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"},{"name":"wad","type":"uint256"}],"name":"wipeAndFree","outputs":[],"payable":true,"stateMutability":"payable","type":"function"}]')},af87:function(t,e,a){},b125:function(t,e,a){"use strict";var n=a("f888"),i=a.n(n);i.a},b459:function(t,e,a){"use strict";var n=a("753f"),i=a.n(n);i.a},c16c:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"g",(function(){return p})),a.d(e,"a",(function(){return h})),a.d(e,"b",(function(){return m}));a("b680"),a("d3b7"),a("25f0");var n=a("901e"),i=a.n(n),r=function(t){return new i.a(t)},s=function(t,e,a){return r(t).times(r(e)).div(r(a))};function o(t){return i.a.isBigNumber(t)||(t=new i.a(t)),t.times(100).toString()}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.a.isBigNumber(t)||(t=new i.a(t)),!isFinite(t)||isNaN(t)?"--":a?t.toFixed(e,i.a.ROUND_DOWN).toString():t.toFixed(e).toString()}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=c(o(t),e,a);return isFinite(n)&&new i.a(n).gt(0)?n:"--"}function l(t,e,a,n){return s(r(t),r(e),r(a)).minus(r(n))}function d(t,e,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e).plus(.001),r(a),r(n))).minus(r(i).times(1))}function p(t,e,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e),r(a),r(n))).minus(r(i).times(1))}function h(t,e,a){return s(r(a),t,e)}function m(t,e,a,n){for(var i=parseInt(a),o=i;o>0;o--){var c=s(o,t,e).lte(r(n));if(c)return o}for(var u=100;u>0;u--){var l=s(u/100,t,e).lte(r(n));if(l)return u/100}return 0}},d4e0:function(t,e,a){"use strict";var n=a("7b92"),i=a.n(n);i.a},f09a:function(t,e,a){"use strict";var n=a("03c0"),i=a.n(n);i.a},f888:function(t,e,a){}}]);
//# sourceMappingURL=chunk-252ef923.c52a76d1.js.map